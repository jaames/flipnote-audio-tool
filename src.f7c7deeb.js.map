{"version":3,"sources":["../src/options.js","../src/constants.js","../src/create-element.js","../src/component.js","../src/render.js","../src/create-context.js","../src/util.js","../src/diff/children.js","../src/diff/props.js","../src/diff/index.js","../src/clone-element.js","../src/diff/catch-error.js","node_modules/stream-http/lib/capability.js","node_modules/inherits/inherits_browser.js","node_modules/process/browser.js","node_modules/process-nextick-args/index.js","node_modules/isarray/index.js","node_modules/events/events.js","node_modules/readable-stream/lib/internal/streams/stream-browser.js","node_modules/base64-js/index.js","node_modules/ieee754/index.js","node_modules/buffer/index.js","node_modules/readable-stream/node_modules/safe-buffer/index.js","node_modules/core-util-is/lib/util.js","node_modules/readable-stream/lib/internal/streams/BufferList.js","node_modules/readable-stream/lib/internal/streams/destroy.js","node_modules/util-deprecate/browser.js","node_modules/readable-stream/lib/_stream_writable.js","node_modules/readable-stream/lib/_stream_duplex.js","node_modules/readable-stream/node_modules/string_decoder/lib/string_decoder.js","node_modules/readable-stream/lib/_stream_readable.js","node_modules/readable-stream/lib/_stream_transform.js","node_modules/readable-stream/lib/_stream_passthrough.js","node_modules/readable-stream/readable-browser.js","node_modules/stream-http/lib/response.js","node_modules/to-arraybuffer/index.js","node_modules/stream-http/lib/request.js","node_modules/xtend/immutable.js","node_modules/builtin-status-codes/browser.js","node_modules/node-libs-browser/node_modules/punycode/punycode.js","node_modules/url/util.js","node_modules/querystring-es3/decode.js","node_modules/querystring-es3/encode.js","node_modules/querystring-es3/index.js","node_modules/url/url.js","node_modules/stream-http/index.js","node_modules/https-browserify/index.js","node_modules/flipnote.js/dist/flipnote.es.js","src/AudioRenderer.ts","src/components/Header.tsx","src/components/Footer.tsx","src/components/NotePreview.tsx","webpack://WaveSurfer/webpack/universalModuleDefinition","webpack://WaveSurfer/webpack/bootstrap","webpack://WaveSurfer/node_modules/debounce/index.js","webpack://WaveSurfer/src/drawer.canvasentry.js","webpack://WaveSurfer/src/drawer.js","webpack://WaveSurfer/src/drawer.multicanvas.js","webpack://WaveSurfer/src/mediaelement-webaudio.js","webpack://WaveSurfer/src/mediaelement.js","webpack://WaveSurfer/src/peakcache.js","webpack://WaveSurfer/src/util/absMax.js","webpack://WaveSurfer/src/util/clamp.js","webpack://WaveSurfer/src/util/fetch.js","webpack://WaveSurfer/src/util/frame.js","webpack://WaveSurfer/src/util/get-id.js","webpack://WaveSurfer/src/util/index.js","webpack://WaveSurfer/src/util/max.js","webpack://WaveSurfer/src/util/min.js","webpack://WaveSurfer/src/util/observer.js","webpack://WaveSurfer/src/util/prevent-click.js","webpack://WaveSurfer/src/util/request-animation-frame.js","webpack://WaveSurfer/src/util/style.js","webpack://WaveSurfer/src/wavesurfer.js","webpack://WaveSurfer/src/webaudio.js","webpack://WaveSurfer.[name]/src/plugin/spectrogram/index.js","webpack://WaveSurfer.[name]/webpack/universalModuleDefinition","webpack://WaveSurfer.[name]/webpack/bootstrap","webpack://WaveSurfer.[name]/src/plugin/spectrogram/fft.js","src/components/WaveViewer.tsx","src/components/InputGroup.tsx","src/components/Input.tsx","src/components/EnumInput.tsx","src/App.tsx","src/index.tsx"],"names":["options","isValidElement","rerenderQueue","defer","prevDebounce","IS_HYDRATE","i","EMPTY_OBJ","EMPTY_ARR","IS_NON_DIMENSIONAL","assign","obj","props","removeNode","node","parentNode","removeChild","createElement","type","children","key","ref","normalizedProps","arguments","length","push","defaultProps","createVNode","original","vnode","undefined","constructor","createRef","current","Fragment","Component","context","getDomSibling","childIndex","indexOf","sibling","updateParentDomPointers","child","base","enqueueRender","c","process","debounceRendering","queue","sort","a","b","some","component","commitQueue","oldVNode","oldDom","parentDom","diff","ownerSVGElement","commitRoot","diffChildren","renderResult","newParentVNode","oldParentVNode","globalContext","isSvg","excessDomChildren","isHydrating","j","childVNode","newDom","firstChildDom","refs","oldChildren","oldChildrenLength","Array","isArray","reorderChildren","placeChild","value","unmount","applyRef","tmp","toChildArray","out","nextDom","sibDom","outer","appendChild","nextSibling","insertBefore","diffProps","dom","newProps","oldProps","hydrate","setProperty","setStyle","style","test","name","oldValue","useCapture","nameLower","proxy","cssText","replace","toLowerCase","slice","_listeners","eventProxyCapture","eventProxy","addEventListener","removeEventListener","removeAttributeNS","setAttributeNS","removeAttribute","setAttribute","e","event","newVNode","isNew","oldState","snapshot","clearProcessingException","provider","componentContext","newType","contextType","prototype","render","doRender","sub","state","getDerivedStateFromProps","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","componentDidUpdate","getChildContext","getSnapshotBeforeUpdate","diffElementNodes","diffed","root","cb","call","oldHtml","newHtml","nodeType","localName","document","createTextNode","createElementNS","is","data","childNodes","dangerouslySetInnerHTML","attributes","innerHTML","checked","parentVNode","skipRemove","r","componentWillUnmount","this","replaceNode","cloneElement","createContext","defaultValue","contextId","Consumer","contextValue","Provider","subs","ctx","_props","old","splice","error","ctor","handled","wasHydrating","getDerivedStateFromError","setState","componentDidCatch","update","callback","s","forceUpdate","Promise","then","bind","resolve","setTimeout","cachedSetTimeout","cachedClearTimeout","module","exports","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","runClearTimeout","marker","clearTimeout","currentQueue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","len","run","Item","array","noop","nextTick","args","apply","title","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","ReflectOwnKeys","R","Reflect","ReflectApply","target","receiver","Function","ProcessEmitWarning","warning","console","warn","ownKeys","Object","getOwnPropertySymbols","getOwnPropertyNames","NumberIsNaN","Number","isNaN","EventEmitter","init","_events","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","TypeError","_getMaxListeners","that","_addListener","prepend","m","events","existing","create","newListener","unshift","warned","w","String","emitter","count","onceWrapper","fired","wrapFn","_onceWrap","wrapped","unwrap","evlistener","unwrapListeners","arrayClone","listenerCount","arr","n","copy","spliceOne","list","index","pop","ret","reject","eventListener","errorListener","err","defineProperty","enumerable","get","set","arg","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","er","message","handler","position","originalListener","shift","keys","rawListeners","eventNames","pna","require","WriteReq","chunk","encoding","next","CorkedRequest","_this","entry","finish","onCorkedFinish","Writable","Duplex","asyncWrite","WritableState","util","inherits","internalUtil","deprecate","Stream","Buffer","OurUint8Array","global","Uint8Array","_uint8ArrayToBuffer","from","_isUint8Array","isBuffer","realHasInstance","destroyImpl","nop","stream","isDuplex","objectMode","writableObjectMode","hwm","highWaterMark","writableHwm","writableHighWaterMark","defaultHwm","Math","floor","finalCalled","needDrain","ending","ended","finished","destroyed","noDecode","decodeStrings","defaultEncoding","writing","corked","sync","bufferProcessing","onwrite","writecb","writelen","bufferedRequest","lastBufferedRequest","pendingcb","prefinished","errorEmitted","bufferedRequestCount","corkedRequestsFree","_writableState","writable","write","_write","writev","_writev","destroy","_destroy","final","_final","writeAfterEnd","validChunk","valid","decodeChunk","writeOrBuffer","isBuf","newChunk","last","doWrite","onwriteError","finishMaybe","onwriteStateUpdate","needFinish","clearBuffer","afterWrite","onwriteDrain","l","buffer","holder","allBuffers","callFinal","prefinish","need","endWritable","corkReq","getBuffer","_","Symbol","hasInstance","object","pipe","cork","uncork","setDefaultEncoding","end","_undestroy","undestroy","extend","hasOwnProperty","source","prop","qs","sep","eq","regexp","split","maxKeys","x","kstr","vstr","k","v","idx","substr","decodeURIComponent","xs","toString","stringifyPrimitive","isFinite","map","objectKeys","ks","encodeURIComponent","join","f","res","decode","parse","encode","stringify","ByteArray","pageSize","currPageIndex","pages","pointer","newPage","currPage","getData","page","writeByte","val","writeBytes","bytes","offset","DataStream","arrayBuffer","DataView","byteLength","seek","whence","readUint8","getUint8","writeUint8","setUint8","readInt8","getInt8","writeInt8","setInt8","readUint16","littleEndian","getUint16","writeUint16","setUint16","readInt16","getInt16","writeInt16","setInt16","readUint32","getUint32","writeUint32","setUint32","readInt32","getInt32","writeInt32","setInt32","readBytes","forEach","byte","readHex","reverse","hex","padStart","toUpperCase","readChars","chars","str","char","fromCharCode","writeChars","string","charCodeAt","readWideChars","Uint16Array","assert","condition","errMsg","trace","assertRange","min","max","isBrowser","window","assertBrowserEnv","isNode","assertNodeEnv","UNIX_EPOCH_2000","dateFromNintendoTimestamp","timestamp","Date","timeGetNoteDuration","frameCount","framerate","saveData","blob","filename","url","URL","createObjectURL","href","download","click","revokeObjectURL","FlipnoteFormat","FlipnoteAudioTrack","FlipnoteParser","hasAudioTrack","trackId","soundMeta","webUrlLoader","matches","load","xhr","XMLHttpRequest","open","responseType","onreadystatechange","readyState","status","response","statusText","send","nodeUrlLoader","chunks","fileLoader","File","FileReader","reader","onload","result","onerror","readAsArrayBuffer","nodeBufferLoader","arrayBufferLoader","ArrayBuffer","loaders","loadSource","loader","clamp","h","pcmDsAudioResample","src","srcFreq","dstFreq","srcDuration","dst","Int16Array","adjFreq","ADPCM_INDEX_TABLE_2BIT","Int8Array","ADPCM_INDEX_TABLE_4BIT","ADPCM_STEP_TABLE","pcmGetClippingRatio","numSamples","numClippedSamples","sample","PPM_FRAMERATES","PPM_PALETTE","WHITE","BLACK","RED","BLUE","PpmParser","settings","format","PPM","width","height","numLayers","rawSampleRate","sampleRate","globalPalette","prevDecodedFrame","decodeHeader","decodeAnimationHeader","decodeSoundHeader","decodeMeta","layerBuffers","prevLayerBuffers","lineEncodingBuffers","validateFSID","fsid","validateFilename","frameDataLength","soundDataLength","readFilename","lock","thumbIndex","rootAuthorName","parentAuthorName","currentAuthorName","parentAuthorId","currentAuthorId","parentFilename","currentFilename","rootAuthorId","flags","thumbFrameIndex","layerVisibility","isSpinoff","meta","loop","frameSpeed","bgmSpeed","duration","username","parent","offsetTableLength","numOffsets","frameOffsets","Uint32Array","ptr","bgmLen","se1Len","se2Len","se3Len","bgmrate","BGM","SE1","SE2","SE3","isNewFrame","frameIndex","header","decodeFrame","isTranslated","fill","translateX","translateY","layerIndex","lineEncodingBuffer","pixelBuffer","y","pixelBufferPtr","lineType","lineHeader","pixel","layer1","layer2","layer1Prev","layer2Prev","dest","getFrameLayerOrder","getFramePaletteIndices","isInverted","penMap","getFramePalette","indices","colorIndex","getLayerPixels","palette","layer","image","layerColor","getFramePixels","layers","paperColor","layer1Color","layer2Color","decodeSoundFlags","numFlags","unpacked","getAudioTrackRaw","trackMeta","decodeAudioTrack","srcSize","srcPtr","dstPtr","stepIndex","predictor","lowNibble","step","getAudioTrackPcm","srcPcm","bgmAdjust","pcmAudioMix","dstOffset","dstSize","samp","getAudioMasterPcm","ceil","master","hasBgm","hasSe1","hasSe2","hasSe3","bgmPcm","samplesPerFrame","se1Pcm","se2Pcm","se3Pcm","seFlags","frame","seOffset","flag","audioClipRatio","defaultSettings","KWZ_FRAMERATES","KWZ_PALETTE","YELLOW","GREEN","NONE","BITMASKS","KWZ_LINE_TABLE","KWZ_LINE_TABLE_SHIFT","d","g","KWZ_LINE_TABLE_COMMON","KWZ_LINE_TABLE_COMMON_SHIFT","lineTablePtr","pixels","subarray","shiftPixels","KwzParser","KWZ","prevFrameIndex","bitIndex","bitValue","buildSectionMap","quickMeta","decodeMetaQuick","getFrameOffsets","fileSize","sectionMap","Map","sectionCount","magic","substring","has","readBits","num","nextBits","readFsid","dsiGalleryNote","mac","random","edits","creationTime","modifiedTime","rootFilename","layerFlags","creationTimestamp","isDsiFilename","numFrames","kmiSection","kmcSection","frameMetaOffsets","frameDataOffsets","frameLayerSizes","frameMetaPtr","frameDataPtr","layerASize","layerBSize","layerCSize","trackSizes","SE4","getFrameDiffingFlag","getFrameLayerSizes","getFrameLayerDepths","getFrameAuthor","getFrameSoundFlags","soundFlags","getFrameCameraFlags","cameraFlags","depths","diffingFlag","isPrevFrame","framePtr","layerSizes","layerSize","skipTileCounter","tileOffsetY","tileOffsetX","subTileOffsetY","subTileOffsetX","tileType","linePtr","mask","pattern","useCommonLines","linePtrA","linePtrB","paletteOffset","pixelIndex","layerOrder","layerA","layerB","layerC","layerAOffset","layerBOffset","layerCOffset","cropStartY","cropStartX","cropWidth","cropHeight","srcStride","adpcm","output","outputPtr","originalAudioSettings","adpcmPtr","currByte","currBit","hasSe4","se4Pcm","parseSource","parserConfig","magicBytes","PlayerEvent","supportedEvents","Play","Pause","CanPlay","CanPlayThrough","SeekStart","SeekEnd","Duration","Loop","Ended","VolumeChange","Progress","TimeUpdate","FrameUpdate","FrameNext","FramePrev","FrameFirst","FrameLast","Ready","Load","LoadStart","LoadedData","LoadedMeta","Emptied","Close","BYTE","UNSIGNED_BYTE","SHORT","UNSIGNED_SHORT","INT","UNSIGNED_INT","FLOAT","getGLTypeForTypedArray","typedArray","Uint8ClampedArray","Int32Array","Float32Array","getGLTypeForTypedArrayType","typedArrayType","isArrayBuffer","SharedArrayBuffer","gl","t","WebGLBuffer","isTexture","WebGLTexture","STATIC_DRAW","ARRAY_BUFFER","ELEMENT_ARRAY_BUFFER","BUFFER_SIZE","BYTE$1","UNSIGNED_BYTE$1","SHORT$1","UNSIGNED_SHORT$1","INT$1","UNSIGNED_INT$1","FLOAT$1","defaults","attribPrefix","setBufferFromTypedArray","drawType","bindBuffer","bufferData","createBufferFromTypedArray","createBuffer","isIndices","getNormalizationForTypedArray","getNormalizationForTypedArrayType","getArray","texcoordRE","colorRE","guessNumComponentsFromName","numComponents","getNumComponents","arrayName","size","makeTypedArray","Type","createAttribsFromArrays","arrays","attribs","attribName","attrib","normalization","normalize","numValues","arrayType","numBytes","BYTES_PER_ELEMENT","stride","divisor","getBytesPerValueForGLType","positionKeys","getNumElementsFromAttributes","ii","getBufferParameter","bytesPerValue","totalElements","numElements","createBufferInfoFromArrays","srcBufferInfo","newAttribs","bufferInfo","newIndices","elementType","isWebGL2","texStorage2D","TEXTURE0","ARRAY_BUFFER$1","ACTIVE_UNIFORMS","ACTIVE_ATTRIBUTES","TRANSFORM_FEEDBACK_VARYINGS","ACTIVE_UNIFORM_BLOCKS","UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER","UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER","UNIFORM_BLOCK_DATA_SIZE","UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES","FLOAT$3","FLOAT_VEC2","FLOAT_VEC3","FLOAT_VEC4","INT$3","INT_VEC2","INT_VEC3","INT_VEC4","BOOL","BOOL_VEC2","BOOL_VEC3","BOOL_VEC4","FLOAT_MAT2","FLOAT_MAT3","FLOAT_MAT4","SAMPLER_2D","SAMPLER_CUBE","SAMPLER_3D","SAMPLER_2D_SHADOW","FLOAT_MAT2x3","FLOAT_MAT2x4","FLOAT_MAT3x2","FLOAT_MAT3x4","FLOAT_MAT4x2","FLOAT_MAT4x3","SAMPLER_2D_ARRAY","SAMPLER_2D_ARRAY_SHADOW","SAMPLER_CUBE_SHADOW","UNSIGNED_INT$3","UNSIGNED_INT_VEC2","UNSIGNED_INT_VEC3","UNSIGNED_INT_VEC4","INT_SAMPLER_2D","INT_SAMPLER_3D","INT_SAMPLER_CUBE","INT_SAMPLER_2D_ARRAY","UNSIGNED_INT_SAMPLER_2D","UNSIGNED_INT_SAMPLER_3D","UNSIGNED_INT_SAMPLER_CUBE","UNSIGNED_INT_SAMPLER_2D_ARRAY","TEXTURE_2D$1","TEXTURE_CUBE_MAP$1","TEXTURE_3D$1","TEXTURE_2D_ARRAY$1","typeMap","getBindPointForSamplerType","bindPoint","floatSetter","location","uniform1f","floatArraySetter","uniform1fv","floatVec2Setter","uniform2fv","floatVec3Setter","uniform3fv","floatVec4Setter","uniform4fv","intSetter","uniform1i","intArraySetter","uniform1iv","intVec2Setter","uniform2iv","intVec3Setter","uniform3iv","intVec4Setter","uniform4iv","uintSetter","uniform1ui","uintArraySetter","uniform1uiv","uintVec2Setter","uniform2uiv","uintVec3Setter","uniform3uiv","uintVec4Setter","uniform4uiv","floatMat2Setter","uniformMatrix2fv","floatMat3Setter","uniformMatrix3fv","floatMat4Setter","uniformMatrix4fv","floatMat23Setter","uniformMatrix2x3fv","floatMat32Setter","uniformMatrix3x2fv","floatMat24Setter","uniformMatrix2x4fv","floatMat42Setter","uniformMatrix4x2fv","floatMat34Setter","uniformMatrix3x4fv","floatMat43Setter","uniformMatrix4x3fv","samplerSetter","unit","textureOrPair","texture","sampler","activeTexture","bindTexture","bindSampler","samplerArraySetter","units","textures","floatAttribSetter","disableVertexAttribArray","vertexAttrib4fv","vertexAttrib3fv","vertexAttrib2fv","vertexAttrib1fv","enableVertexAttribArray","vertexAttribPointer","vertexAttribDivisor","intAttribSetter","vertexAttrib4iv","vertexAttribIPointer","uintAttribSetter","vertexAttrib4uiv","matAttribSetter","typeInfo","defaultSize","rowOffset","setter","arraySetter","attrTypeMap","isBuiltIn","info","startsWith","createUniformSetters","program","textureUnit","createUniformSetter","uniformInfo","uniformSetters","numUniforms","getProgramParameter","getActiveUniform","getUniformLocation","createTransformFeedbackInfo","numVaryings","varying","getTransformFeedbackVarying","createUniformBlockSpecFromProgram","uniformData","uniformIndices","pair","pname","getActiveUniforms","ndx","blockSpecs","numUniformBlocks","getActiveUniformBlockName","blockSpec","getUniformBlockIndex","usedByVertexShader","getActiveUniformBlockParameter","usedByFragmentShader","used","setUniforms","setters","values","actualSetters","numArgs","aNdx","createAttributeSetters","attribSetters","numAttribs","attribInfo","getActiveAttrib","getAttribLocation","setAttributes","buffers","createProgramInfoFromProgram","programInfo","uniformBlockSpec","transformFeedbackInfo","quadShader","layerDrawShader","postProcessShader","WebglRenderer","el","programs","shaders","framebuffers","isCtxLost","handleContextLoss","preventDefault","onlost","handleContextRestored","onrestored","defaultOptions","getContext","antialias","alpha","layerDrawProgram","createProgram","postProcessProgram","quadBuffer","createScreenQuad","setBuffersAndAttribs","paletteData","paletteTexture","createTexture","RGBA","NEAREST","CLAMP_TO_EDGE","layerTexture","ALPHA","frameTexture","LINEAR","frameBuffer","createFrameBuffer","setCanvasSize","vertexShaderSource","fragmentShaderSource","vert","createShader","VERTEX_SHADER","frag","FRAGMENT_SHADER","attachShader","linkProgram","LINK_STATUS","log","getProgramInfoLog","deleteProgram","shader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","deleteShader","x0","y0","xSubdivs","ySubdivs","numVerts","numVertsAcross","positions","texCoords","positionPtr","texCoordPtr","u","indicesPtr","texcoord","minMag","wrap","tex","TEXTURE_2D","texParameteri","TEXTURE_WRAP_S","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","TEXTURE_MAG_FILTER","texImage2D","colorTexture","fb","createFramebuffer","bindFramebuffer","FRAMEBUFFER","enable","BLEND","blendEquation","FUNC_ADD","blendFunc","ONE","ONE_MINUS_SRC_ALPHA","framebufferTexture2D","COLOR_ATTACHMENT0","dpi","devicePixelRatio","internalWidth","internalHeight","screenWidth","screenHeight","setInputSize","textureWidth","textureHeight","clearFrameBuffer","viewport","clearColor","clear","COLOR_BUFFER_BIT","setPalette","colors","dataPtr","drawPixels","useProgram","u_palette","u_paletteOffset","u_bitmap","u_textureSize","u_screenSize","drawingBufferWidth","drawingBufferHeight","drawElements","TRIANGLES","composite","u_flipY","u_tex","isErrorState","getError","NO_ERROR","CONTEXT_LOST_WEBGL","isLost","isContextLost","deleteFramebuffer","deleteTexture","deleteBuffer","canvas","_AudioContext","AudioContext","webkitAudioContext","WebAudioPlayer","useEq","eqSettings","_volume","_loop","nodeRefs","volume","setVolume","getCtx","setBuffer","inputBuffer","audioBuffer","channelData","getChannelData","connectEqNodesTo","inNode","lastNode","frequency","gain","createBiquadFilter","connect","initNodes","createBufferSource","gainNode","createGain","destination","pow","playFrom","currentTime","start","stop","disconnect","close","createTimeRanges","ranges","padNumber","strLength","formatTime","seconds","Player","autoplay","_src","_muted","_frame","isNoteLoaded","playbackStartTime","playbackTime","playbackLoopId","showThumbnail","hasPlaybackStarted","isPlaying","wasPlaying","isSeeking","playbackLoop","now","currPlaybackTime","pause","setCurrentTime","requestAnimationFrame","querySelector","renderer","audio","canvasEl","paused","isPaused","play","currentFrame","setCurrentFrame","progress","setProgress","getVolume","muted","getMuted","setMuted","getLoop","setLoop","note","buffered","seekable","currentSrc","videoWidth","videoHeight","closeNote","openNote","catch","noteFormat","drawFrame","assertNoteLoaded","getCurrentTime","getTimeCounter","getFrameCounter","getProgress","performance","playAudio","cancelAnimationFrame","stopAudio","togglePlay","getPaused","getDuration","toggleLoop","newFrameValue","newFrameIndex","nextFrame","prevFrame","lastFrame","firstFrame","thumbnailFrame","startSeek","endSeek","order","layerIndexC","layerIndexB","layerIndexA","resize","setLayerVisibility","getLayerVisibility","toggleLayerVisibility","toggleAudioEq","setAudioEq","mute","unmute","isMute","toggleMuted","seekToNextFrame","fastSeek","time","canPlayType","mediaType","getVideoPlaybackQuality","quality","droppedVideoFrames","totalVideoFrames","requestPictureInPicture","captureStream","eventType","callbackList","__Any","listenerName","thisAsAny","clearEvents","Destroy","supports","isEvent","includes","isMethod","EOF","BITS","HSIZE","masks","LzwCompressor","colorDepth","accum","htab","codetab","cur_accum","cur_bits","curPixel","free_ent","clear_flg","g_init_bits","ClearCode","EOFCode","reset","initCodeSize","maxcode","char_out","outs","a_count","flush_char","cl_block","cl_hash","hsize","compress","init_bits","fcode","ent","disp","hsize_reg","hshift","n_bits","get_maxcode","nextPixel","outer_loop","remaining","code","GifImage","dataUrl","compressor","fromFlipnote","flipnote","gif","delay","repeat","writeFrame","fromFlipnoteFrame","writeFirstFrame","writeAdditionalFrame","paletteSize","p","writeHeader","writeColorTable","writeNetscapeExt","writeFrameHeader","writePixels","netscapeExt","fHeader","transparentFlag","transparentBg","getArrayBuffer","getBlob","Blob","getUrl","revokeUrl","getImage","img","Image","WavAudio","channels","bitsPerSample","headerBuffer","pcmData","wav","pcm","writeFrames","fromFlipnoteTrack","headerBytes","pcmBytes","resultBytes","CanvasEntry","wave","waveCtx","progressCtx","id","canvasContextAttributes","element","elementWidth","totalWidth","offsetLeft","elementSize","hasProgressCanvas","clearRect","waveColor","progressColor","fillStyle","radius","fillRectToContext","drawRoundedRect","fillRect","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","peaks","absmax","halfH","offsetY","drawLineToContext","peak","first","round","canvasStart","canvasEnd","scale","halfOffset","absmaxHalf","halfPixel","toBlob","toDataURL","Drawer","Observer","container","params","pixelRatio","lastPos","wrapper","styles","fillParent","scrollParent","hideScrollbar","setupWrapperEvents","noPrevent","clientX","targetTouches","bbox","getBoundingClientRect","nominalWidth","parentWidth","getWidth","rtl","right","left","scrollLeft","scrollWidth","scrollbarHeight","offsetHeight","clientHeight","clientY","bottom","interact","fireEvent","handleEvent","setWidth","clearWave","barWidth","drawBars","drawWave","percent","recenterOnPosition","immediate","half","clientWidth","maxScroll","rate","autoCenterRate","updateSize","minPxDelta","pos","autoCenter","newPos","autoCenterImmediately","updateProgress","unAll","channelIndex","MultiCanvas","maxCanvasWidth","maxCanvasElementWidth","canvases","progressWave","EntryClass","drawingContextAttributes","overlap","barRadius","createWrapper","createElements","addCanvas","updateCursor","cursorWidth","cursorColor","requiredCanvases","removeCanvas","canvasWidth","lastCanvas","updateDimensions","leftOffset","initWave","initProgress","lastEntry","parentElement","prepareDraw","hasMinVals","peakIndexScale","bar","barGap","barMinHeight","reflectedPeaks","drawLine","splitChannelsOptions","channelColors","setFillStyles","drawLines","startCanvas","endCanvas","intersection","x1","x2","fillRects","y1","y2","splitChannels","filterChannels","fn","drawIndex","normalizedMax","filteredChannels","overallAbsMax","filter","hideChannel","overlay","setHeight","relativeNormalization","channelPeaks","absMax","barHeight","all","images","MediaElementWebAudio","MediaElement","sourceMediaElement","setPlaybackRate","audioRate","createTimer","createVolumeNode","createScriptNode","createAnalyserNode","media","preload","createMediaElementSource","mediaElement","ac","analyser","resumeAudioContext","destroyWebAudio","WebAudio","elementPosition","playbackRate","isMuted","onPlayEnd","mediaListeners","canplay","seeked","volumechange","onAudioProcess","controls","mediaControls","prevMedia","_load","elt","HTMLMediaElement","_setupMediaListeners","explicitDuration","Infinity","clearPlayEnd","seekTo","promise","setPlayEnd","_onPlayEnd","un","deviceId","setSinkId","removeMediaElementOnDestroy","PeakCache","clearPeakCache","peakCacheRanges","peakCacheLength","uncachedRanges","item","uncachedRangePairs","peakCacheRangePairs","instance","fetchHeaders","Headers","fetchRequest","Request","controller","AbortController","requestHeaders","append","fetchOptions","method","mode","credentials","cache","redirect","referrer","signal","progressAvailable","body","contentLength","headers","onProgress","Response","ReadableStream","ProgressHandler","ok","json","text","_reader","getReader","total","parseInt","loaded","read","done","enqueue","func","prefix","largest","smallest","_disabledEventEmissions","handlers","_isDisabledEventEmission","preventClickHandler","stopPropagation","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","PluginClass","WaveSurfer","defaultParams","screen","deviceXDPI","logicalXDPI","backends","mediaContainer","backgroundColor","setBackgroundColor","savedVolume","tmpEvents","currentRequest","arraybuffer","drawer","backend","peakCache","supportsWebAudio","Backend","initialisedPluginList","isDestroyed","isReady","prevWidth","_onResize","debounce","responsive","wavesurfer","registerPlugins","plugins","createDrawer","createBackend","createPeakCache","plugin","addPlugin","deferInit","initPlugin","staticProps","pluginStaticProp","Instance","destroyPlugin","drawBuffer","getPlayedPercents","partialRender","newVolume","skip","skipLength","seekAndCenter","recenter","oldScrollParent","getPlaybackRate","setMute","filters","color","channelIndices","minPxPerSec","newRanges","addRangeToPeakCache","getPeaks","drawPeaks","pxPerSec","decodeArrayBuffer","loadDecodedBuffer","loadArrayBuffer","empty","preloadIgnoreReasons","activeReasons","reason","loadBuffer","loadMediaElement","action","setPeaks","urlOrElt","loadElt","forceDecode","request","fetchFile","percentComplete","lengthComputable","accuracy","noWindow","JSON","cancel","abort","disconnectSource","cancelAjax","clearTmpEvents","destroyAllPlugins","VERSION","__VERSION__","PLAYING","PAUSED","FINISHED","audioContext","offlineAudioContext","stateBehaviors","addOnAudioProcess","startPosition","getPlayedTime","removeOnAudioProcess","getAudioContext","lastPlay","scheduledPause","states","mergedPeaks","offlineAc","scriptNode","splitPeaks","WaveSurferAudioContext","WaveSurferOfflineAudioContext","OfflineAudioContext","webkitOfflineAudioContext","setLength","setFilters","disconnectFilters","reduce","prev","curr","audioScriptProcessor","createScriptProcessor","scriptBufferSize","createJavaScriptNode","onaudioprocess","createAnalyser","createGainNode","Audio","createMediaStreamDestination","srcObject","setValueAtTime","errback","getOfflineAudioContext","decodeAudioData","numberOfChannels","newBuffer","sampleSize","sampleStep","chan","closeAudioContext","createSource","noteGrainOn","noteOff","resume","adjustedTime","bufferSize","windowFunc","bandwidth","sinTable","cosTable","windowValues","reverseTable","peakBand","abs","cos","PI","E","sin","limit","bit","calculateSpectrum","rval","ival","mag","real","imag","bSi","sqrt","spectrum","LN2","halfSize","phaseShiftStepReal","phaseShiftStepImag","currentPhaseShiftReal","currentPhaseShiftImag","tr","ti","tmpReal","fftStep","N","SpectrogramPlugin","ws","frequenciesDataUrl","_onScroll","updateScroll","_onRender","_onWrapperClick","_wrapperClickHandler","_onReady","colorMap","cmEntry","fftSamples","noverlap","createCanvas","FFT","prevSpectrogram","wsParams","labels","labelsEl","classList","add","loadLabels","relX","offsetX","layerX","spectrCc","updateCanvasStyle","loadFrequenciesData","getFrequencies","drawSpectrogram","frequenciesData","my","resample","heightFactor","imageData","createImageData","redIndex","putImageData","channelOne","bufferLength","frequencies","uniqueSamplesPerPx","currentOffset","fft","segment","log10","freq","toFixed","bgFill","fontSizeFreq","fontSizeUnit","fontType","textColorFreq","textColorUnit","textAlign","bgWidth","getMaxY","labelIndex","textBaseline","label","freqType","unitType","font","fillText","oldMatrix","columnsNumber","newMatrix","oldPiece","newPiece","column","oldStart","oldEnd","newStart","newEnd","intColumn"],"mappings":"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","file":"src.f7c7deeb.js","sourceRoot":"..","sourcesContent":["import { _catchError } from './diff/catch-error';\n\n/**\n * The `option` object can potentially contain callback functions\n * that are called during various stages of our renderer. This is the\n * foundation on which all our addons like `preact/debug`, `preact/compat`,\n * and `preact/hooks` are based on. See the `Options` type in `internal.d.ts`\n * for a full list of available option hooks (most editors/IDEs allow you to\n * ctrl+click or cmd+click on mac the type definition below).\n * @type {import('./internal').Options}\n */\nconst options = {\n\t_catchError,\n\t_vnodeId: 0\n};\n\nexport default options;\n","export const EMPTY_OBJ = {};\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n","import options from './options';\n\n/**\n * Create an virtual node (used for JSX)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * constructor for this virtual node\n * @param {object | null | undefined} [props] The properties of the virtual node\n * @param {Array<import('.').ComponentChildren>} [children] The children of the virtual node\n * @returns {import('./internal').VNode}\n */\nexport function createElement(type, props, children) {\n\tlet normalizedProps = {},\n\t\tkey,\n\t\tref,\n\t\ti;\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse normalizedProps[i] = props[i];\n\t}\n\n\tif (arguments.length > 3) {\n\t\tchildren = [children];\n\t\t// https://github.com/preactjs/preact/issues/1916\n\t\tfor (i = 3; i < arguments.length; i++) {\n\t\t\tchildren.push(arguments[i]);\n\t\t}\n\t}\n\tif (children != null) {\n\t\tnormalizedProps.children = children;\n\t}\n\n\t// If a Component VNode, check for and apply defaultProps\n\t// Note: type may be undefined in development, must never error here.\n\tif (typeof type == 'function' && type.defaultProps != null) {\n\t\tfor (i in type.defaultProps) {\n\t\t\tif (normalizedProps[i] === undefined) {\n\t\t\t\tnormalizedProps[i] = type.defaultProps[i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn createVNode(type, normalizedProps, key, ref, null);\n}\n\n/**\n * Create a VNode (used internally by Preact)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * Constructor for this virtual node\n * @param {object | string | number | null} props The properties of this virtual node.\n * If this virtual node represents a text node, this is the text of the node (string or number).\n * @param {string | number | null} key The key for this virtual node, used when\n * diffing it against its children\n * @param {import('./internal').VNode[\"ref\"]} ref The ref property that will\n * receive a reference to its created child\n * @returns {import('./internal').VNode}\n */\nexport function createVNode(type, props, key, ref, original) {\n\t// V8 seems to be better at detecting type shapes if the object is allocated from the same call site\n\t// Do not inline into createElement and coerceToVNode!\n\tconst vnode = {\n\t\ttype,\n\t\tprops,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t// _nextDom must be initialized to undefined b/c it will eventually\n\t\t// be set to dom.nextSibling which can return `null` and it is important\n\t\t// to be able to distinguish between an uninitialized _nextDom and\n\t\t// a _nextDom that has been set to `null`\n\t\t_nextDom: undefined,\n\t\t_component: null,\n\t\t_hydrating: null,\n\t\tconstructor: undefined,\n\t\t_original: original == null ? ++options._vnodeId : original\n\t};\n\n\tif (options.vnode != null) options.vnode(vnode);\n\n\treturn vnode;\n}\n\nexport function createRef() {\n\treturn { current: null };\n}\n\nexport function Fragment(props) {\n\treturn props.children;\n}\n\n/**\n * Check if a the argument is a valid Preact VNode.\n * @param {*} vnode\n * @returns {vnode is import('./internal').VNode}\n */\nexport const isValidElement = vnode =>\n\tvnode != null && vnode.constructor === undefined;\n","import { assign } from './util';\nimport { diff, commitRoot } from './diff/index';\nimport options from './options';\nimport { Fragment } from './create-element';\n\n/**\n * Base Component class. Provides `setState()` and `forceUpdate()`, which\n * trigger rendering\n * @param {object} props The initial component props\n * @param {object} context The initial context from parent components'\n * getChildContext\n */\nexport function Component(props, context) {\n\tthis.props = props;\n\tthis.context = context;\n}\n\n/**\n * Update component state and schedule a re-render.\n * @this {import('./internal').Component}\n * @param {object | ((s: object, p: object) => object)} update A hash of state\n * properties to update with new values or a function that given the current\n * state and props returns a new partial state\n * @param {() => void} [callback] A function to be called once component state is\n * updated\n */\nComponent.prototype.setState = function(update, callback) {\n\t// only clone state when copying to nextState the first time.\n\tlet s;\n\tif (this._nextState != null && this._nextState !== this.state) {\n\t\ts = this._nextState;\n\t} else {\n\t\ts = this._nextState = assign({}, this.state);\n\t}\n\n\tif (typeof update == 'function') {\n\t\t// Some libraries like `immer` mark the current state as readonly,\n\t\t// preventing us from mutating it, so we need to clone it. See #2716\n\t\tupdate = update(assign({}, s), this.props);\n\t}\n\n\tif (update) {\n\t\tassign(s, update);\n\t}\n\n\t// Skip update if updater function returned null\n\tif (update == null) return;\n\n\tif (this._vnode) {\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Immediately perform a synchronous re-render of the component\n * @this {import('./internal').Component}\n * @param {() => void} [callback] A function to be called after component is\n * re-rendered\n */\nComponent.prototype.forceUpdate = function(callback) {\n\tif (this._vnode) {\n\t\t// Set render mode so that we can differentiate where the render request\n\t\t// is coming from. We need this because forceUpdate should never call\n\t\t// shouldComponentUpdate\n\t\tthis._force = true;\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n * Virtual DOM is generally constructed via [JSX](http://jasonformat.com/wtf-is-jsx).\n * @param {object} props Props (eg: JSX attributes) received from parent\n * element/component\n * @param {object} state The component's current state\n * @param {object} context Context object, as returned by the nearest\n * ancestor's `getChildContext()`\n * @returns {import('./index').ComponentChildren | void}\n */\nComponent.prototype.render = Fragment;\n\n/**\n * @param {import('./internal').VNode} vnode\n * @param {number | null} [childIndex]\n */\nexport function getDomSibling(vnode, childIndex) {\n\tif (childIndex == null) {\n\t\t// Use childIndex==null as a signal to resume the search from the vnode's sibling\n\t\treturn vnode._parent\n\t\t\t? getDomSibling(vnode._parent, vnode._parent._children.indexOf(vnode) + 1)\n\t\t\t: null;\n\t}\n\n\tlet sibling;\n\tfor (; childIndex < vnode._children.length; childIndex++) {\n\t\tsibling = vnode._children[childIndex];\n\n\t\tif (sibling != null && sibling._dom != null) {\n\t\t\t// Since updateParentDomPointers keeps _dom pointer correct,\n\t\t\t// we can rely on _dom to tell us if this subtree contains a\n\t\t\t// rendered DOM node, and what the first rendered DOM node is\n\t\t\treturn sibling._dom;\n\t\t}\n\t}\n\n\t// If we get here, we have not found a DOM node in this vnode's children.\n\t// We must resume from this vnode's sibling (in it's parent _children array)\n\t// Only climb up and search the parent if we aren't searching through a DOM\n\t// VNode (meaning we reached the DOM parent of the original vnode that began\n\t// the search)\n\treturn typeof vnode.type == 'function' ? getDomSibling(vnode) : null;\n}\n\n/**\n * Trigger in-place re-rendering of a component.\n * @param {import('./internal').Component} component The component to rerender\n */\nfunction renderComponent(component) {\n\tlet vnode = component._vnode,\n\t\toldDom = vnode._dom,\n\t\tparentDom = component._parentDom;\n\n\tif (parentDom) {\n\t\tlet commitQueue = [];\n\t\tconst oldVNode = assign({}, vnode);\n\t\toldVNode._original = vnode._original + 1;\n\n\t\tdiff(\n\t\t\tparentDom,\n\t\t\tvnode,\n\t\t\toldVNode,\n\t\t\tcomponent._globalContext,\n\t\t\tparentDom.ownerSVGElement !== undefined,\n\t\t\tvnode._hydrating != null ? [oldDom] : null,\n\t\t\tcommitQueue,\n\t\t\toldDom == null ? getDomSibling(vnode) : oldDom,\n\t\t\tvnode._hydrating\n\t\t);\n\t\tcommitRoot(commitQueue, vnode);\n\n\t\tif (vnode._dom != oldDom) {\n\t\t\tupdateParentDomPointers(vnode);\n\t\t}\n\t}\n}\n\n/**\n * @param {import('./internal').VNode} vnode\n */\nfunction updateParentDomPointers(vnode) {\n\tif ((vnode = vnode._parent) != null && vnode._component != null) {\n\t\tvnode._dom = vnode._component.base = null;\n\t\tfor (let i = 0; i < vnode._children.length; i++) {\n\t\t\tlet child = vnode._children[i];\n\t\t\tif (child != null && child._dom != null) {\n\t\t\t\tvnode._dom = vnode._component.base = child._dom;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn updateParentDomPointers(vnode);\n\t}\n}\n\n/**\n * The render queue\n * @type {Array<import('./internal').Component>}\n */\nlet rerenderQueue = [];\n\n/**\n * Asynchronously schedule a callback\n * @type {(cb: () => void) => void}\n */\n/* istanbul ignore next */\n// Note the following line isn't tree-shaken by rollup cuz of rollup/rollup#2566\nconst defer =\n\ttypeof Promise == 'function'\n\t\t? Promise.prototype.then.bind(Promise.resolve())\n\t\t: setTimeout;\n\n/*\n * The value of `Component.debounce` must asynchronously invoke the passed in callback. It is\n * important that contributors to Preact can consistently reason about what calls to `setState`, etc.\n * do, and when their effects will be applied. See the links below for some further reading on designing\n * asynchronous APIs.\n * * [Designing APIs for Asynchrony](https://blog.izs.me/2013/08/designing-apis-for-asynchrony)\n * * [Callbacks synchronous and asynchronous](https://blog.ometer.com/2011/07/24/callbacks-synchronous-and-asynchronous/)\n */\n\nlet prevDebounce;\n\n/**\n * Enqueue a rerender of a component\n * @param {import('./internal').Component} c The component to rerender\n */\nexport function enqueueRender(c) {\n\tif (\n\t\t(!c._dirty &&\n\t\t\t(c._dirty = true) &&\n\t\t\trerenderQueue.push(c) &&\n\t\t\t!process._rerenderCount++) ||\n\t\tprevDebounce !== options.debounceRendering\n\t) {\n\t\tprevDebounce = options.debounceRendering;\n\t\t(prevDebounce || defer)(process);\n\t}\n}\n\n/** Flush the render queue by rerendering all queued components */\nfunction process() {\n\tlet queue;\n\twhile ((process._rerenderCount = rerenderQueue.length)) {\n\t\tqueue = rerenderQueue.sort((a, b) => a._vnode._depth - b._vnode._depth);\n\t\trerenderQueue = [];\n\t\t// Don't update `renderCount` yet. Keep its value non-zero to prevent unnecessary\n\t\t// process() calls from getting scheduled while `queue` is still being consumed.\n\t\tqueue.some(c => {\n\t\t\tif (c._dirty) renderComponent(c);\n\t\t});\n\t}\n}\nprocess._rerenderCount = 0;\n","import { EMPTY_OBJ, EMPTY_ARR } from './constants';\nimport { commitRoot, diff } from './diff/index';\nimport { createElement, Fragment } from './create-element';\nimport options from './options';\n\nconst IS_HYDRATE = EMPTY_OBJ;\n\n/**\n * Render a Preact virtual node into a DOM element\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to\n * render into\n * @param {import('./internal').PreactElement | object} [replaceNode] Optional: Attempt to re-use an\n * existing DOM tree rooted at `replaceNode`\n */\nexport function render(vnode, parentDom, replaceNode) {\n\tif (options._root) options._root(vnode, parentDom);\n\n\t// We abuse the `replaceNode` parameter in `hydrate()` to signal if we\n\t// are in hydration mode or not by passing `IS_HYDRATE` instead of a\n\t// DOM element.\n\tlet isHydrating = replaceNode === IS_HYDRATE;\n\n\t// To be able to support calling `render()` multiple times on the same\n\t// DOM node, we need to obtain a reference to the previous tree. We do\n\t// this by assigning a new `_children` property to DOM nodes which points\n\t// to the last rendered tree. By default this property is not present, which\n\t// means that we are mounting a new tree for the first time.\n\tlet oldVNode = isHydrating\n\t\t? null\n\t\t: (replaceNode && replaceNode._children) || parentDom._children;\n\tvnode = createElement(Fragment, null, [vnode]);\n\n\t// List of effects that need to be called after diffing.\n\tlet commitQueue = [];\n\tdiff(\n\t\tparentDom,\n\t\t// Determine the new vnode tree and store it on the DOM element on\n\t\t// our custom `_children` property.\n\t\t((isHydrating ? parentDom : replaceNode || parentDom)._children = vnode),\n\t\toldVNode || EMPTY_OBJ,\n\t\tEMPTY_OBJ,\n\t\tparentDom.ownerSVGElement !== undefined,\n\t\treplaceNode && !isHydrating\n\t\t\t? [replaceNode]\n\t\t\t: oldVNode\n\t\t\t? null\n\t\t\t: parentDom.childNodes.length\n\t\t\t? EMPTY_ARR.slice.call(parentDom.childNodes)\n\t\t\t: null,\n\t\tcommitQueue,\n\t\treplaceNode || EMPTY_OBJ,\n\t\tisHydrating\n\t);\n\n\t// Flush all queued effects\n\tcommitRoot(commitQueue, vnode);\n}\n\n/**\n * Update an existing DOM element with data from a Preact virtual node\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to\n * update\n */\nexport function hydrate(vnode, parentDom) {\n\trender(vnode, parentDom, IS_HYDRATE);\n}\n","import { enqueueRender } from './component';\n\nexport let i = 0;\n\nexport function createContext(defaultValue, contextId) {\n\tcontextId = '__cC' + i++;\n\n\tconst context = {\n\t\t_id: contextId,\n\t\t_defaultValue: defaultValue,\n\t\t/** @type {import('./internal').FunctionComponent} */\n\t\tConsumer(props, contextValue) {\n\t\t\t// return props.children(\n\t\t\t// \tcontext[contextId] ? context[contextId].props.value : defaultValue\n\t\t\t// );\n\t\t\treturn props.children(contextValue);\n\t\t},\n\t\t/** @type {import('./internal').FunctionComponent} */\n\t\tProvider(props) {\n\t\t\tif (!this.getChildContext) {\n\t\t\t\tlet subs = [];\n\t\t\t\tlet ctx = {};\n\t\t\t\tctx[contextId] = this;\n\n\t\t\t\tthis.getChildContext = () => ctx;\n\n\t\t\t\tthis.shouldComponentUpdate = function(_props) {\n\t\t\t\t\tif (this.props.value !== _props.value) {\n\t\t\t\t\t\t// I think the forced value propagation here was only needed when `options.debounceRendering` was being bypassed:\n\t\t\t\t\t\t// https://github.com/preactjs/preact/commit/4d339fb803bea09e9f198abf38ca1bf8ea4b7771#diff-54682ce380935a717e41b8bfc54737f6R358\n\t\t\t\t\t\t// In those cases though, even with the value corrected, we're double-rendering all nodes.\n\t\t\t\t\t\t// It might be better to just tell folks not to use force-sync mode.\n\t\t\t\t\t\t// Currently, using `useContext()` in a class component will overwrite its `this.context` value.\n\t\t\t\t\t\t// subs.some(c => {\n\t\t\t\t\t\t// \tc.context = _props.value;\n\t\t\t\t\t\t// \tenqueueRender(c);\n\t\t\t\t\t\t// });\n\n\t\t\t\t\t\t// subs.some(c => {\n\t\t\t\t\t\t// \tc.context[contextId] = _props.value;\n\t\t\t\t\t\t// \tenqueueRender(c);\n\t\t\t\t\t\t// });\n\t\t\t\t\t\tsubs.some(enqueueRender);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tthis.sub = c => {\n\t\t\t\t\tsubs.push(c);\n\t\t\t\t\tlet old = c.componentWillUnmount;\n\t\t\t\t\tc.componentWillUnmount = () => {\n\t\t\t\t\t\tsubs.splice(subs.indexOf(c), 1);\n\t\t\t\t\t\tif (old) old.call(c);\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn props.children;\n\t\t}\n\t};\n\n\t// Devtools needs access to the context object when it\n\t// encounters a Provider. This is necessary to support\n\t// setting `displayName` on the context object instead\n\t// of on the component itself. See:\n\t// https://reactjs.org/docs/context.html#contextdisplayname\n\n\treturn (context.Provider._contextRef = context.Consumer.contextType = context);\n}\n","/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\t// @ts-ignore We change the type of `obj` to be `O & P`\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Remove a child node from its parent if attached. This is a workaround for\n * IE11 which doesn't support `Element.prototype.remove()`. Using this function\n * is smaller than including a dedicated polyfill.\n * @param {Node} node The node to remove\n */\nexport function removeNode(node) {\n\tlet parentNode = node.parentNode;\n\tif (parentNode) parentNode.removeChild(node);\n}\n","import { diff, unmount, applyRef } from './index';\nimport { createVNode, Fragment } from '../create-element';\nimport { EMPTY_OBJ, EMPTY_ARR } from '../constants';\nimport { removeNode } from '../util';\nimport { getDomSibling } from '../component';\n\n/**\n * Diff the children of a virtual node\n * @param {import('../internal').PreactElement} parentDom The DOM element whose\n * children are being diffed\n * @param {import('../internal').ComponentChildren[]} renderResult\n * @param {import('../internal').VNode} newParentVNode The new virtual\n * node whose children should be diff'ed against oldParentVNode\n * @param {import('../internal').VNode} oldParentVNode The old virtual\n * node whose children should be diff'ed against newParentVNode\n * @param {object} globalContext The current context object - modified by getChildContext\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node\n * @param {Array<import('../internal').PreactElement>} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {import('../internal').PreactElement} oldDom The current attached DOM\n * element any new dom elements should be placed around. Likely `null` on first\n * render (except when hydrating). Can be a sibling DOM element when diffing\n * Fragments that have siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n */\nexport function diffChildren(\n\tparentDom,\n\trenderResult,\n\tnewParentVNode,\n\toldParentVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating\n) {\n\tlet i, j, oldVNode, childVNode, newDom, firstChildDom, refs;\n\n\t// This is a compression of oldParentVNode!=null && oldParentVNode != EMPTY_OBJ && oldParentVNode._children || EMPTY_ARR\n\t// as EMPTY_OBJ._children should be `undefined`.\n\tlet oldChildren = (oldParentVNode && oldParentVNode._children) || EMPTY_ARR;\n\n\tlet oldChildrenLength = oldChildren.length;\n\n\t// Only in very specific places should this logic be invoked (top level `render` and `diffElementNodes`).\n\t// I'm using `EMPTY_OBJ` to signal when `diffChildren` is invoked in these situations. I can't use `null`\n\t// for this purpose, because `null` is a valid value for `oldDom` which can mean to skip to this logic\n\t// (e.g. if mounting a new tree in which the old DOM should be ignored (usually for Fragments).\n\tif (oldDom == EMPTY_OBJ) {\n\t\tif (excessDomChildren != null) {\n\t\t\toldDom = excessDomChildren[0];\n\t\t} else if (oldChildrenLength) {\n\t\t\toldDom = getDomSibling(oldParentVNode, 0);\n\t\t} else {\n\t\t\toldDom = null;\n\t\t}\n\t}\n\n\tnewParentVNode._children = [];\n\tfor (i = 0; i < renderResult.length; i++) {\n\t\tchildVNode = renderResult[i];\n\n\t\tif (childVNode == null || typeof childVNode == 'boolean') {\n\t\t\tchildVNode = newParentVNode._children[i] = null;\n\t\t}\n\t\t// If this newVNode is being reused (e.g. <div>{reuse}{reuse}</div>) in the same diff,\n\t\t// or we are rendering a component (e.g. setState) copy the oldVNodes so it can have\n\t\t// it's own DOM & etc. pointers\n\t\telse if (typeof childVNode == 'string' || typeof childVNode == 'number') {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tnull,\n\t\t\t\tchildVNode,\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\tchildVNode\n\t\t\t);\n\t\t} else if (Array.isArray(childVNode)) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tFragment,\n\t\t\t\t{ children: childVNode },\n\t\t\t\tnull,\n\t\t\t\tnull,\n\t\t\t\tnull\n\t\t\t);\n\t\t} else if (childVNode._depth > 0) {\n\t\t\t// VNode is already in use, clone it. This can happen in the following\n\t\t\t// scenario:\n\t\t\t//   const reuse = <div />\n\t\t\t//   <div>{reuse}<span />{reuse}</div>\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tchildVNode.type,\n\t\t\t\tchildVNode.props,\n\t\t\t\tchildVNode.key,\n\t\t\t\tnull,\n\t\t\t\tchildVNode._original\n\t\t\t);\n\t\t} else {\n\t\t\tchildVNode = newParentVNode._children[i] = childVNode;\n\t\t}\n\n\t\t// Terser removes the `continue` here and wraps the loop body\n\t\t// in a `if (childVNode) { ... } condition\n\t\tif (childVNode == null) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tchildVNode._parent = newParentVNode;\n\t\tchildVNode._depth = newParentVNode._depth + 1;\n\n\t\t// Check if we find a corresponding element in oldChildren.\n\t\t// If found, delete the array item by setting to `undefined`.\n\t\t// We use `undefined`, as `null` is reserved for empty placeholders\n\t\t// (holes).\n\t\toldVNode = oldChildren[i];\n\n\t\tif (\n\t\t\toldVNode === null ||\n\t\t\t(oldVNode &&\n\t\t\t\tchildVNode.key == oldVNode.key &&\n\t\t\t\tchildVNode.type === oldVNode.type)\n\t\t) {\n\t\t\toldChildren[i] = undefined;\n\t\t} else {\n\t\t\t// Either oldVNode === undefined or oldChildrenLength > 0,\n\t\t\t// so after this loop oldVNode == null or oldVNode is a valid value.\n\t\t\tfor (j = 0; j < oldChildrenLength; j++) {\n\t\t\t\toldVNode = oldChildren[j];\n\t\t\t\t// If childVNode is unkeyed, we only match similarly unkeyed nodes, otherwise we match by key.\n\t\t\t\t// We always match by type (in either case).\n\t\t\t\tif (\n\t\t\t\t\toldVNode &&\n\t\t\t\t\tchildVNode.key == oldVNode.key &&\n\t\t\t\t\tchildVNode.type === oldVNode.type\n\t\t\t\t) {\n\t\t\t\t\toldChildren[j] = undefined;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\toldVNode = null;\n\t\t\t}\n\t\t}\n\n\t\toldVNode = oldVNode || EMPTY_OBJ;\n\n\t\t// Morph the old element into the new one, but don't append it to the dom yet\n\t\tdiff(\n\t\t\tparentDom,\n\t\t\tchildVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tisSvg,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\toldDom,\n\t\t\tisHydrating\n\t\t);\n\n\t\tnewDom = childVNode._dom;\n\n\t\tif ((j = childVNode.ref) && oldVNode.ref != j) {\n\t\t\tif (!refs) refs = [];\n\t\t\tif (oldVNode.ref) refs.push(oldVNode.ref, null, childVNode);\n\t\t\trefs.push(j, childVNode._component || newDom, childVNode);\n\t\t}\n\n\t\tif (newDom != null) {\n\t\t\tif (firstChildDom == null) {\n\t\t\t\tfirstChildDom = newDom;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\ttypeof childVNode.type == 'function' &&\n\t\t\t\tchildVNode._children === oldVNode._children\n\t\t\t) {\n\t\t\t\tchildVNode._nextDom = oldDom = reorderChildren(\n\t\t\t\t\tchildVNode,\n\t\t\t\t\toldDom,\n\t\t\t\t\tparentDom\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\toldDom = placeChild(\n\t\t\t\t\tparentDom,\n\t\t\t\t\tchildVNode,\n\t\t\t\t\toldVNode,\n\t\t\t\t\toldChildren,\n\t\t\t\t\texcessDomChildren,\n\t\t\t\t\tnewDom,\n\t\t\t\t\toldDom\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Browsers will infer an option's `value` from `textContent` when\n\t\t\t// no value is present. This essentially bypasses our code to set it\n\t\t\t// later in `diff()`. It works fine in all browsers except for IE11\n\t\t\t// where it breaks setting `select.value`. There it will be always set\n\t\t\t// to an empty string. Re-applying an options value will fix that, so\n\t\t\t// there are probably some internal data structures that aren't\n\t\t\t// updated properly.\n\t\t\t//\n\t\t\t// To fix it we make sure to reset the inferred value, so that our own\n\t\t\t// value check in `diff()` won't be skipped.\n\t\t\tif (!isHydrating && newParentVNode.type === 'option') {\n\t\t\t\t// @ts-ignore We have validated that the type of parentDOM is 'option'\n\t\t\t\t// in the above check\n\t\t\t\tparentDom.value = '';\n\t\t\t} else if (typeof newParentVNode.type == 'function') {\n\t\t\t\t// Because the newParentVNode is Fragment-like, we need to set it's\n\t\t\t\t// _nextDom property to the nextSibling of its last child DOM node.\n\t\t\t\t//\n\t\t\t\t// `oldDom` contains the correct value here because if the last child\n\t\t\t\t// is a Fragment-like, then oldDom has already been set to that child's _nextDom.\n\t\t\t\t// If the last child is a DOM VNode, then oldDom will be set to that DOM\n\t\t\t\t// node's nextSibling.\n\t\t\t\tnewParentVNode._nextDom = oldDom;\n\t\t\t}\n\t\t} else if (\n\t\t\toldDom &&\n\t\t\toldVNode._dom == oldDom &&\n\t\t\toldDom.parentNode != parentDom\n\t\t) {\n\t\t\t// The above condition is to handle null placeholders. See test in placeholder.test.js:\n\t\t\t// `efficiently replace null placeholders in parent rerenders`\n\t\t\toldDom = getDomSibling(oldVNode);\n\t\t}\n\t}\n\n\tnewParentVNode._dom = firstChildDom;\n\n\t// Remove children that are not part of any vnode.\n\tif (excessDomChildren != null && typeof newParentVNode.type != 'function') {\n\t\tfor (i = excessDomChildren.length; i--; ) {\n\t\t\tif (excessDomChildren[i] != null) removeNode(excessDomChildren[i]);\n\t\t}\n\t}\n\n\t// Remove remaining oldChildren if there are any.\n\tfor (i = oldChildrenLength; i--; ) {\n\t\tif (oldChildren[i] != null) {\n\t\t\tif (\n\t\t\t\ttypeof newParentVNode.type == 'function' &&\n\t\t\t\toldChildren[i]._dom != null &&\n\t\t\t\toldChildren[i]._dom == newParentVNode._nextDom\n\t\t\t) {\n\t\t\t\t// If the newParentVNode.__nextDom points to a dom node that is about to\n\t\t\t\t// be unmounted, then get the next sibling of that vnode and set\n\t\t\t\t// _nextDom to it\n\t\t\t\tnewParentVNode._nextDom = getDomSibling(oldParentVNode, i + 1);\n\t\t\t}\n\n\t\t\tunmount(oldChildren[i], oldChildren[i]);\n\t\t}\n\t}\n\n\t// Set refs only after unmount\n\tif (refs) {\n\t\tfor (i = 0; i < refs.length; i++) {\n\t\t\tapplyRef(refs[i], refs[++i], refs[++i]);\n\t\t}\n\t}\n}\n\nfunction reorderChildren(childVNode, oldDom, parentDom) {\n\tfor (let tmp = 0; tmp < childVNode._children.length; tmp++) {\n\t\tlet vnode = childVNode._children[tmp];\n\t\tif (vnode) {\n\t\t\tvnode._parent = childVNode;\n\n\t\t\tif (typeof vnode.type == 'function') {\n\t\t\t\treorderChildren(vnode, oldDom, parentDom);\n\t\t\t} else {\n\t\t\t\toldDom = placeChild(\n\t\t\t\t\tparentDom,\n\t\t\t\t\tvnode,\n\t\t\t\t\tvnode,\n\t\t\t\t\tchildVNode._children,\n\t\t\t\t\tnull,\n\t\t\t\t\tvnode._dom,\n\t\t\t\t\toldDom\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn oldDom;\n}\n\n/**\n * Flatten and loop through the children of a virtual node\n * @param {import('../index').ComponentChildren} children The unflattened\n * children of a virtual node\n * @returns {import('../internal').VNode[]}\n */\nexport function toChildArray(children, out) {\n\tout = out || [];\n\tif (children == null || typeof children == 'boolean') {\n\t} else if (Array.isArray(children)) {\n\t\tchildren.some(child => {\n\t\t\ttoChildArray(child, out);\n\t\t});\n\t} else {\n\t\tout.push(children);\n\t}\n\treturn out;\n}\n\nfunction placeChild(\n\tparentDom,\n\tchildVNode,\n\toldVNode,\n\toldChildren,\n\texcessDomChildren,\n\tnewDom,\n\toldDom\n) {\n\tlet nextDom;\n\tif (childVNode._nextDom !== undefined) {\n\t\t// Only Fragments or components that return Fragment like VNodes will\n\t\t// have a non-undefined _nextDom. Continue the diff from the sibling\n\t\t// of last DOM child of this child VNode\n\t\tnextDom = childVNode._nextDom;\n\n\t\t// Eagerly cleanup _nextDom. We don't need to persist the value because\n\t\t// it is only used by `diffChildren` to determine where to resume the diff after\n\t\t// diffing Components and Fragments. Once we store it the nextDOM local var, we\n\t\t// can clean up the property\n\t\tchildVNode._nextDom = undefined;\n\t} else if (\n\t\texcessDomChildren == oldVNode ||\n\t\tnewDom != oldDom ||\n\t\tnewDom.parentNode == null\n\t) {\n\t\t// NOTE: excessDomChildren==oldVNode above:\n\t\t// This is a compression of excessDomChildren==null && oldVNode==null!\n\t\t// The values only have the same type when `null`.\n\n\t\touter: if (oldDom == null || oldDom.parentNode !== parentDom) {\n\t\t\tparentDom.appendChild(newDom);\n\t\t\tnextDom = null;\n\t\t} else {\n\t\t\t// `j<oldChildrenLength; j+=2` is an alternative to `j++<oldChildrenLength/2`\n\t\t\tfor (\n\t\t\t\tlet sibDom = oldDom, j = 0;\n\t\t\t\t(sibDom = sibDom.nextSibling) && j < oldChildren.length;\n\t\t\t\tj += 2\n\t\t\t) {\n\t\t\t\tif (sibDom == newDom) {\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t}\n\t\t\tparentDom.insertBefore(newDom, oldDom);\n\t\t\tnextDom = oldDom;\n\t\t}\n\t}\n\n\t// If we have pre-calculated the nextDOM node, use it. Else calculate it now\n\t// Strictly check for `undefined` here cuz `null` is a valid value of `nextDom`.\n\t// See more detail in create-element.js:createVNode\n\tif (nextDom !== undefined) {\n\t\toldDom = nextDom;\n\t} else {\n\t\toldDom = newDom.nextSibling;\n\t}\n\n\treturn oldDom;\n}\n","import { IS_NON_DIMENSIONAL } from '../constants';\nimport options from '../options';\n\n/**\n * Diff the old and new properties of a VNode and apply changes to the DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to apply\n * changes to\n * @param {object} newProps The new props\n * @param {object} oldProps The old props\n * @param {boolean} isSvg Whether or not this node is an SVG node\n * @param {boolean} hydrate Whether or not we are in hydration mode\n */\nexport function diffProps(dom, newProps, oldProps, isSvg, hydrate) {\n\tlet i;\n\n\tfor (i in oldProps) {\n\t\tif (i !== 'children' && i !== 'key' && !(i in newProps)) {\n\t\t\tsetProperty(dom, i, null, oldProps[i], isSvg);\n\t\t}\n\t}\n\n\tfor (i in newProps) {\n\t\tif (\n\t\t\t(!hydrate || typeof newProps[i] == 'function') &&\n\t\t\ti !== 'children' &&\n\t\t\ti !== 'key' &&\n\t\t\ti !== 'value' &&\n\t\t\ti !== 'checked' &&\n\t\t\toldProps[i] !== newProps[i]\n\t\t) {\n\t\t\tsetProperty(dom, i, newProps[i], oldProps[i], isSvg);\n\t\t}\n\t}\n}\n\nfunction setStyle(style, key, value) {\n\tif (key[0] === '-') {\n\t\tstyle.setProperty(key, value);\n\t} else if (value == null) {\n\t\tstyle[key] = '';\n\t} else if (typeof value != 'number' || IS_NON_DIMENSIONAL.test(key)) {\n\t\tstyle[key] = value;\n\t} else {\n\t\tstyle[key] = value + 'px';\n\t}\n}\n\n/**\n * Set a property value on a DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to modify\n * @param {string} name The name of the property to set\n * @param {*} value The value to set the property to\n * @param {*} oldValue The old value the property had\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node or not\n */\nexport function setProperty(dom, name, value, oldValue, isSvg) {\n\tlet useCapture, nameLower, proxy;\n\n\tif (isSvg && name == 'className') name = 'class';\n\n\t// if (isSvg) {\n\t// \tif (name === 'className') name = 'class';\n\t// } else if (name === 'class') name += 'Name';\n\n\tif (name === 'style') {\n\t\tif (typeof value == 'string') {\n\t\t\tdom.style.cssText = value;\n\t\t} else {\n\t\t\tif (typeof oldValue == 'string') {\n\t\t\t\tdom.style.cssText = oldValue = '';\n\t\t\t}\n\n\t\t\tif (oldValue) {\n\t\t\t\tfor (name in oldValue) {\n\t\t\t\t\tif (!(value && name in value)) {\n\t\t\t\t\t\tsetStyle(dom.style, name, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (value) {\n\t\t\t\tfor (name in value) {\n\t\t\t\t\tif (!oldValue || value[name] !== oldValue[name]) {\n\t\t\t\t\t\tsetStyle(dom.style, name, value[name]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Benchmark for comparison: https://esbench.com/bench/574c954bdb965b9a00965ac6\n\telse if (name[0] === 'o' && name[1] === 'n') {\n\t\tuseCapture = name !== (name = name.replace(/Capture$/, ''));\n\t\tnameLower = name.toLowerCase();\n\t\tif (nameLower in dom) name = nameLower;\n\t\tname = name.slice(2);\n\n\t\tif (!dom._listeners) dom._listeners = {};\n\t\tdom._listeners[name + useCapture] = value;\n\n\t\tproxy = useCapture ? eventProxyCapture : eventProxy;\n\t\tif (value) {\n\t\t\tif (!oldValue) dom.addEventListener(name, proxy, useCapture);\n\t\t} else {\n\t\t\tdom.removeEventListener(name, proxy, useCapture);\n\t\t}\n\t} else if (\n\t\tname !== 'list' &&\n\t\tname !== 'tagName' &&\n\t\t// HTMLButtonElement.form and HTMLInputElement.form are read-only but can be set using\n\t\t// setAttribute\n\t\tname !== 'form' &&\n\t\tname !== 'type' &&\n\t\tname !== 'size' &&\n\t\tname !== 'download' &&\n\t\tname !== 'href' &&\n\t\t!isSvg &&\n\t\tname in dom\n\t) {\n\t\tdom[name] = value == null ? '' : value;\n\t} else if (typeof value != 'function' && name !== 'dangerouslySetInnerHTML') {\n\t\tif (name !== (name = name.replace(/xlink:?/, ''))) {\n\t\t\tif (value == null || value === false) {\n\t\t\t\tdom.removeAttributeNS(\n\t\t\t\t\t'http://www.w3.org/1999/xlink',\n\t\t\t\t\tname.toLowerCase()\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tdom.setAttributeNS(\n\t\t\t\t\t'http://www.w3.org/1999/xlink',\n\t\t\t\t\tname.toLowerCase(),\n\t\t\t\t\tvalue\n\t\t\t\t);\n\t\t\t}\n\t\t} else if (\n\t\t\tvalue == null ||\n\t\t\t(value === false &&\n\t\t\t\t// ARIA-attributes have a different notion of boolean values.\n\t\t\t\t// The value `false` is different from the attribute not\n\t\t\t\t// existing on the DOM, so we can't remove it. For non-boolean\n\t\t\t\t// ARIA-attributes we could treat false as a removal, but the\n\t\t\t\t// amount of exceptions would cost us too many bytes. On top of\n\t\t\t\t// that other VDOM frameworks also always stringify `false`.\n\t\t\t\t!/^ar/.test(name))\n\t\t) {\n\t\t\tdom.removeAttribute(name);\n\t\t} else {\n\t\t\tdom.setAttribute(name, value);\n\t\t}\n\t}\n}\n\n/**\n * Proxy an event to hooked event handlers\n * @param {Event} e The event object from the browser\n * @private\n */\nfunction eventProxy(e) {\n\tthis._listeners[e.type + false](options.event ? options.event(e) : e);\n}\n\nfunction eventProxyCapture(e) {\n\tthis._listeners[e.type + true](options.event ? options.event(e) : e);\n}\n","import { EMPTY_OBJ, EMPTY_ARR } from '../constants';\nimport { Component } from '../component';\nimport { Fragment } from '../create-element';\nimport { diffChildren } from './children';\nimport { diffProps, setProperty } from './props';\nimport { assign, removeNode } from '../util';\nimport options from '../options';\n\n/**\n * Diff two virtual nodes and apply proper changes to the DOM\n * @param {import('../internal').PreactElement} parentDom The parent of the DOM element\n * @param {import('../internal').VNode} newVNode The new virtual node\n * @param {import('../internal').VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object. Modified by getChildContext\n * @param {boolean} isSvg Whether or not this element is an SVG node\n * @param {Array<import('../internal').PreactElement>} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {import('../internal').PreactElement} oldDom The current attached DOM\n * element any new dom elements should be placed around. Likely `null` on first\n * render (except when hydrating). Can be a sibling DOM element when diffing\n * Fragments that have siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} [isHydrating] Whether or not we are in hydration\n */\nexport function diff(\n\tparentDom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating\n) {\n\tlet tmp,\n\t\tnewType = newVNode.type;\n\n\t// When passing through createElement it assigns the object\n\t// constructor as undefined. This to prevent JSON-injection.\n\tif (newVNode.constructor !== undefined) return null;\n\n\t// If the previous diff bailed out, resume creating/hydrating.\n\tif (oldVNode._hydrating != null) {\n\t\tisHydrating = oldVNode._hydrating;\n\t\toldDom = newVNode._dom = oldVNode._dom;\n\t\t// if we resume, we want the tree to be \"unlocked\"\n\t\tnewVNode._hydrating = null;\n\t\texcessDomChildren = [oldDom];\n\t}\n\n\tif ((tmp = options._diff)) tmp(newVNode);\n\n\ttry {\n\t\touter: if (typeof newType == 'function') {\n\t\t\tlet c, isNew, oldProps, oldState, snapshot, clearProcessingException;\n\t\t\tlet newProps = newVNode.props;\n\n\t\t\t// Necessary for createContext api. Setting this property will pass\n\t\t\t// the context value as `this.context` just for this component.\n\t\t\ttmp = newType.contextType;\n\t\t\tlet provider = tmp && globalContext[tmp._id];\n\t\t\tlet componentContext = tmp\n\t\t\t\t? provider\n\t\t\t\t\t? provider.props.value\n\t\t\t\t\t: tmp._defaultValue\n\t\t\t\t: globalContext;\n\n\t\t\t// Get component and set it to `c`\n\t\t\tif (oldVNode._component) {\n\t\t\t\tc = newVNode._component = oldVNode._component;\n\t\t\t\tclearProcessingException = c._processingException = c._pendingError;\n\t\t\t} else {\n\t\t\t\t// Instantiate the new component\n\t\t\t\tif ('prototype' in newType && newType.prototype.render) {\n\t\t\t\t\t// @ts-ignore The check above verifies that newType is suppose to be constructed\n\t\t\t\t\tnewVNode._component = c = new newType(newProps, componentContext); // eslint-disable-line new-cap\n\t\t\t\t} else {\n\t\t\t\t\t// @ts-ignore Trust me, Component implements the interface we want\n\t\t\t\t\tnewVNode._component = c = new Component(newProps, componentContext);\n\t\t\t\t\tc.constructor = newType;\n\t\t\t\t\tc.render = doRender;\n\t\t\t\t}\n\t\t\t\tif (provider) provider.sub(c);\n\n\t\t\t\tc.props = newProps;\n\t\t\t\tif (!c.state) c.state = {};\n\t\t\t\tc.context = componentContext;\n\t\t\t\tc._globalContext = globalContext;\n\t\t\t\tisNew = c._dirty = true;\n\t\t\t\tc._renderCallbacks = [];\n\t\t\t}\n\n\t\t\t// Invoke getDerivedStateFromProps\n\t\t\tif (c._nextState == null) {\n\t\t\t\tc._nextState = c.state;\n\t\t\t}\n\t\t\tif (newType.getDerivedStateFromProps != null) {\n\t\t\t\tif (c._nextState == c.state) {\n\t\t\t\t\tc._nextState = assign({}, c._nextState);\n\t\t\t\t}\n\n\t\t\t\tassign(\n\t\t\t\t\tc._nextState,\n\t\t\t\t\tnewType.getDerivedStateFromProps(newProps, c._nextState)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toldProps = c.props;\n\t\t\toldState = c.state;\n\n\t\t\t// Invoke pre-render lifecycle methods\n\t\t\tif (isNew) {\n\t\t\t\tif (\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tc.componentWillMount != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillMount();\n\t\t\t\t}\n\n\t\t\t\tif (c.componentDidMount != null) {\n\t\t\t\t\tc._renderCallbacks.push(c.componentDidMount);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tnewProps !== oldProps &&\n\t\t\t\t\tc.componentWillReceiveProps != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillReceiveProps(newProps, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t(!c._force &&\n\t\t\t\t\t\tc.shouldComponentUpdate != null &&\n\t\t\t\t\t\tc.shouldComponentUpdate(\n\t\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\t\tc._nextState,\n\t\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t\t) === false) ||\n\t\t\t\t\tnewVNode._original === oldVNode._original\n\t\t\t\t) {\n\t\t\t\t\tc.props = newProps;\n\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t\t// More info about this here: https://gist.github.com/JoviDeCroock/bec5f2ce93544d2e6070ef8e0036e4e8\n\t\t\t\t\tif (newVNode._original !== oldVNode._original) c._dirty = false;\n\t\t\t\t\tc._vnode = newVNode;\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\t\t\tcommitQueue.push(c);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\n\t\t\t\tif (c.componentWillUpdate != null) {\n\t\t\t\t\tc.componentWillUpdate(newProps, c._nextState, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (c.componentDidUpdate != null) {\n\t\t\t\t\tc._renderCallbacks.push(() => {\n\t\t\t\t\t\tc.componentDidUpdate(oldProps, oldState, snapshot);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tc.context = componentContext;\n\t\t\tc.props = newProps;\n\t\t\tc.state = c._nextState;\n\n\t\t\tif ((tmp = options._render)) tmp(newVNode);\n\n\t\t\tc._dirty = false;\n\t\t\tc._vnode = newVNode;\n\t\t\tc._parentDom = parentDom;\n\n\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t// Handle setState called in render, see #2553\n\t\t\tc.state = c._nextState;\n\n\t\t\tif (c.getChildContext != null) {\n\t\t\t\tglobalContext = assign(assign({}, globalContext), c.getChildContext());\n\t\t\t}\n\n\t\t\tif (!isNew && c.getSnapshotBeforeUpdate != null) {\n\t\t\t\tsnapshot = c.getSnapshotBeforeUpdate(oldProps, oldState);\n\t\t\t}\n\n\t\t\tlet isTopLevelFragment =\n\t\t\t\ttmp != null && tmp.type === Fragment && tmp.key == null;\n\t\t\tlet renderResult = isTopLevelFragment ? tmp.props.children : tmp;\n\n\t\t\tdiffChildren(\n\t\t\t\tparentDom,\n\t\t\t\tArray.isArray(renderResult) ? renderResult : [renderResult],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tisSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\toldDom,\n\t\t\t\tisHydrating\n\t\t\t);\n\n\t\t\tc.base = newVNode._dom;\n\n\t\t\t// We successfully rendered this VNode, unset any stored hydration/bailout state:\n\t\t\tnewVNode._hydrating = null;\n\n\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\tcommitQueue.push(c);\n\t\t\t}\n\n\t\t\tif (clearProcessingException) {\n\t\t\t\tc._pendingError = c._processingException = null;\n\t\t\t}\n\n\t\t\tc._force = false;\n\t\t} else if (\n\t\t\texcessDomChildren == null &&\n\t\t\tnewVNode._original === oldVNode._original\n\t\t) {\n\t\t\tnewVNode._children = oldVNode._children;\n\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t} else {\n\t\t\tnewVNode._dom = diffElementNodes(\n\t\t\t\toldVNode._dom,\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tisSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\tisHydrating\n\t\t\t);\n\t\t}\n\n\t\tif ((tmp = options.diffed)) tmp(newVNode);\n\t} catch (e) {\n\t\tnewVNode._original = null;\n\t\t// if hydrating or creating initial tree, bailout preserves DOM:\n\t\tif (isHydrating || excessDomChildren != null) {\n\t\t\tnewVNode._dom = oldDom;\n\t\t\tnewVNode._hydrating = !!isHydrating;\n\t\t\texcessDomChildren[excessDomChildren.indexOf(oldDom)] = null;\n\t\t\t// ^ could possibly be simplified to:\n\t\t\t// excessDomChildren.length = 0;\n\t\t}\n\t\toptions._catchError(e, newVNode, oldVNode);\n\t}\n}\n\n/**\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {import('../internal').VNode} root\n */\nexport function commitRoot(commitQueue, root) {\n\tif (options._commit) options._commit(root, commitQueue);\n\n\tcommitQueue.some(c => {\n\t\ttry {\n\t\t\t// @ts-ignore Reuse the commitQueue variable here so the type changes\n\t\t\tcommitQueue = c._renderCallbacks;\n\t\t\tc._renderCallbacks = [];\n\t\t\tcommitQueue.some(cb => {\n\t\t\t\t// @ts-ignore See above ts-ignore on commitQueue\n\t\t\t\tcb.call(c);\n\t\t\t});\n\t\t} catch (e) {\n\t\t\toptions._catchError(e, c._vnode);\n\t\t}\n\t});\n}\n\n/**\n * Diff two virtual nodes representing DOM element\n * @param {import('../internal').PreactElement} dom The DOM element representing\n * the virtual nodes being diffed\n * @param {import('../internal').VNode} newVNode The new virtual node\n * @param {import('../internal').VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node\n * @param {*} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @returns {import('../internal').PreactElement}\n */\nfunction diffElementNodes(\n\tdom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\tisHydrating\n) {\n\tlet i;\n\tlet oldProps = oldVNode.props;\n\tlet newProps = newVNode.props;\n\n\t// Tracks entering and exiting SVG namespace when descending through the tree.\n\tisSvg = newVNode.type === 'svg' || isSvg;\n\n\tif (excessDomChildren != null) {\n\t\tfor (i = 0; i < excessDomChildren.length; i++) {\n\t\t\tconst child = excessDomChildren[i];\n\n\t\t\t// if newVNode matches an element in excessDomChildren or the `dom`\n\t\t\t// argument matches an element in excessDomChildren, remove it from\n\t\t\t// excessDomChildren so it isn't later removed in diffChildren\n\t\t\tif (\n\t\t\t\tchild != null &&\n\t\t\t\t((newVNode.type === null\n\t\t\t\t\t? child.nodeType === 3\n\t\t\t\t\t: child.localName === newVNode.type) ||\n\t\t\t\t\tdom == child)\n\t\t\t) {\n\t\t\t\tdom = child;\n\t\t\t\texcessDomChildren[i] = null;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (dom == null) {\n\t\tif (newVNode.type === null) {\n\t\t\t// @ts-ignore createTextNode returns Text, we expect PreactElement\n\t\t\treturn document.createTextNode(newProps);\n\t\t}\n\n\t\tif (isSvg) {\n\t\t\tdom = document.createElementNS(\n\t\t\t\t'http://www.w3.org/2000/svg',\n\t\t\t\t// @ts-ignore We know `newVNode.type` is a string\n\t\t\t\tnewVNode.type\n\t\t\t);\n\t\t} else {\n\t\t\tdom = document.createElement(\n\t\t\t\t// @ts-ignore We know `newVNode.type` is a string\n\t\t\t\tnewVNode.type,\n\t\t\t\tnewProps.is && { is: newProps.is }\n\t\t\t);\n\t\t}\n\n\t\t// we created a new parent, so none of the previously attached children can be reused:\n\t\texcessDomChildren = null;\n\t\t// we are creating a new node, so we can assume this is a new subtree (in case we are hydrating), this deopts the hydrate\n\t\tisHydrating = false;\n\t}\n\n\tif (newVNode.type === null) {\n\t\t// During hydration, we still have to split merged text from SSR'd HTML.\n\t\tif (oldProps !== newProps && (!isHydrating || dom.data !== newProps)) {\n\t\t\tdom.data = newProps;\n\t\t}\n\t} else {\n\t\tif (excessDomChildren != null) {\n\t\t\texcessDomChildren = EMPTY_ARR.slice.call(dom.childNodes);\n\t\t}\n\n\t\toldProps = oldVNode.props || EMPTY_OBJ;\n\n\t\tlet oldHtml = oldProps.dangerouslySetInnerHTML;\n\t\tlet newHtml = newProps.dangerouslySetInnerHTML;\n\n\t\t// During hydration, props are not diffed at all (including dangerouslySetInnerHTML)\n\t\t// @TODO we should warn in debug mode when props don't match here.\n\t\tif (!isHydrating) {\n\t\t\t// But, if we are in a situation where we are using existing DOM (e.g. replaceNode)\n\t\t\t// we should read the existing DOM attributes to diff them\n\t\t\tif (excessDomChildren != null) {\n\t\t\t\toldProps = {};\n\t\t\t\tfor (let i = 0; i < dom.attributes.length; i++) {\n\t\t\t\t\toldProps[dom.attributes[i].name] = dom.attributes[i].value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (newHtml || oldHtml) {\n\t\t\t\t// Avoid re-applying the same '__html' if it did not changed between re-render\n\t\t\t\tif (\n\t\t\t\t\t!newHtml ||\n\t\t\t\t\t((!oldHtml || newHtml.__html != oldHtml.__html) &&\n\t\t\t\t\t\tnewHtml.__html !== dom.innerHTML)\n\t\t\t\t) {\n\t\t\t\t\tdom.innerHTML = (newHtml && newHtml.__html) || '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tdiffProps(dom, newProps, oldProps, isSvg, isHydrating);\n\n\t\t// If the new vnode didn't have dangerouslySetInnerHTML, diff its children\n\t\tif (newHtml) {\n\t\t\tnewVNode._children = [];\n\t\t} else {\n\t\t\ti = newVNode.props.children;\n\t\t\tdiffChildren(\n\t\t\t\tdom,\n\t\t\t\tArray.isArray(i) ? i : [i],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tnewVNode.type === 'foreignObject' ? false : isSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\tEMPTY_OBJ,\n\t\t\t\tisHydrating\n\t\t\t);\n\t\t}\n\n\t\t// (as above, don't diff props during hydration)\n\t\tif (!isHydrating) {\n\t\t\tif (\n\t\t\t\t'value' in newProps &&\n\t\t\t\t(i = newProps.value) !== undefined &&\n\t\t\t\t// #2756 For the <progress>-element the initial value is 0,\n\t\t\t\t// despite the attribute not being present. When the attribute\n\t\t\t\t// is missing the progress bar is treated as indeterminate.\n\t\t\t\t// To fix that we'll always update it when it is 0 for progress elements\n\t\t\t\t(i !== dom.value || (newVNode.type === 'progress' && !i))\n\t\t\t) {\n\t\t\t\tsetProperty(dom, 'value', i, oldProps.value, false);\n\t\t\t}\n\t\t\tif (\n\t\t\t\t'checked' in newProps &&\n\t\t\t\t(i = newProps.checked) !== undefined &&\n\t\t\t\ti !== dom.checked\n\t\t\t) {\n\t\t\t\tsetProperty(dom, 'checked', i, oldProps.checked, false);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n/**\n * Invoke or update a ref, depending on whether it is a function or object ref.\n * @param {object|function} ref\n * @param {any} value\n * @param {import('../internal').VNode} vnode\n */\nexport function applyRef(ref, value, vnode) {\n\ttry {\n\t\tif (typeof ref == 'function') ref(value);\n\t\telse ref.current = value;\n\t} catch (e) {\n\t\toptions._catchError(e, vnode);\n\t}\n}\n\n/**\n * Unmount a virtual node from the tree and apply DOM changes\n * @param {import('../internal').VNode} vnode The virtual node to unmount\n * @param {import('../internal').VNode} parentVNode The parent of the VNode that\n * initiated the unmount\n * @param {boolean} [skipRemove] Flag that indicates that a parent node of the\n * current element is already detached from the DOM.\n */\nexport function unmount(vnode, parentVNode, skipRemove) {\n\tlet r;\n\tif (options.unmount) options.unmount(vnode);\n\n\tif ((r = vnode.ref)) {\n\t\tif (!r.current || r.current === vnode._dom) applyRef(r, null, parentVNode);\n\t}\n\n\tlet dom;\n\tif (!skipRemove && typeof vnode.type != 'function') {\n\t\tskipRemove = (dom = vnode._dom) != null;\n\t}\n\n\t// Must be set to `undefined` to properly clean up `_nextDom`\n\t// for which `null` is a valid value. See comment in `create-element.js`\n\tvnode._dom = vnode._nextDom = undefined;\n\n\tif ((r = vnode._component) != null) {\n\t\tif (r.componentWillUnmount) {\n\t\t\ttry {\n\t\t\t\tr.componentWillUnmount();\n\t\t\t} catch (e) {\n\t\t\t\toptions._catchError(e, parentVNode);\n\t\t\t}\n\t\t}\n\n\t\tr.base = r._parentDom = null;\n\t}\n\n\tif ((r = vnode._children)) {\n\t\tfor (let i = 0; i < r.length; i++) {\n\t\t\tif (r[i]) unmount(r[i], parentVNode, skipRemove);\n\t\t}\n\t}\n\n\tif (dom != null) removeNode(dom);\n}\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n","import { assign } from './util';\nimport { createVNode } from './create-element';\n\n/**\n * Clones the given VNode, optionally adding attributes/props and replacing its children.\n * @param {import('./internal').VNode} vnode The virtual DOM element to clone\n * @param {object} props Attributes/props to add when cloning\n * @param {Array<import('./internal').ComponentChildren>} rest Any additional arguments will be used as replacement children.\n * @returns {import('./internal').VNode}\n */\nexport function cloneElement(vnode, props, children) {\n\tlet normalizedProps = assign({}, vnode.props),\n\t\tkey,\n\t\tref,\n\t\ti;\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse normalizedProps[i] = props[i];\n\t}\n\n\tif (arguments.length > 3) {\n\t\tchildren = [children];\n\t\tfor (i = 3; i < arguments.length; i++) {\n\t\t\tchildren.push(arguments[i]);\n\t\t}\n\t}\n\tif (children != null) {\n\t\tnormalizedProps.children = children;\n\t}\n\n\treturn createVNode(\n\t\tvnode.type,\n\t\tnormalizedProps,\n\t\tkey || vnode.key,\n\t\tref || vnode.ref,\n\t\tnull\n\t);\n}\n","// import { enqueueRender } from '../component';\n\n/**\n * Find the closest error boundary to a thrown error and call it\n * @param {object} error The thrown value\n * @param {import('../internal').VNode} vnode The vnode that threw\n * the error that was caught (except for unmounting when this parameter\n * is the highest parent that was being unmounted)\n */\nexport function _catchError(error, vnode) {\n\t/** @type {import('../internal').Component} */\n\tlet component, ctor, handled;\n\n\tconst wasHydrating = vnode._hydrating;\n\n\tfor (; (vnode = vnode._parent); ) {\n\t\tif ((component = vnode._component) && !component._processingException) {\n\t\t\ttry {\n\t\t\t\tctor = component.constructor;\n\n\t\t\t\tif (ctor && ctor.getDerivedStateFromError != null) {\n\t\t\t\t\tcomponent.setState(ctor.getDerivedStateFromError(error));\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\tif (component.componentDidCatch != null) {\n\t\t\t\t\tcomponent.componentDidCatch(error);\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\t// This is an error boundary. Mark it as having bailed out, and whether it was mid-hydration.\n\t\t\t\tif (handled) {\n\t\t\t\t\tvnode._hydrating = wasHydrating;\n\t\t\t\t\treturn (component._pendingError = component);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\t}\n\n\tthrow error;\n}\n","exports.fetch = isFunction(global.fetch) && isFunction(global.ReadableStream)\n\nexports.writableStream = isFunction(global.WritableStream)\n\nexports.abortController = isFunction(global.AbortController)\n\nexports.blobConstructor = false\ntry {\n\tnew Blob([new ArrayBuffer(1)])\n\texports.blobConstructor = true\n} catch (e) {}\n\n// The xhr request to example.com may violate some restrictive CSP configurations,\n// so if we're running in a browser that supports `fetch`, avoid calling getXHR()\n// and assume support for certain features below.\nvar xhr\nfunction getXHR () {\n\t// Cache the xhr value\n\tif (xhr !== undefined) return xhr\n\n\tif (global.XMLHttpRequest) {\n\t\txhr = new global.XMLHttpRequest()\n\t\t// If XDomainRequest is available (ie only, where xhr might not work\n\t\t// cross domain), use the page location. Otherwise use example.com\n\t\t// Note: this doesn't actually make an http request.\n\t\ttry {\n\t\t\txhr.open('GET', global.XDomainRequest ? '/' : 'https://example.com')\n\t\t} catch(e) {\n\t\t\txhr = null\n\t\t}\n\t} else {\n\t\t// Service workers don't have XHR\n\t\txhr = null\n\t}\n\treturn xhr\n}\n\nfunction checkTypeSupport (type) {\n\tvar xhr = getXHR()\n\tif (!xhr) return false\n\ttry {\n\t\txhr.responseType = type\n\t\treturn xhr.responseType === type\n\t} catch (e) {}\n\treturn false\n}\n\n// For some strange reason, Safari 7.0 reports typeof global.ArrayBuffer === 'object'.\n// Safari 7.1 appears to have fixed this bug.\nvar haveArrayBuffer = typeof global.ArrayBuffer !== 'undefined'\nvar haveSlice = haveArrayBuffer && isFunction(global.ArrayBuffer.prototype.slice)\n\n// If fetch is supported, then arraybuffer will be supported too. Skip calling\n// checkTypeSupport(), since that calls getXHR().\nexports.arraybuffer = exports.fetch || (haveArrayBuffer && checkTypeSupport('arraybuffer'))\n\n// These next two tests unavoidably show warnings in Chrome. Since fetch will always\n// be used if it's available, just return false for these to avoid the warnings.\nexports.msstream = !exports.fetch && haveSlice && checkTypeSupport('ms-stream')\nexports.mozchunkedarraybuffer = !exports.fetch && haveArrayBuffer &&\n\tcheckTypeSupport('moz-chunked-arraybuffer')\n\n// If fetch is supported, then overrideMimeType will be supported too. Skip calling\n// getXHR().\nexports.overrideMimeType = exports.fetch || (getXHR() ? isFunction(getXHR().overrideMimeType) : false)\n\nexports.vbArray = isFunction(global.VBArray)\n\nfunction isFunction (value) {\n\treturn typeof value === 'function'\n}\n\nxhr = null // Help gc\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","'use strict';\n\nif (typeof process === 'undefined' ||\n    !process.version ||\n    process.version.indexOf('v0.') === 0 ||\n    process.version.indexOf('v1.') === 0 && process.version.indexOf('v1.8.') !== 0) {\n  module.exports = { nextTick: nextTick };\n} else {\n  module.exports = process\n}\n\nfunction nextTick(fn, arg1, arg2, arg3) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('\"callback\" argument must be a function');\n  }\n  var len = arguments.length;\n  var args, i;\n  switch (len) {\n  case 0:\n  case 1:\n    return process.nextTick(fn);\n  case 2:\n    return process.nextTick(function afterTickOne() {\n      fn.call(null, arg1);\n    });\n  case 3:\n    return process.nextTick(function afterTickTwo() {\n      fn.call(null, arg1, arg2);\n    });\n  case 4:\n    return process.nextTick(function afterTickThree() {\n      fn.call(null, arg1, arg2, arg3);\n    });\n  default:\n    args = new Array(len - 1);\n    i = 0;\n    while (i < args.length) {\n      args[i++] = arguments[i];\n    }\n    return process.nextTick(function afterTick() {\n      fn.apply(null, args);\n    });\n  }\n}\n\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function eventListener() {\n      if (errorListener !== undefined) {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n    var errorListener;\n\n    // Adding an error listener is not optional because\n    // if an error is thrown on an event emitter we cannot\n    // guarantee that the actual event we are waiting will\n    // be fired. The result could be a silent way to create\n    // memory or file descriptor leaks, which is something\n    // we should avoid.\n    if (name !== 'error') {\n      errorListener = function errorListener(err) {\n        emitter.removeListener(name, eventListener);\n        reject(err);\n      };\n\n      emitter.once('error', errorListener);\n    }\n\n    emitter.once(name, eventListener);\n  });\n}\n","module.exports = require('events').EventEmitter;\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\n\nfunction isArray(arg) {\n  if (Array.isArray) {\n    return Array.isArray(arg);\n  }\n  return objectToString(arg) === '[object Array]';\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = Buffer.isBuffer;\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n","'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Buffer = require('safe-buffer').Buffer;\nvar util = require('util');\n\nfunction copyBuffer(src, target, offset) {\n  src.copy(target, offset);\n}\n\nmodule.exports = function () {\n  function BufferList() {\n    _classCallCheck(this, BufferList);\n\n    this.head = null;\n    this.tail = null;\n    this.length = 0;\n  }\n\n  BufferList.prototype.push = function push(v) {\n    var entry = { data: v, next: null };\n    if (this.length > 0) this.tail.next = entry;else this.head = entry;\n    this.tail = entry;\n    ++this.length;\n  };\n\n  BufferList.prototype.unshift = function unshift(v) {\n    var entry = { data: v, next: this.head };\n    if (this.length === 0) this.tail = entry;\n    this.head = entry;\n    ++this.length;\n  };\n\n  BufferList.prototype.shift = function shift() {\n    if (this.length === 0) return;\n    var ret = this.head.data;\n    if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;\n    --this.length;\n    return ret;\n  };\n\n  BufferList.prototype.clear = function clear() {\n    this.head = this.tail = null;\n    this.length = 0;\n  };\n\n  BufferList.prototype.join = function join(s) {\n    if (this.length === 0) return '';\n    var p = this.head;\n    var ret = '' + p.data;\n    while (p = p.next) {\n      ret += s + p.data;\n    }return ret;\n  };\n\n  BufferList.prototype.concat = function concat(n) {\n    if (this.length === 0) return Buffer.alloc(0);\n    if (this.length === 1) return this.head.data;\n    var ret = Buffer.allocUnsafe(n >>> 0);\n    var p = this.head;\n    var i = 0;\n    while (p) {\n      copyBuffer(p.data, ret, i);\n      i += p.data.length;\n      p = p.next;\n    }\n    return ret;\n  };\n\n  return BufferList;\n}();\n\nif (util && util.inspect && util.inspect.custom) {\n  module.exports.prototype[util.inspect.custom] = function () {\n    var obj = util.inspect({ length: this.length });\n    return this.constructor.name + ' ' + obj;\n  };\n}","'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\n// undocumented cb() API, needed for core, not for public API\nfunction destroy(err, cb) {\n  var _this = this;\n\n  var readableDestroyed = this._readableState && this._readableState.destroyed;\n  var writableDestroyed = this._writableState && this._writableState.destroyed;\n\n  if (readableDestroyed || writableDestroyed) {\n    if (cb) {\n      cb(err);\n    } else if (err && (!this._writableState || !this._writableState.errorEmitted)) {\n      pna.nextTick(emitErrorNT, this, err);\n    }\n    return this;\n  }\n\n  // we set destroyed to true before firing error callbacks in order\n  // to make it re-entrance safe in case destroy() is called within callbacks\n\n  if (this._readableState) {\n    this._readableState.destroyed = true;\n  }\n\n  // if this is a duplex stream mark the writable part as destroyed as well\n  if (this._writableState) {\n    this._writableState.destroyed = true;\n  }\n\n  this._destroy(err || null, function (err) {\n    if (!cb && err) {\n      pna.nextTick(emitErrorNT, _this, err);\n      if (_this._writableState) {\n        _this._writableState.errorEmitted = true;\n      }\n    } else if (cb) {\n      cb(err);\n    }\n  });\n\n  return this;\n}\n\nfunction undestroy() {\n  if (this._readableState) {\n    this._readableState.destroyed = false;\n    this._readableState.reading = false;\n    this._readableState.ended = false;\n    this._readableState.endEmitted = false;\n  }\n\n  if (this._writableState) {\n    this._writableState.destroyed = false;\n    this._writableState.ended = false;\n    this._writableState.ending = false;\n    this._writableState.finished = false;\n    this._writableState.errorEmitted = false;\n  }\n}\n\nfunction emitErrorNT(self, err) {\n  self.emit('error', err);\n}\n\nmodule.exports = {\n  destroy: destroy,\n  undestroy: undestroy\n};","\n/**\n * Module exports.\n */\n\nmodule.exports = deprecate;\n\n/**\n * Mark that a method should not be used.\n * Returns a modified function which warns once by default.\n *\n * If `localStorage.noDeprecation = true` is set, then it is a no-op.\n *\n * If `localStorage.throwDeprecation = true` is set, then deprecated functions\n * will throw an Error when invoked.\n *\n * If `localStorage.traceDeprecation = true` is set, then deprecated functions\n * will invoke `console.trace()` instead of `console.error()`.\n *\n * @param {Function} fn - the function to deprecate\n * @param {String} msg - the string to print to the console when `fn` is invoked\n * @returns {Function} a new \"deprecated\" version of `fn`\n * @api public\n */\n\nfunction deprecate (fn, msg) {\n  if (config('noDeprecation')) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (config('throwDeprecation')) {\n        throw new Error(msg);\n      } else if (config('traceDeprecation')) {\n        console.trace(msg);\n      } else {\n        console.warn(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n}\n\n/**\n * Checks `localStorage` for boolean values for the given `name`.\n *\n * @param {String} name\n * @returns {Boolean}\n * @api private\n */\n\nfunction config (name) {\n  // accessing global.localStorage can trigger a DOMException in sandboxed iframes\n  try {\n    if (!global.localStorage) return false;\n  } catch (_) {\n    return false;\n  }\n  var val = global.localStorage[name];\n  if (null == val) return false;\n  return String(val).toLowerCase() === 'true';\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\nmodule.exports = Writable;\n\n/* <replacement> */\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n  this.next = null;\n}\n\n// It seems a linked list but it is not\n// there will be only 2 of these for each stream\nfunction CorkedRequest(state) {\n  var _this = this;\n\n  this.next = null;\n  this.entry = null;\n  this.finish = function () {\n    onCorkedFinish(_this, state);\n  };\n}\n/* </replacement> */\n\n/*<replacement>*/\nvar asyncWrite = !process.browser && ['v0.10', 'v0.9.'].indexOf(process.version.slice(0, 5)) > -1 ? setImmediate : pna.nextTick;\n/*</replacement>*/\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nWritable.WritableState = WritableState;\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\n/*<replacement>*/\nvar internalUtil = {\n  deprecate: require('util-deprecate')\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\nvar OurUint8Array = global.Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*</replacement>*/\n\nvar destroyImpl = require('./internal/streams/destroy');\n\nutil.inherits(Writable, Stream);\n\nfunction nop() {}\n\nfunction WritableState(options, stream) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  var isDuplex = stream instanceof Duplex;\n\n  // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n  this.objectMode = !!options.objectMode;\n\n  if (isDuplex) this.objectMode = this.objectMode || !!options.writableObjectMode;\n\n  // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n  var hwm = options.highWaterMark;\n  var writableHwm = options.writableHighWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n\n  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (writableHwm || writableHwm === 0)) this.highWaterMark = writableHwm;else this.highWaterMark = defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = Math.floor(this.highWaterMark);\n\n  // if _final has been called\n  this.finalCalled = false;\n\n  // drain event flag.\n  this.needDrain = false;\n  // at the start of calling end()\n  this.ending = false;\n  // when end() has been called, and returned\n  this.ended = false;\n  // when 'finish' is emitted\n  this.finished = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n  this.length = 0;\n\n  // a flag to see when we're in the middle of a write.\n  this.writing = false;\n\n  // when true all writes will be buffered until .uncork() call\n  this.corked = 0;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n  this.bufferProcessing = false;\n\n  // the callback that's passed to _write(chunk,cb)\n  this.onwrite = function (er) {\n    onwrite(stream, er);\n  };\n\n  // the callback that the user supplies to write(chunk,encoding,cb)\n  this.writecb = null;\n\n  // the amount that is being written when _write is called.\n  this.writelen = 0;\n\n  this.bufferedRequest = null;\n  this.lastBufferedRequest = null;\n\n  // number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted\n  this.pendingcb = 0;\n\n  // emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams\n  this.prefinished = false;\n\n  // True if the error was already emitted and should not be thrown again\n  this.errorEmitted = false;\n\n  // count buffered requests\n  this.bufferedRequestCount = 0;\n\n  // allocate the first CorkedRequest, there is always\n  // one allocated and free to use, and we maintain at most two\n  this.corkedRequestsFree = new CorkedRequest(this);\n}\n\nWritableState.prototype.getBuffer = function getBuffer() {\n  var current = this.bufferedRequest;\n  var out = [];\n  while (current) {\n    out.push(current);\n    current = current.next;\n  }\n  return out;\n};\n\n(function () {\n  try {\n    Object.defineProperty(WritableState.prototype, 'buffer', {\n      get: internalUtil.deprecate(function () {\n        return this.getBuffer();\n      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.', 'DEP0003')\n    });\n  } catch (_) {}\n})();\n\n// Test _writableState for inheritance to account for Duplex streams,\n// whose prototype chain only points to Readable.\nvar realHasInstance;\nif (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {\n  realHasInstance = Function.prototype[Symbol.hasInstance];\n  Object.defineProperty(Writable, Symbol.hasInstance, {\n    value: function (object) {\n      if (realHasInstance.call(this, object)) return true;\n      if (this !== Writable) return false;\n\n      return object && object._writableState instanceof WritableState;\n    }\n  });\n} else {\n  realHasInstance = function (object) {\n    return object instanceof this;\n  };\n}\n\nfunction Writable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  // Writable ctor is applied to Duplexes, too.\n  // `realHasInstance` is necessary because using plain `instanceof`\n  // would return false, as no `_writableState` property is attached.\n\n  // Trying to use the custom `instanceof` for Writable here will also break the\n  // Node.js LazyTransform implementation, which has a non-trivial getter for\n  // `_writableState` that would lead to infinite recursion.\n  if (!realHasInstance.call(Writable, this) && !(this instanceof Duplex)) {\n    return new Writable(options);\n  }\n\n  this._writableState = new WritableState(options, this);\n\n  // legacy.\n  this.writable = true;\n\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write;\n\n    if (typeof options.writev === 'function') this._writev = options.writev;\n\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n\n    if (typeof options.final === 'function') this._final = options.final;\n  }\n\n  Stream.call(this);\n}\n\n// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe = function () {\n  this.emit('error', new Error('Cannot pipe, not readable'));\n};\n\nfunction writeAfterEnd(stream, cb) {\n  var er = new Error('write after end');\n  // TODO: defer error events consistently everywhere, not just the cb\n  stream.emit('error', er);\n  pna.nextTick(cb, er);\n}\n\n// Checks that a user-supplied chunk is valid, especially for the particular\n// mode the stream is in. Currently this means that `null` is never accepted\n// and undefined/non-string values are only allowed in object mode.\nfunction validChunk(stream, state, chunk, cb) {\n  var valid = true;\n  var er = false;\n\n  if (chunk === null) {\n    er = new TypeError('May not write null values to stream');\n  } else if (typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  if (er) {\n    stream.emit('error', er);\n    pna.nextTick(cb, er);\n    valid = false;\n  }\n  return valid;\n}\n\nWritable.prototype.write = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n  var isBuf = !state.objectMode && _isUint8Array(chunk);\n\n  if (isBuf && !Buffer.isBuffer(chunk)) {\n    chunk = _uint8ArrayToBuffer(chunk);\n  }\n\n  if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (isBuf) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;\n\n  if (typeof cb !== 'function') cb = nop;\n\n  if (state.ended) writeAfterEnd(this, cb);else if (isBuf || validChunk(this, state, chunk, cb)) {\n    state.pendingcb++;\n    ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);\n  }\n\n  return ret;\n};\n\nWritable.prototype.cork = function () {\n  var state = this._writableState;\n\n  state.corked++;\n};\n\nWritable.prototype.uncork = function () {\n  var state = this._writableState;\n\n  if (state.corked) {\n    state.corked--;\n\n    if (!state.writing && !state.corked && !state.finished && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);\n  }\n};\n\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = encoding.toLowerCase();\n  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new TypeError('Unknown encoding: ' + encoding);\n  this._writableState.defaultEncoding = encoding;\n  return this;\n};\n\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\n    chunk = Buffer.from(chunk, encoding);\n  }\n  return chunk;\n}\n\nObject.defineProperty(Writable.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._writableState.highWaterMark;\n  }\n});\n\n// if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {\n  if (!isBuf) {\n    var newChunk = decodeChunk(state, chunk, encoding);\n    if (chunk !== newChunk) {\n      isBuf = true;\n      encoding = 'buffer';\n      chunk = newChunk;\n    }\n  }\n  var len = state.objectMode ? 1 : chunk.length;\n\n  state.length += len;\n\n  var ret = state.length < state.highWaterMark;\n  // we must ensure that previous needDrain will not be reset to false.\n  if (!ret) state.needDrain = true;\n\n  if (state.writing || state.corked) {\n    var last = state.lastBufferedRequest;\n    state.lastBufferedRequest = {\n      chunk: chunk,\n      encoding: encoding,\n      isBuf: isBuf,\n      callback: cb,\n      next: null\n    };\n    if (last) {\n      last.next = state.lastBufferedRequest;\n    } else {\n      state.bufferedRequest = state.lastBufferedRequest;\n    }\n    state.bufferedRequestCount += 1;\n  } else {\n    doWrite(stream, state, false, len, chunk, encoding, cb);\n  }\n\n  return ret;\n}\n\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\n\nfunction onwriteError(stream, state, sync, er, cb) {\n  --state.pendingcb;\n\n  if (sync) {\n    // defer the callback if we are being called synchronously\n    // to avoid piling up things on the stack\n    pna.nextTick(cb, er);\n    // this can emit finish, and it will always happen\n    // after error\n    pna.nextTick(finishMaybe, stream, state);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er);\n  } else {\n    // the caller expect this to happen before if\n    // it is async\n    cb(er);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er);\n    // this can emit finish, but finish must\n    // always follow error\n    finishMaybe(stream, state);\n  }\n}\n\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\n\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n\n  onwriteStateUpdate(state);\n\n  if (er) onwriteError(stream, state, sync, er, cb);else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(state);\n\n    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\n      clearBuffer(stream, state);\n    }\n\n    if (sync) {\n      /*<replacement>*/\n      asyncWrite(afterWrite, stream, state, finished, cb);\n      /*</replacement>*/\n    } else {\n      afterWrite(stream, state, finished, cb);\n    }\n  }\n}\n\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished) onwriteDrain(stream, state);\n  state.pendingcb--;\n  cb();\n  finishMaybe(stream, state);\n}\n\n// Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n}\n\n// if there's something in the buffer waiting, then process it\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n  var entry = state.bufferedRequest;\n\n  if (stream._writev && entry && entry.next) {\n    // Fast case, write everything using _writev()\n    var l = state.bufferedRequestCount;\n    var buffer = new Array(l);\n    var holder = state.corkedRequestsFree;\n    holder.entry = entry;\n\n    var count = 0;\n    var allBuffers = true;\n    while (entry) {\n      buffer[count] = entry;\n      if (!entry.isBuf) allBuffers = false;\n      entry = entry.next;\n      count += 1;\n    }\n    buffer.allBuffers = allBuffers;\n\n    doWrite(stream, state, true, state.length, buffer, '', holder.finish);\n\n    // doWrite is almost always async, defer these to save a bit of time\n    // as the hot path ends with doWrite\n    state.pendingcb++;\n    state.lastBufferedRequest = null;\n    if (holder.next) {\n      state.corkedRequestsFree = holder.next;\n      holder.next = null;\n    } else {\n      state.corkedRequestsFree = new CorkedRequest(state);\n    }\n    state.bufferedRequestCount = 0;\n  } else {\n    // Slow case, write chunks one-by-one\n    while (entry) {\n      var chunk = entry.chunk;\n      var encoding = entry.encoding;\n      var cb = entry.callback;\n      var len = state.objectMode ? 1 : chunk.length;\n\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n      entry = entry.next;\n      state.bufferedRequestCount--;\n      // if we didn't call the onwrite immediately, then\n      // it means that we need to wait until it does.\n      // also, that means that the chunk and cb are currently\n      // being processed, so move the buffer counter past them.\n      if (state.writing) {\n        break;\n      }\n    }\n\n    if (entry === null) state.lastBufferedRequest = null;\n  }\n\n  state.bufferedRequest = entry;\n  state.bufferProcessing = false;\n}\n\nWritable.prototype._write = function (chunk, encoding, cb) {\n  cb(new Error('_write() is not implemented'));\n};\n\nWritable.prototype._writev = null;\n\nWritable.prototype.end = function (chunk, encoding, cb) {\n  var state = this._writableState;\n\n  if (typeof chunk === 'function') {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding);\n\n  // .end() fully uncorks\n  if (state.corked) {\n    state.corked = 1;\n    this.uncork();\n  }\n\n  // ignore unnecessary end() calls.\n  if (!state.ending && !state.finished) endWritable(this, state, cb);\n};\n\nfunction needFinish(state) {\n  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\n}\nfunction callFinal(stream, state) {\n  stream._final(function (err) {\n    state.pendingcb--;\n    if (err) {\n      stream.emit('error', err);\n    }\n    state.prefinished = true;\n    stream.emit('prefinish');\n    finishMaybe(stream, state);\n  });\n}\nfunction prefinish(stream, state) {\n  if (!state.prefinished && !state.finalCalled) {\n    if (typeof stream._final === 'function') {\n      state.pendingcb++;\n      state.finalCalled = true;\n      pna.nextTick(callFinal, stream, state);\n    } else {\n      state.prefinished = true;\n      stream.emit('prefinish');\n    }\n  }\n}\n\nfunction finishMaybe(stream, state) {\n  var need = needFinish(state);\n  if (need) {\n    prefinish(stream, state);\n    if (state.pendingcb === 0) {\n      state.finished = true;\n      stream.emit('finish');\n    }\n  }\n  return need;\n}\n\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n  if (cb) {\n    if (state.finished) pna.nextTick(cb);else stream.once('finish', cb);\n  }\n  state.ended = true;\n  stream.writable = false;\n}\n\nfunction onCorkedFinish(corkReq, state, err) {\n  var entry = corkReq.entry;\n  corkReq.entry = null;\n  while (entry) {\n    var cb = entry.callback;\n    state.pendingcb--;\n    cb(err);\n    entry = entry.next;\n  }\n  if (state.corkedRequestsFree) {\n    state.corkedRequestsFree.next = corkReq;\n  } else {\n    state.corkedRequestsFree = corkReq;\n  }\n}\n\nObject.defineProperty(Writable.prototype, 'destroyed', {\n  get: function () {\n    if (this._writableState === undefined) {\n      return false;\n    }\n    return this._writableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._writableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._writableState.destroyed = value;\n  }\n});\n\nWritable.prototype.destroy = destroyImpl.destroy;\nWritable.prototype._undestroy = destroyImpl.undestroy;\nWritable.prototype._destroy = function (err, cb) {\n  this.end();\n  cb(err);\n};","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototypal inheritance, this class\n// prototypally inherits from Readable, and then parasitically from\n// Writable.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\n/*<replacement>*/\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) {\n    keys.push(key);\n  }return keys;\n};\n/*</replacement>*/\n\nmodule.exports = Duplex;\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nvar Readable = require('./_stream_readable');\nvar Writable = require('./_stream_writable');\n\nutil.inherits(Duplex, Readable);\n\n{\n  // avoid scope creep, the keys array can then be collected\n  var keys = objectKeys(Writable.prototype);\n  for (var v = 0; v < keys.length; v++) {\n    var method = keys[v];\n    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\n  }\n}\n\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options);\n\n  Readable.call(this, options);\n  Writable.call(this, options);\n\n  if (options && options.readable === false) this.readable = false;\n\n  if (options && options.writable === false) this.writable = false;\n\n  this.allowHalfOpen = true;\n  if (options && options.allowHalfOpen === false) this.allowHalfOpen = false;\n\n  this.once('end', onend);\n}\n\nObject.defineProperty(Duplex.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._writableState.highWaterMark;\n  }\n});\n\n// the no-half-open enforcer\nfunction onend() {\n  // if we allow half-open state, or if the writable side ended,\n  // then we're ok.\n  if (this.allowHalfOpen || this._writableState.ended) return;\n\n  // no more data can be written.\n  // But allow more writes to happen in this tick.\n  pna.nextTick(onEndNT, this);\n}\n\nfunction onEndNT(self) {\n  self.end();\n}\n\nObject.defineProperty(Duplex.prototype, 'destroyed', {\n  get: function () {\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed && this._writableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n    this._writableState.destroyed = value;\n  }\n});\n\nDuplex.prototype._destroy = function (err, cb) {\n  this.push(null);\n  this.end();\n\n  pna.nextTick(cb, err);\n};","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\n/*</replacement>*/\n\nvar isEncoding = Buffer.isEncoding || function (encoding) {\n  encoding = '' + encoding;\n  switch (encoding && encoding.toLowerCase()) {\n    case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':case 'raw':\n      return true;\n    default:\n      return false;\n  }\n};\n\nfunction _normalizeEncoding(enc) {\n  if (!enc) return 'utf8';\n  var retried;\n  while (true) {\n    switch (enc) {\n      case 'utf8':\n      case 'utf-8':\n        return 'utf8';\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return 'utf16le';\n      case 'latin1':\n      case 'binary':\n        return 'latin1';\n      case 'base64':\n      case 'ascii':\n      case 'hex':\n        return enc;\n      default:\n        if (retried) return; // undefined\n        enc = ('' + enc).toLowerCase();\n        retried = true;\n    }\n  }\n};\n\n// Do not cache `Buffer.isEncoding` when checking encoding names as some\n// modules monkey-patch it to support additional encodings\nfunction normalizeEncoding(enc) {\n  var nenc = _normalizeEncoding(enc);\n  if (typeof nenc !== 'string' && (Buffer.isEncoding === isEncoding || !isEncoding(enc))) throw new Error('Unknown encoding: ' + enc);\n  return nenc || enc;\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters.\nexports.StringDecoder = StringDecoder;\nfunction StringDecoder(encoding) {\n  this.encoding = normalizeEncoding(encoding);\n  var nb;\n  switch (this.encoding) {\n    case 'utf16le':\n      this.text = utf16Text;\n      this.end = utf16End;\n      nb = 4;\n      break;\n    case 'utf8':\n      this.fillLast = utf8FillLast;\n      nb = 4;\n      break;\n    case 'base64':\n      this.text = base64Text;\n      this.end = base64End;\n      nb = 3;\n      break;\n    default:\n      this.write = simpleWrite;\n      this.end = simpleEnd;\n      return;\n  }\n  this.lastNeed = 0;\n  this.lastTotal = 0;\n  this.lastChar = Buffer.allocUnsafe(nb);\n}\n\nStringDecoder.prototype.write = function (buf) {\n  if (buf.length === 0) return '';\n  var r;\n  var i;\n  if (this.lastNeed) {\n    r = this.fillLast(buf);\n    if (r === undefined) return '';\n    i = this.lastNeed;\n    this.lastNeed = 0;\n  } else {\n    i = 0;\n  }\n  if (i < buf.length) return r ? r + this.text(buf, i) : this.text(buf, i);\n  return r || '';\n};\n\nStringDecoder.prototype.end = utf8End;\n\n// Returns only complete characters in a Buffer\nStringDecoder.prototype.text = utf8Text;\n\n// Attempts to complete a partial non-UTF-8 character using bytes from a Buffer\nStringDecoder.prototype.fillLast = function (buf) {\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);\n  this.lastNeed -= buf.length;\n};\n\n// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a\n// continuation byte. If an invalid byte is detected, -2 is returned.\nfunction utf8CheckByte(byte) {\n  if (byte <= 0x7F) return 0;else if (byte >> 5 === 0x06) return 2;else if (byte >> 4 === 0x0E) return 3;else if (byte >> 3 === 0x1E) return 4;\n  return byte >> 6 === 0x02 ? -1 : -2;\n}\n\n// Checks at most 3 bytes at the end of a Buffer in order to detect an\n// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)\n// needed to complete the UTF-8 character (if applicable) are returned.\nfunction utf8CheckIncomplete(self, buf, i) {\n  var j = buf.length - 1;\n  if (j < i) return 0;\n  var nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 1;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 2;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) {\n      if (nb === 2) nb = 0;else self.lastNeed = nb - 3;\n    }\n    return nb;\n  }\n  return 0;\n}\n\n// Validates as many continuation bytes for a multi-byte UTF-8 character as\n// needed or are available. If we see a non-continuation byte where we expect\n// one, we \"replace\" the validated continuation bytes we've seen so far with\n// a single UTF-8 replacement character ('\\ufffd'), to match v8's UTF-8 decoding\n// behavior. The continuation byte check is included three times in the case\n// where all of the continuation bytes for a character exist in the same buffer.\n// It is also done this way as a slight performance increase instead of using a\n// loop.\nfunction utf8CheckExtraBytes(self, buf, p) {\n  if ((buf[0] & 0xC0) !== 0x80) {\n    self.lastNeed = 0;\n    return '\\ufffd';\n  }\n  if (self.lastNeed > 1 && buf.length > 1) {\n    if ((buf[1] & 0xC0) !== 0x80) {\n      self.lastNeed = 1;\n      return '\\ufffd';\n    }\n    if (self.lastNeed > 2 && buf.length > 2) {\n      if ((buf[2] & 0xC0) !== 0x80) {\n        self.lastNeed = 2;\n        return '\\ufffd';\n      }\n    }\n  }\n}\n\n// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.\nfunction utf8FillLast(buf) {\n  var p = this.lastTotal - this.lastNeed;\n  var r = utf8CheckExtraBytes(this, buf, p);\n  if (r !== undefined) return r;\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, p, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, p, 0, buf.length);\n  this.lastNeed -= buf.length;\n}\n\n// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a\n// partial character, the character's bytes are buffered until the required\n// number of bytes are available.\nfunction utf8Text(buf, i) {\n  var total = utf8CheckIncomplete(this, buf, i);\n  if (!this.lastNeed) return buf.toString('utf8', i);\n  this.lastTotal = total;\n  var end = buf.length - (total - this.lastNeed);\n  buf.copy(this.lastChar, 0, end);\n  return buf.toString('utf8', i, end);\n}\n\n// For UTF-8, a replacement character is added when ending on a partial\n// character.\nfunction utf8End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + '\\ufffd';\n  return r;\n}\n\n// UTF-16LE typically needs two bytes per character, but even if we have an even\n// number of bytes available, we need to check if we end on a leading/high\n// surrogate. In that case, we need to wait for the next two bytes in order to\n// decode the last character properly.\nfunction utf16Text(buf, i) {\n  if ((buf.length - i) % 2 === 0) {\n    var r = buf.toString('utf16le', i);\n    if (r) {\n      var c = r.charCodeAt(r.length - 1);\n      if (c >= 0xD800 && c <= 0xDBFF) {\n        this.lastNeed = 2;\n        this.lastTotal = 4;\n        this.lastChar[0] = buf[buf.length - 2];\n        this.lastChar[1] = buf[buf.length - 1];\n        return r.slice(0, -1);\n      }\n    }\n    return r;\n  }\n  this.lastNeed = 1;\n  this.lastTotal = 2;\n  this.lastChar[0] = buf[buf.length - 1];\n  return buf.toString('utf16le', i, buf.length - 1);\n}\n\n// For UTF-16LE we do not explicitly append special replacement characters if we\n// end on a partial character, we simply let v8 handle that.\nfunction utf16End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) {\n    var end = this.lastTotal - this.lastNeed;\n    return r + this.lastChar.toString('utf16le', 0, end);\n  }\n  return r;\n}\n\nfunction base64Text(buf, i) {\n  var n = (buf.length - i) % 3;\n  if (n === 0) return buf.toString('base64', i);\n  this.lastNeed = 3 - n;\n  this.lastTotal = 3;\n  if (n === 1) {\n    this.lastChar[0] = buf[buf.length - 1];\n  } else {\n    this.lastChar[0] = buf[buf.length - 2];\n    this.lastChar[1] = buf[buf.length - 1];\n  }\n  return buf.toString('base64', i, buf.length - n);\n}\n\nfunction base64End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + this.lastChar.toString('base64', 0, 3 - this.lastNeed);\n  return r;\n}\n\n// Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)\nfunction simpleWrite(buf) {\n  return buf.toString(this.encoding);\n}\n\nfunction simpleEnd(buf) {\n  return buf && buf.length ? this.write(buf) : '';\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\nmodule.exports = Readable;\n\n/*<replacement>*/\nvar isArray = require('isarray');\n/*</replacement>*/\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nReadable.ReadableState = ReadableState;\n\n/*<replacement>*/\nvar EE = require('events').EventEmitter;\n\nvar EElistenerCount = function (emitter, type) {\n  return emitter.listeners(type).length;\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\nvar OurUint8Array = global.Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*</replacement>*/\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\n/*<replacement>*/\nvar debugUtil = require('util');\nvar debug = void 0;\nif (debugUtil && debugUtil.debuglog) {\n  debug = debugUtil.debuglog('stream');\n} else {\n  debug = function () {};\n}\n/*</replacement>*/\n\nvar BufferList = require('./internal/streams/BufferList');\nvar destroyImpl = require('./internal/streams/destroy');\nvar StringDecoder;\n\nutil.inherits(Readable, Stream);\n\nvar kProxyEvents = ['error', 'close', 'destroy', 'pause', 'resume'];\n\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn);\n\n  // This is a hack to make sure that our error handler is attached before any\n  // userland ones.  NEVER DO THIS. This is here only because this code needs\n  // to continue to work with older versions of Node.js that do not include\n  // the prependListener() method. The goal is to eventually remove this hack.\n  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];\n}\n\nfunction ReadableState(options, stream) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  var isDuplex = stream instanceof Duplex;\n\n  // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n  this.objectMode = !!options.objectMode;\n\n  if (isDuplex) this.objectMode = this.objectMode || !!options.readableObjectMode;\n\n  // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n  var hwm = options.highWaterMark;\n  var readableHwm = options.readableHighWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n\n  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (readableHwm || readableHwm === 0)) this.highWaterMark = readableHwm;else this.highWaterMark = defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = Math.floor(this.highWaterMark);\n\n  // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift()\n  this.buffer = new BufferList();\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = null;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false;\n\n  // a flag to be able to tell if the event 'readable'/'data' is emitted\n  // immediately, or on a later tick.  We set this to true at first, because\n  // any actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first read call.\n  this.sync = true;\n\n  // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n  this.resumeScheduled = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // the number of writers that are awaiting a drain event in .pipe()s\n  this.awaitDrain = 0;\n\n  // if true, a maybeReadMore has been scheduled\n  this.readingMore = false;\n\n  this.decoder = null;\n  this.encoding = null;\n  if (options.encoding) {\n    if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\n\nfunction Readable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  if (!(this instanceof Readable)) return new Readable(options);\n\n  this._readableState = new ReadableState(options, this);\n\n  // legacy\n  this.readable = true;\n\n  if (options) {\n    if (typeof options.read === 'function') this._read = options.read;\n\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n  }\n\n  Stream.call(this);\n}\n\nObject.defineProperty(Readable.prototype, 'destroyed', {\n  get: function () {\n    if (this._readableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._readableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n  }\n});\n\nReadable.prototype.destroy = destroyImpl.destroy;\nReadable.prototype._undestroy = destroyImpl.undestroy;\nReadable.prototype._destroy = function (err, cb) {\n  this.push(null);\n  cb(err);\n};\n\n// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push = function (chunk, encoding) {\n  var state = this._readableState;\n  var skipChunkCheck;\n\n  if (!state.objectMode) {\n    if (typeof chunk === 'string') {\n      encoding = encoding || state.defaultEncoding;\n      if (encoding !== state.encoding) {\n        chunk = Buffer.from(chunk, encoding);\n        encoding = '';\n      }\n      skipChunkCheck = true;\n    }\n  } else {\n    skipChunkCheck = true;\n  }\n\n  return readableAddChunk(this, chunk, encoding, false, skipChunkCheck);\n};\n\n// Unshift should *always* be something directly out of read()\nReadable.prototype.unshift = function (chunk) {\n  return readableAddChunk(this, chunk, null, true, false);\n};\n\nfunction readableAddChunk(stream, chunk, encoding, addToFront, skipChunkCheck) {\n  var state = stream._readableState;\n  if (chunk === null) {\n    state.reading = false;\n    onEofChunk(stream, state);\n  } else {\n    var er;\n    if (!skipChunkCheck) er = chunkInvalid(state, chunk);\n    if (er) {\n      stream.emit('error', er);\n    } else if (state.objectMode || chunk && chunk.length > 0) {\n      if (typeof chunk !== 'string' && !state.objectMode && Object.getPrototypeOf(chunk) !== Buffer.prototype) {\n        chunk = _uint8ArrayToBuffer(chunk);\n      }\n\n      if (addToFront) {\n        if (state.endEmitted) stream.emit('error', new Error('stream.unshift() after end event'));else addChunk(stream, state, chunk, true);\n      } else if (state.ended) {\n        stream.emit('error', new Error('stream.push() after EOF'));\n      } else {\n        state.reading = false;\n        if (state.decoder && !encoding) {\n          chunk = state.decoder.write(chunk);\n          if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false);else maybeReadMore(stream, state);\n        } else {\n          addChunk(stream, state, chunk, false);\n        }\n      }\n    } else if (!addToFront) {\n      state.reading = false;\n    }\n  }\n\n  return needMoreData(state);\n}\n\nfunction addChunk(stream, state, chunk, addToFront) {\n  if (state.flowing && state.length === 0 && !state.sync) {\n    stream.emit('data', chunk);\n    stream.read(0);\n  } else {\n    // update the buffer info.\n    state.length += state.objectMode ? 1 : chunk.length;\n    if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);\n\n    if (state.needReadable) emitReadable(stream);\n  }\n  maybeReadMore(stream, state);\n}\n\nfunction chunkInvalid(state, chunk) {\n  var er;\n  if (!_isUint8Array(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  return er;\n}\n\n// if it's past the high water mark, we can push in some more.\n// Also, if we have no data yet, we can stand some\n// more bytes.  This is to work around cases where hwm=0,\n// such as the repl.  Also, if the push() triggered a\n// readable event, and the user called read(largeNumber) such that\n// needReadable was set, then we ought to push more, so that another\n// 'readable' event will be triggered.\nfunction needMoreData(state) {\n  return !state.ended && (state.needReadable || state.length < state.highWaterMark || state.length === 0);\n}\n\nReadable.prototype.isPaused = function () {\n  return this._readableState.flowing === false;\n};\n\n// backwards compatibility.\nReadable.prototype.setEncoding = function (enc) {\n  if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n  this._readableState.decoder = new StringDecoder(enc);\n  this._readableState.encoding = enc;\n  return this;\n};\n\n// Don't raise the hwm > 8MB\nvar MAX_HWM = 0x800000;\nfunction computeNewHighWaterMark(n) {\n  if (n >= MAX_HWM) {\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts\n    n--;\n    n |= n >>> 1;\n    n |= n >>> 2;\n    n |= n >>> 4;\n    n |= n >>> 8;\n    n |= n >>> 16;\n    n++;\n  }\n  return n;\n}\n\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || state.length === 0 && state.ended) return 0;\n  if (state.objectMode) return 1;\n  if (n !== n) {\n    // Only flow one buffer at a time\n    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;\n  }\n  // If we're asking for more than the current hwm, then raise the hwm.\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);\n  if (n <= state.length) return n;\n  // Don't have enough\n  if (!state.ended) {\n    state.needReadable = true;\n    return 0;\n  }\n  return state.length;\n}\n\n// you can override either this method, or the async _read(n) below.\nReadable.prototype.read = function (n) {\n  debug('read', n);\n  n = parseInt(n, 10);\n  var state = this._readableState;\n  var nOrig = n;\n\n  if (n !== 0) state.emittedReadable = false;\n\n  // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n  if (n === 0 && state.needReadable && (state.length >= state.highWaterMark || state.ended)) {\n    debug('read: emitReadable', state.length, state.ended);\n    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);\n    return null;\n  }\n\n  n = howMuchToRead(n, state);\n\n  // if we've ended, and we're now clear, then finish it up.\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this);\n    return null;\n  }\n\n  // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n\n  // if we need a readable event, then we need to do some reading.\n  var doRead = state.needReadable;\n  debug('need readable', doRead);\n\n  // if we currently have less than the highWaterMark, then also read some\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true;\n    debug('length less than watermark', doRead);\n  }\n\n  // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n  if (state.ended || state.reading) {\n    doRead = false;\n    debug('reading or ended', doRead);\n  } else if (doRead) {\n    debug('do read');\n    state.reading = true;\n    state.sync = true;\n    // if the length is currently zero, then we *need* a readable event.\n    if (state.length === 0) state.needReadable = true;\n    // call internal read method\n    this._read(state.highWaterMark);\n    state.sync = false;\n    // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n    if (!state.reading) n = howMuchToRead(nOrig, state);\n  }\n\n  var ret;\n  if (n > 0) ret = fromList(n, state);else ret = null;\n\n  if (ret === null) {\n    state.needReadable = true;\n    n = 0;\n  } else {\n    state.length -= n;\n  }\n\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true;\n\n    // If we tried to read() past the EOF, then emit end on the next tick.\n    if (nOrig !== n && state.ended) endReadable(this);\n  }\n\n  if (ret !== null) this.emit('data', ret);\n\n  return ret;\n};\n\nfunction onEofChunk(stream, state) {\n  if (state.ended) return;\n  if (state.decoder) {\n    var chunk = state.decoder.end();\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n  state.ended = true;\n\n  // emit 'readable' now to make sure it gets picked up.\n  emitReadable(stream);\n}\n\n// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  state.needReadable = false;\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing);\n    state.emittedReadable = true;\n    if (state.sync) pna.nextTick(emitReadable_, stream);else emitReadable_(stream);\n  }\n}\n\nfunction emitReadable_(stream) {\n  debug('emit readable');\n  stream.emit('readable');\n  flow(stream);\n}\n\n// at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    pna.nextTick(maybeReadMore_, stream, state);\n  }\n}\n\nfunction maybeReadMore_(stream, state) {\n  var len = state.length;\n  while (!state.reading && !state.flowing && !state.ended && state.length < state.highWaterMark) {\n    debug('maybeReadMore read 0');\n    stream.read(0);\n    if (len === state.length)\n      // didn't get any data, stop spinning.\n      break;else len = state.length;\n  }\n  state.readingMore = false;\n}\n\n// abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read = function (n) {\n  this.emit('error', new Error('_read() is not implemented'));\n};\n\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n  state.pipesCount += 1;\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n\n  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;\n\n  var endFn = doEnd ? onend : unpipe;\n  if (state.endEmitted) pna.nextTick(endFn);else src.once('end', endFn);\n\n  dest.on('unpipe', onunpipe);\n  function onunpipe(readable, unpipeInfo) {\n    debug('onunpipe');\n    if (readable === src) {\n      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {\n        unpipeInfo.hasUnpiped = true;\n        cleanup();\n      }\n    }\n  }\n\n  function onend() {\n    debug('onend');\n    dest.end();\n  }\n\n  // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n\n  var cleanedUp = false;\n  function cleanup() {\n    debug('cleanup');\n    // cleanup event handlers once the pipe is broken\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', unpipe);\n    src.removeListener('data', ondata);\n\n    cleanedUp = true;\n\n    // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();\n  }\n\n  // If the user pushes more data while we're writing to dest then we'll end up\n  // in ondata again. However, we only want to increase awaitDrain once because\n  // dest will only emit one 'drain' event for the multiple writes.\n  // => Introduce a guard on increasing awaitDrain.\n  var increasedAwaitDrain = false;\n  src.on('data', ondata);\n  function ondata(chunk) {\n    debug('ondata');\n    increasedAwaitDrain = false;\n    var ret = dest.write(chunk);\n    if (false === ret && !increasedAwaitDrain) {\n      // If the user unpiped during `dest.write()`, it is possible\n      // to get stuck in a permanently paused state if that write\n      // also returned false.\n      // => Check whether `dest` is still a piping destination.\n      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {\n        debug('false write response, pause', src._readableState.awaitDrain);\n        src._readableState.awaitDrain++;\n        increasedAwaitDrain = true;\n      }\n      src.pause();\n    }\n  }\n\n  // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n  function onerror(er) {\n    debug('onerror', er);\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (EElistenerCount(dest, 'error') === 0) dest.emit('error', er);\n  }\n\n  // Make sure our error handler is attached before userland ones.\n  prependListener(dest, 'error', onerror);\n\n  // Both close and finish should trigger unpipe, but only once.\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n  dest.once('close', onclose);\n  function onfinish() {\n    debug('onfinish');\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n  dest.once('finish', onfinish);\n\n  function unpipe() {\n    debug('unpipe');\n    src.unpipe(dest);\n  }\n\n  // tell the dest that it's being piped to\n  dest.emit('pipe', src);\n\n  // start the flow if it hasn't been started already.\n  if (!state.flowing) {\n    debug('pipe resume');\n    src.resume();\n  }\n\n  return dest;\n};\n\nfunction pipeOnDrain(src) {\n  return function () {\n    var state = src._readableState;\n    debug('pipeOnDrain', state.awaitDrain);\n    if (state.awaitDrain) state.awaitDrain--;\n    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {\n      state.flowing = true;\n      flow(src);\n    }\n  };\n}\n\nReadable.prototype.unpipe = function (dest) {\n  var state = this._readableState;\n  var unpipeInfo = { hasUnpiped: false };\n\n  // if we're not piping anywhere, then do nothing.\n  if (state.pipesCount === 0) return this;\n\n  // just one destination.  most common case.\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes) return this;\n\n    if (!dest) dest = state.pipes;\n\n    // got a match.\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    if (dest) dest.emit('unpipe', this, unpipeInfo);\n    return this;\n  }\n\n  // slow case. multiple pipe destinations.\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n\n    for (var i = 0; i < len; i++) {\n      dests[i].emit('unpipe', this, unpipeInfo);\n    }return this;\n  }\n\n  // try to find the right one.\n  var index = indexOf(state.pipes, dest);\n  if (index === -1) return this;\n\n  state.pipes.splice(index, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1) state.pipes = state.pipes[0];\n\n  dest.emit('unpipe', this, unpipeInfo);\n\n  return this;\n};\n\n// set up data events if they are asked for\n// Ensure readable listeners eventually get something\nReadable.prototype.on = function (ev, fn) {\n  var res = Stream.prototype.on.call(this, ev, fn);\n\n  if (ev === 'data') {\n    // Start flowing on next tick if stream isn't explicitly paused\n    if (this._readableState.flowing !== false) this.resume();\n  } else if (ev === 'readable') {\n    var state = this._readableState;\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true;\n      state.emittedReadable = false;\n      if (!state.reading) {\n        pna.nextTick(nReadingNextTick, this);\n      } else if (state.length) {\n        emitReadable(this);\n      }\n    }\n  }\n\n  return res;\n};\nReadable.prototype.addListener = Readable.prototype.on;\n\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0');\n  self.read(0);\n}\n\n// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume = function () {\n  var state = this._readableState;\n  if (!state.flowing) {\n    debug('resume');\n    state.flowing = true;\n    resume(this, state);\n  }\n  return this;\n};\n\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true;\n    pna.nextTick(resume_, stream, state);\n  }\n}\n\nfunction resume_(stream, state) {\n  if (!state.reading) {\n    debug('resume read 0');\n    stream.read(0);\n  }\n\n  state.resumeScheduled = false;\n  state.awaitDrain = 0;\n  stream.emit('resume');\n  flow(stream);\n  if (state.flowing && !state.reading) stream.read(0);\n}\n\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing);\n  if (false !== this._readableState.flowing) {\n    debug('pause');\n    this._readableState.flowing = false;\n    this.emit('pause');\n  }\n  return this;\n};\n\nfunction flow(stream) {\n  var state = stream._readableState;\n  debug('flow', state.flowing);\n  while (state.flowing && stream.read() !== null) {}\n}\n\n// wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap = function (stream) {\n  var _this = this;\n\n  var state = this._readableState;\n  var paused = false;\n\n  stream.on('end', function () {\n    debug('wrapped end');\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length) _this.push(chunk);\n    }\n\n    _this.push(null);\n  });\n\n  stream.on('data', function (chunk) {\n    debug('wrapped data');\n    if (state.decoder) chunk = state.decoder.write(chunk);\n\n    // don't skip over falsy values in objectMode\n    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;\n\n    var ret = _this.push(chunk);\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  });\n\n  // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n  for (var i in stream) {\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = function (method) {\n        return function () {\n          return stream[method].apply(stream, arguments);\n        };\n      }(i);\n    }\n  }\n\n  // proxy certain important events.\n  for (var n = 0; n < kProxyEvents.length; n++) {\n    stream.on(kProxyEvents[n], this.emit.bind(this, kProxyEvents[n]));\n  }\n\n  // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n  this._read = function (n) {\n    debug('wrapped _read', n);\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n\n  return this;\n};\n\nObject.defineProperty(Readable.prototype, 'readableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._readableState.highWaterMark;\n  }\n});\n\n// exposed for testing purposes only.\nReadable._fromList = fromList;\n\n// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromList(n, state) {\n  // nothing buffered\n  if (state.length === 0) return null;\n\n  var ret;\n  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {\n    // read it all, truncate the list\n    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.head.data;else ret = state.buffer.concat(state.length);\n    state.buffer.clear();\n  } else {\n    // read part of list\n    ret = fromListPartial(n, state.buffer, state.decoder);\n  }\n\n  return ret;\n}\n\n// Extracts only enough buffered data to satisfy the amount requested.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromListPartial(n, list, hasStrings) {\n  var ret;\n  if (n < list.head.data.length) {\n    // slice is the same for buffers and strings\n    ret = list.head.data.slice(0, n);\n    list.head.data = list.head.data.slice(n);\n  } else if (n === list.head.data.length) {\n    // first chunk is a perfect match\n    ret = list.shift();\n  } else {\n    // result spans more than one buffer\n    ret = hasStrings ? copyFromBufferString(n, list) : copyFromBuffer(n, list);\n  }\n  return ret;\n}\n\n// Copies a specified amount of characters from the list of buffered data\n// chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBufferString(n, list) {\n  var p = list.head;\n  var c = 1;\n  var ret = p.data;\n  n -= ret.length;\n  while (p = p.next) {\n    var str = p.data;\n    var nb = n > str.length ? str.length : n;\n    if (nb === str.length) ret += str;else ret += str.slice(0, n);\n    n -= nb;\n    if (n === 0) {\n      if (nb === str.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = str.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\n// Copies a specified amount of bytes from the list of buffered data chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBuffer(n, list) {\n  var ret = Buffer.allocUnsafe(n);\n  var p = list.head;\n  var c = 1;\n  p.data.copy(ret);\n  n -= p.data.length;\n  while (p = p.next) {\n    var buf = p.data;\n    var nb = n > buf.length ? buf.length : n;\n    buf.copy(ret, ret.length - n, 0, nb);\n    n -= nb;\n    if (n === 0) {\n      if (nb === buf.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = buf.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\nfunction endReadable(stream) {\n  var state = stream._readableState;\n\n  // If we get here before consuming all the bytes, then that is a\n  // bug in node.  Should never happen.\n  if (state.length > 0) throw new Error('\"endReadable()\" called on non-empty stream');\n\n  if (!state.endEmitted) {\n    state.ended = true;\n    pna.nextTick(endReadableNT, state, stream);\n  }\n}\n\nfunction endReadableNT(state, stream) {\n  // Check that we didn't get one last unshift.\n  if (!state.endEmitted && state.length === 0) {\n    state.endEmitted = true;\n    stream.readable = false;\n    stream.emit('end');\n  }\n}\n\nfunction indexOf(xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n  return -1;\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\n'use strict';\n\nmodule.exports = Transform;\n\nvar Duplex = require('./_stream_duplex');\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(Transform, Duplex);\n\nfunction afterTransform(er, data) {\n  var ts = this._transformState;\n  ts.transforming = false;\n\n  var cb = ts.writecb;\n\n  if (!cb) {\n    return this.emit('error', new Error('write callback called multiple times'));\n  }\n\n  ts.writechunk = null;\n  ts.writecb = null;\n\n  if (data != null) // single equals check for both `null` and `undefined`\n    this.push(data);\n\n  cb(er);\n\n  var rs = this._readableState;\n  rs.reading = false;\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    this._read(rs.highWaterMark);\n  }\n}\n\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options);\n\n  Duplex.call(this, options);\n\n  this._transformState = {\n    afterTransform: afterTransform.bind(this),\n    needTransform: false,\n    transforming: false,\n    writecb: null,\n    writechunk: null,\n    writeencoding: null\n  };\n\n  // start out asking for a readable event once data is transformed.\n  this._readableState.needReadable = true;\n\n  // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n  this._readableState.sync = false;\n\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform;\n\n    if (typeof options.flush === 'function') this._flush = options.flush;\n  }\n\n  // When the writable side finishes, then flush out anything remaining.\n  this.on('prefinish', prefinish);\n}\n\nfunction prefinish() {\n  var _this = this;\n\n  if (typeof this._flush === 'function') {\n    this._flush(function (er, data) {\n      done(_this, er, data);\n    });\n  } else {\n    done(this, null, null);\n  }\n}\n\nTransform.prototype.push = function (chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n};\n\n// This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\nTransform.prototype._transform = function (chunk, encoding, cb) {\n  throw new Error('_transform() is not implemented');\n};\n\nTransform.prototype._write = function (chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);\n  }\n};\n\n// Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\nTransform.prototype._read = function (n) {\n  var ts = this._transformState;\n\n  if (ts.writechunk !== null && ts.writecb && !ts.transforming) {\n    ts.transforming = true;\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\n\nTransform.prototype._destroy = function (err, cb) {\n  var _this2 = this;\n\n  Duplex.prototype._destroy.call(this, err, function (err2) {\n    cb(err2);\n    _this2.emit('close');\n  });\n};\n\nfunction done(stream, er, data) {\n  if (er) return stream.emit('error', er);\n\n  if (data != null) // single equals check for both `null` and `undefined`\n    stream.push(data);\n\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n  if (stream._writableState.length) throw new Error('Calling transform done when ws.length != 0');\n\n  if (stream._transformState.transforming) throw new Error('Calling transform done when still transforming');\n\n  return stream.push(null);\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n\n'use strict';\n\nmodule.exports = PassThrough;\n\nvar Transform = require('./_stream_transform');\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(PassThrough, Transform);\n\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options);\n\n  Transform.call(this, options);\n}\n\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk);\n};","exports = module.exports = require('./lib/_stream_readable.js');\nexports.Stream = exports;\nexports.Readable = exports;\nexports.Writable = require('./lib/_stream_writable.js');\nexports.Duplex = require('./lib/_stream_duplex.js');\nexports.Transform = require('./lib/_stream_transform.js');\nexports.PassThrough = require('./lib/_stream_passthrough.js');\n","var capability = require('./capability')\nvar inherits = require('inherits')\nvar stream = require('readable-stream')\n\nvar rStates = exports.readyStates = {\n\tUNSENT: 0,\n\tOPENED: 1,\n\tHEADERS_RECEIVED: 2,\n\tLOADING: 3,\n\tDONE: 4\n}\n\nvar IncomingMessage = exports.IncomingMessage = function (xhr, response, mode, fetchTimer) {\n\tvar self = this\n\tstream.Readable.call(self)\n\n\tself._mode = mode\n\tself.headers = {}\n\tself.rawHeaders = []\n\tself.trailers = {}\n\tself.rawTrailers = []\n\n\t// Fake the 'close' event, but only once 'end' fires\n\tself.on('end', function () {\n\t\t// The nextTick is necessary to prevent the 'request' module from causing an infinite loop\n\t\tprocess.nextTick(function () {\n\t\t\tself.emit('close')\n\t\t})\n\t})\n\n\tif (mode === 'fetch') {\n\t\tself._fetchResponse = response\n\n\t\tself.url = response.url\n\t\tself.statusCode = response.status\n\t\tself.statusMessage = response.statusText\n\t\t\n\t\tresponse.headers.forEach(function (header, key){\n\t\t\tself.headers[key.toLowerCase()] = header\n\t\t\tself.rawHeaders.push(key, header)\n\t\t})\n\n\t\tif (capability.writableStream) {\n\t\t\tvar writable = new WritableStream({\n\t\t\t\twrite: function (chunk) {\n\t\t\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\t\t\tif (self._destroyed) {\n\t\t\t\t\t\t\treject()\n\t\t\t\t\t\t} else if(self.push(new Buffer(chunk))) {\n\t\t\t\t\t\t\tresolve()\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tself._resumeFetch = resolve\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\tclose: function () {\n\t\t\t\t\tglobal.clearTimeout(fetchTimer)\n\t\t\t\t\tif (!self._destroyed)\n\t\t\t\t\t\tself.push(null)\n\t\t\t\t},\n\t\t\t\tabort: function (err) {\n\t\t\t\t\tif (!self._destroyed)\n\t\t\t\t\t\tself.emit('error', err)\n\t\t\t\t}\n\t\t\t})\n\n\t\t\ttry {\n\t\t\t\tresponse.body.pipeTo(writable).catch(function (err) {\n\t\t\t\t\tglobal.clearTimeout(fetchTimer)\n\t\t\t\t\tif (!self._destroyed)\n\t\t\t\t\t\tself.emit('error', err)\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t} catch (e) {} // pipeTo method isn't defined. Can't find a better way to feature test this\n\t\t}\n\t\t// fallback for when writableStream or pipeTo aren't available\n\t\tvar reader = response.body.getReader()\n\t\tfunction read () {\n\t\t\treader.read().then(function (result) {\n\t\t\t\tif (self._destroyed)\n\t\t\t\t\treturn\n\t\t\t\tif (result.done) {\n\t\t\t\t\tglobal.clearTimeout(fetchTimer)\n\t\t\t\t\tself.push(null)\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tself.push(new Buffer(result.value))\n\t\t\t\tread()\n\t\t\t}).catch(function (err) {\n\t\t\t\tglobal.clearTimeout(fetchTimer)\n\t\t\t\tif (!self._destroyed)\n\t\t\t\t\tself.emit('error', err)\n\t\t\t})\n\t\t}\n\t\tread()\n\t} else {\n\t\tself._xhr = xhr\n\t\tself._pos = 0\n\n\t\tself.url = xhr.responseURL\n\t\tself.statusCode = xhr.status\n\t\tself.statusMessage = xhr.statusText\n\t\tvar headers = xhr.getAllResponseHeaders().split(/\\r?\\n/)\n\t\theaders.forEach(function (header) {\n\t\t\tvar matches = header.match(/^([^:]+):\\s*(.*)/)\n\t\t\tif (matches) {\n\t\t\t\tvar key = matches[1].toLowerCase()\n\t\t\t\tif (key === 'set-cookie') {\n\t\t\t\t\tif (self.headers[key] === undefined) {\n\t\t\t\t\t\tself.headers[key] = []\n\t\t\t\t\t}\n\t\t\t\t\tself.headers[key].push(matches[2])\n\t\t\t\t} else if (self.headers[key] !== undefined) {\n\t\t\t\t\tself.headers[key] += ', ' + matches[2]\n\t\t\t\t} else {\n\t\t\t\t\tself.headers[key] = matches[2]\n\t\t\t\t}\n\t\t\t\tself.rawHeaders.push(matches[1], matches[2])\n\t\t\t}\n\t\t})\n\n\t\tself._charset = 'x-user-defined'\n\t\tif (!capability.overrideMimeType) {\n\t\t\tvar mimeType = self.rawHeaders['mime-type']\n\t\t\tif (mimeType) {\n\t\t\t\tvar charsetMatch = mimeType.match(/;\\s*charset=([^;])(;|$)/)\n\t\t\t\tif (charsetMatch) {\n\t\t\t\t\tself._charset = charsetMatch[1].toLowerCase()\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!self._charset)\n\t\t\t\tself._charset = 'utf-8' // best guess\n\t\t}\n\t}\n}\n\ninherits(IncomingMessage, stream.Readable)\n\nIncomingMessage.prototype._read = function () {\n\tvar self = this\n\n\tvar resolve = self._resumeFetch\n\tif (resolve) {\n\t\tself._resumeFetch = null\n\t\tresolve()\n\t}\n}\n\nIncomingMessage.prototype._onXHRProgress = function () {\n\tvar self = this\n\n\tvar xhr = self._xhr\n\n\tvar response = null\n\tswitch (self._mode) {\n\t\tcase 'text:vbarray': // For IE9\n\t\t\tif (xhr.readyState !== rStates.DONE)\n\t\t\t\tbreak\n\t\t\ttry {\n\t\t\t\t// This fails in IE8\n\t\t\t\tresponse = new global.VBArray(xhr.responseBody).toArray()\n\t\t\t} catch (e) {}\n\t\t\tif (response !== null) {\n\t\t\t\tself.push(new Buffer(response))\n\t\t\t\tbreak\n\t\t\t}\n\t\t\t// Falls through in IE8\t\n\t\tcase 'text':\n\t\t\ttry { // This will fail when readyState = 3 in IE9. Switch mode and wait for readyState = 4\n\t\t\t\tresponse = xhr.responseText\n\t\t\t} catch (e) {\n\t\t\t\tself._mode = 'text:vbarray'\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tif (response.length > self._pos) {\n\t\t\t\tvar newData = response.substr(self._pos)\n\t\t\t\tif (self._charset === 'x-user-defined') {\n\t\t\t\t\tvar buffer = new Buffer(newData.length)\n\t\t\t\t\tfor (var i = 0; i < newData.length; i++)\n\t\t\t\t\t\tbuffer[i] = newData.charCodeAt(i) & 0xff\n\n\t\t\t\t\tself.push(buffer)\n\t\t\t\t} else {\n\t\t\t\t\tself.push(newData, self._charset)\n\t\t\t\t}\n\t\t\t\tself._pos = response.length\n\t\t\t}\n\t\t\tbreak\n\t\tcase 'arraybuffer':\n\t\t\tif (xhr.readyState !== rStates.DONE || !xhr.response)\n\t\t\t\tbreak\n\t\t\tresponse = xhr.response\n\t\t\tself.push(new Buffer(new Uint8Array(response)))\n\t\t\tbreak\n\t\tcase 'moz-chunked-arraybuffer': // take whole\n\t\t\tresponse = xhr.response\n\t\t\tif (xhr.readyState !== rStates.LOADING || !response)\n\t\t\t\tbreak\n\t\t\tself.push(new Buffer(new Uint8Array(response)))\n\t\t\tbreak\n\t\tcase 'ms-stream':\n\t\t\tresponse = xhr.response\n\t\t\tif (xhr.readyState !== rStates.LOADING)\n\t\t\t\tbreak\n\t\t\tvar reader = new global.MSStreamReader()\n\t\t\treader.onprogress = function () {\n\t\t\t\tif (reader.result.byteLength > self._pos) {\n\t\t\t\t\tself.push(new Buffer(new Uint8Array(reader.result.slice(self._pos))))\n\t\t\t\t\tself._pos = reader.result.byteLength\n\t\t\t\t}\n\t\t\t}\n\t\t\treader.onload = function () {\n\t\t\t\tself.push(null)\n\t\t\t}\n\t\t\t// reader.onerror = ??? // TODO: this\n\t\t\treader.readAsArrayBuffer(response)\n\t\t\tbreak\n\t}\n\n\t// The ms-stream case handles end separately in reader.onload()\n\tif (self._xhr.readyState === rStates.DONE && self._mode !== 'ms-stream') {\n\t\tself.push(null)\n\t}\n}\n","var Buffer = require('buffer').Buffer\n\nmodule.exports = function (buf) {\n\t// If the buffer is backed by a Uint8Array, a faster version will work\n\tif (buf instanceof Uint8Array) {\n\t\t// If the buffer isn't a subarray, return the underlying ArrayBuffer\n\t\tif (buf.byteOffset === 0 && buf.byteLength === buf.buffer.byteLength) {\n\t\t\treturn buf.buffer\n\t\t} else if (typeof buf.buffer.slice === 'function') {\n\t\t\t// Otherwise we need to get a proper copy\n\t\t\treturn buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength)\n\t\t}\n\t}\n\n\tif (Buffer.isBuffer(buf)) {\n\t\t// This is the slow version that will work with any Buffer\n\t\t// implementation (even in old browsers)\n\t\tvar arrayCopy = new Uint8Array(buf.length)\n\t\tvar len = buf.length\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tarrayCopy[i] = buf[i]\n\t\t}\n\t\treturn arrayCopy.buffer\n\t} else {\n\t\tthrow new Error('Argument must be a Buffer')\n\t}\n}\n","var capability = require('./capability')\nvar inherits = require('inherits')\nvar response = require('./response')\nvar stream = require('readable-stream')\nvar toArrayBuffer = require('to-arraybuffer')\n\nvar IncomingMessage = response.IncomingMessage\nvar rStates = response.readyStates\n\nfunction decideMode (preferBinary, useFetch) {\n\tif (capability.fetch && useFetch) {\n\t\treturn 'fetch'\n\t} else if (capability.mozchunkedarraybuffer) {\n\t\treturn 'moz-chunked-arraybuffer'\n\t} else if (capability.msstream) {\n\t\treturn 'ms-stream'\n\t} else if (capability.arraybuffer && preferBinary) {\n\t\treturn 'arraybuffer'\n\t} else if (capability.vbArray && preferBinary) {\n\t\treturn 'text:vbarray'\n\t} else {\n\t\treturn 'text'\n\t}\n}\n\nvar ClientRequest = module.exports = function (opts) {\n\tvar self = this\n\tstream.Writable.call(self)\n\n\tself._opts = opts\n\tself._body = []\n\tself._headers = {}\n\tif (opts.auth)\n\t\tself.setHeader('Authorization', 'Basic ' + new Buffer(opts.auth).toString('base64'))\n\tObject.keys(opts.headers).forEach(function (name) {\n\t\tself.setHeader(name, opts.headers[name])\n\t})\n\n\tvar preferBinary\n\tvar useFetch = true\n\tif (opts.mode === 'disable-fetch' || ('requestTimeout' in opts && !capability.abortController)) {\n\t\t// If the use of XHR should be preferred. Not typically needed.\n\t\tuseFetch = false\n\t\tpreferBinary = true\n\t} else if (opts.mode === 'prefer-streaming') {\n\t\t// If streaming is a high priority but binary compatibility and\n\t\t// the accuracy of the 'content-type' header aren't\n\t\tpreferBinary = false\n\t} else if (opts.mode === 'allow-wrong-content-type') {\n\t\t// If streaming is more important than preserving the 'content-type' header\n\t\tpreferBinary = !capability.overrideMimeType\n\t} else if (!opts.mode || opts.mode === 'default' || opts.mode === 'prefer-fast') {\n\t\t// Use binary if text streaming may corrupt data or the content-type header, or for speed\n\t\tpreferBinary = true\n\t} else {\n\t\tthrow new Error('Invalid value for opts.mode')\n\t}\n\tself._mode = decideMode(preferBinary, useFetch)\n\tself._fetchTimer = null\n\n\tself.on('finish', function () {\n\t\tself._onFinish()\n\t})\n}\n\ninherits(ClientRequest, stream.Writable)\n\nClientRequest.prototype.setHeader = function (name, value) {\n\tvar self = this\n\tvar lowerName = name.toLowerCase()\n\t// This check is not necessary, but it prevents warnings from browsers about setting unsafe\n\t// headers. To be honest I'm not entirely sure hiding these warnings is a good thing, but\n\t// http-browserify did it, so I will too.\n\tif (unsafeHeaders.indexOf(lowerName) !== -1)\n\t\treturn\n\n\tself._headers[lowerName] = {\n\t\tname: name,\n\t\tvalue: value\n\t}\n}\n\nClientRequest.prototype.getHeader = function (name) {\n\tvar header = this._headers[name.toLowerCase()]\n\tif (header)\n\t\treturn header.value\n\treturn null\n}\n\nClientRequest.prototype.removeHeader = function (name) {\n\tvar self = this\n\tdelete self._headers[name.toLowerCase()]\n}\n\nClientRequest.prototype._onFinish = function () {\n\tvar self = this\n\n\tif (self._destroyed)\n\t\treturn\n\tvar opts = self._opts\n\n\tvar headersObj = self._headers\n\tvar body = null\n\tif (opts.method !== 'GET' && opts.method !== 'HEAD') {\n\t\tif (capability.arraybuffer) {\n\t\t\tbody = toArrayBuffer(Buffer.concat(self._body))\n\t\t} else if (capability.blobConstructor) {\n\t\t\tbody = new global.Blob(self._body.map(function (buffer) {\n\t\t\t\treturn toArrayBuffer(buffer)\n\t\t\t}), {\n\t\t\t\ttype: (headersObj['content-type'] || {}).value || ''\n\t\t\t})\n\t\t} else {\n\t\t\t// get utf8 string\n\t\t\tbody = Buffer.concat(self._body).toString()\n\t\t}\n\t}\n\n\t// create flattened list of headers\n\tvar headersList = []\n\tObject.keys(headersObj).forEach(function (keyName) {\n\t\tvar name = headersObj[keyName].name\n\t\tvar value = headersObj[keyName].value\n\t\tif (Array.isArray(value)) {\n\t\t\tvalue.forEach(function (v) {\n\t\t\t\theadersList.push([name, v])\n\t\t\t})\n\t\t} else {\n\t\t\theadersList.push([name, value])\n\t\t}\n\t})\n\n\tif (self._mode === 'fetch') {\n\t\tvar signal = null\n\t\tvar fetchTimer = null\n\t\tif (capability.abortController) {\n\t\t\tvar controller = new AbortController()\n\t\t\tsignal = controller.signal\n\t\t\tself._fetchAbortController = controller\n\n\t\t\tif ('requestTimeout' in opts && opts.requestTimeout !== 0) {\n\t\t\t\tself._fetchTimer = global.setTimeout(function () {\n\t\t\t\t\tself.emit('requestTimeout')\n\t\t\t\t\tif (self._fetchAbortController)\n\t\t\t\t\t\tself._fetchAbortController.abort()\n\t\t\t\t}, opts.requestTimeout)\n\t\t\t}\n\t\t}\n\n\t\tglobal.fetch(self._opts.url, {\n\t\t\tmethod: self._opts.method,\n\t\t\theaders: headersList,\n\t\t\tbody: body || undefined,\n\t\t\tmode: 'cors',\n\t\t\tcredentials: opts.withCredentials ? 'include' : 'same-origin',\n\t\t\tsignal: signal\n\t\t}).then(function (response) {\n\t\t\tself._fetchResponse = response\n\t\t\tself._connect()\n\t\t}, function (reason) {\n\t\t\tglobal.clearTimeout(self._fetchTimer)\n\t\t\tif (!self._destroyed)\n\t\t\t\tself.emit('error', reason)\n\t\t})\n\t} else {\n\t\tvar xhr = self._xhr = new global.XMLHttpRequest()\n\t\ttry {\n\t\t\txhr.open(self._opts.method, self._opts.url, true)\n\t\t} catch (err) {\n\t\t\tprocess.nextTick(function () {\n\t\t\t\tself.emit('error', err)\n\t\t\t})\n\t\t\treturn\n\t\t}\n\n\t\t// Can't set responseType on really old browsers\n\t\tif ('responseType' in xhr)\n\t\t\txhr.responseType = self._mode.split(':')[0]\n\n\t\tif ('withCredentials' in xhr)\n\t\t\txhr.withCredentials = !!opts.withCredentials\n\n\t\tif (self._mode === 'text' && 'overrideMimeType' in xhr)\n\t\t\txhr.overrideMimeType('text/plain; charset=x-user-defined')\n\n\t\tif ('requestTimeout' in opts) {\n\t\t\txhr.timeout = opts.requestTimeout\n\t\t\txhr.ontimeout = function () {\n\t\t\t\tself.emit('requestTimeout')\n\t\t\t}\n\t\t}\n\n\t\theadersList.forEach(function (header) {\n\t\t\txhr.setRequestHeader(header[0], header[1])\n\t\t})\n\n\t\tself._response = null\n\t\txhr.onreadystatechange = function () {\n\t\t\tswitch (xhr.readyState) {\n\t\t\t\tcase rStates.LOADING:\n\t\t\t\tcase rStates.DONE:\n\t\t\t\t\tself._onXHRProgress()\n\t\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\t// Necessary for streaming in Firefox, since xhr.response is ONLY defined\n\t\t// in onprogress, not in onreadystatechange with xhr.readyState = 3\n\t\tif (self._mode === 'moz-chunked-arraybuffer') {\n\t\t\txhr.onprogress = function () {\n\t\t\t\tself._onXHRProgress()\n\t\t\t}\n\t\t}\n\n\t\txhr.onerror = function () {\n\t\t\tif (self._destroyed)\n\t\t\t\treturn\n\t\t\tself.emit('error', new Error('XHR error'))\n\t\t}\n\n\t\ttry {\n\t\t\txhr.send(body)\n\t\t} catch (err) {\n\t\t\tprocess.nextTick(function () {\n\t\t\t\tself.emit('error', err)\n\t\t\t})\n\t\t\treturn\n\t\t}\n\t}\n}\n\n/**\n * Checks if xhr.status is readable and non-zero, indicating no error.\n * Even though the spec says it should be available in readyState 3,\n * accessing it throws an exception in IE8\n */\nfunction statusValid (xhr) {\n\ttry {\n\t\tvar status = xhr.status\n\t\treturn (status !== null && status !== 0)\n\t} catch (e) {\n\t\treturn false\n\t}\n}\n\nClientRequest.prototype._onXHRProgress = function () {\n\tvar self = this\n\n\tif (!statusValid(self._xhr) || self._destroyed)\n\t\treturn\n\n\tif (!self._response)\n\t\tself._connect()\n\n\tself._response._onXHRProgress()\n}\n\nClientRequest.prototype._connect = function () {\n\tvar self = this\n\n\tif (self._destroyed)\n\t\treturn\n\n\tself._response = new IncomingMessage(self._xhr, self._fetchResponse, self._mode, self._fetchTimer)\n\tself._response.on('error', function(err) {\n\t\tself.emit('error', err)\n\t})\n\n\tself.emit('response', self._response)\n}\n\nClientRequest.prototype._write = function (chunk, encoding, cb) {\n\tvar self = this\n\n\tself._body.push(chunk)\n\tcb()\n}\n\nClientRequest.prototype.abort = ClientRequest.prototype.destroy = function () {\n\tvar self = this\n\tself._destroyed = true\n\tglobal.clearTimeout(self._fetchTimer)\n\tif (self._response)\n\t\tself._response._destroyed = true\n\tif (self._xhr)\n\t\tself._xhr.abort()\n\telse if (self._fetchAbortController)\n\t\tself._fetchAbortController.abort()\n}\n\nClientRequest.prototype.end = function (data, encoding, cb) {\n\tvar self = this\n\tif (typeof data === 'function') {\n\t\tcb = data\n\t\tdata = undefined\n\t}\n\n\tstream.Writable.prototype.end.call(self, data, encoding, cb)\n}\n\nClientRequest.prototype.flushHeaders = function () {}\nClientRequest.prototype.setTimeout = function () {}\nClientRequest.prototype.setNoDelay = function () {}\nClientRequest.prototype.setSocketKeepAlive = function () {}\n\n// Taken from http://www.w3.org/TR/XMLHttpRequest/#the-setrequestheader%28%29-method\nvar unsafeHeaders = [\n\t'accept-charset',\n\t'accept-encoding',\n\t'access-control-request-headers',\n\t'access-control-request-method',\n\t'connection',\n\t'content-length',\n\t'cookie',\n\t'cookie2',\n\t'date',\n\t'dnt',\n\t'expect',\n\t'host',\n\t'keep-alive',\n\t'origin',\n\t'referer',\n\t'te',\n\t'trailer',\n\t'transfer-encoding',\n\t'upgrade',\n\t'via'\n]\n","module.exports = extend\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction extend() {\n    var target = {}\n\n    for (var i = 0; i < arguments.length; i++) {\n        var source = arguments[i]\n\n        for (var key in source) {\n            if (hasOwnProperty.call(source, key)) {\n                target[key] = source[key]\n            }\n        }\n    }\n\n    return target\n}\n","module.exports = {\n  \"100\": \"Continue\",\n  \"101\": \"Switching Protocols\",\n  \"102\": \"Processing\",\n  \"200\": \"OK\",\n  \"201\": \"Created\",\n  \"202\": \"Accepted\",\n  \"203\": \"Non-Authoritative Information\",\n  \"204\": \"No Content\",\n  \"205\": \"Reset Content\",\n  \"206\": \"Partial Content\",\n  \"207\": \"Multi-Status\",\n  \"208\": \"Already Reported\",\n  \"226\": \"IM Used\",\n  \"300\": \"Multiple Choices\",\n  \"301\": \"Moved Permanently\",\n  \"302\": \"Found\",\n  \"303\": \"See Other\",\n  \"304\": \"Not Modified\",\n  \"305\": \"Use Proxy\",\n  \"307\": \"Temporary Redirect\",\n  \"308\": \"Permanent Redirect\",\n  \"400\": \"Bad Request\",\n  \"401\": \"Unauthorized\",\n  \"402\": \"Payment Required\",\n  \"403\": \"Forbidden\",\n  \"404\": \"Not Found\",\n  \"405\": \"Method Not Allowed\",\n  \"406\": \"Not Acceptable\",\n  \"407\": \"Proxy Authentication Required\",\n  \"408\": \"Request Timeout\",\n  \"409\": \"Conflict\",\n  \"410\": \"Gone\",\n  \"411\": \"Length Required\",\n  \"412\": \"Precondition Failed\",\n  \"413\": \"Payload Too Large\",\n  \"414\": \"URI Too Long\",\n  \"415\": \"Unsupported Media Type\",\n  \"416\": \"Range Not Satisfiable\",\n  \"417\": \"Expectation Failed\",\n  \"418\": \"I'm a teapot\",\n  \"421\": \"Misdirected Request\",\n  \"422\": \"Unprocessable Entity\",\n  \"423\": \"Locked\",\n  \"424\": \"Failed Dependency\",\n  \"425\": \"Unordered Collection\",\n  \"426\": \"Upgrade Required\",\n  \"428\": \"Precondition Required\",\n  \"429\": \"Too Many Requests\",\n  \"431\": \"Request Header Fields Too Large\",\n  \"451\": \"Unavailable For Legal Reasons\",\n  \"500\": \"Internal Server Error\",\n  \"501\": \"Not Implemented\",\n  \"502\": \"Bad Gateway\",\n  \"503\": \"Service Unavailable\",\n  \"504\": \"Gateway Timeout\",\n  \"505\": \"HTTP Version Not Supported\",\n  \"506\": \"Variant Also Negotiates\",\n  \"507\": \"Insufficient Storage\",\n  \"508\": \"Loop Detected\",\n  \"509\": \"Bandwidth Limit Exceeded\",\n  \"510\": \"Not Extended\",\n  \"511\": \"Network Authentication Required\"\n}\n","/*! https://mths.be/punycode v1.4.1 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow new RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.4.1',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) {\n\t\t\t// in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else {\n\t\t\t// in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n","'use strict';\n\nmodule.exports = {\n  isString: function(arg) {\n    return typeof(arg) === 'string';\n  },\n  isObject: function(arg) {\n    return typeof(arg) === 'object' && arg !== null;\n  },\n  isNull: function(arg) {\n    return arg === null;\n  },\n  isNullOrUndefined: function(arg) {\n    return arg == null;\n  }\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar punycode = require('punycode');\nvar util = require('./util');\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // Special case for a simple path URL\n    simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n    hostEndingChars = ['/', '?', '#'],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n    querystring = require('querystring');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && util.isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  if (!util.isString(url)) {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  // Copy chrome, IE, opera backslash-handling behavior.\n  // Back slashes before the query string get converted to forward slashes\n  // See: https://code.google.com/p/chromium/issues/detail?id=25916\n  var queryIndex = url.indexOf('?'),\n      splitter =\n          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',\n      uSplit = url.split(splitter),\n      slashRegex = /\\\\/g;\n  uSplit[0] = uSplit[0].replace(slashRegex, '/');\n  url = uSplit.join(splitter);\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.path = rest;\n      this.href = rest;\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n        if (parseQueryString) {\n          this.query = querystring.parse(this.search.substr(1));\n        } else {\n          this.query = this.search.substr(1);\n        }\n      } else if (parseQueryString) {\n        this.search = '';\n        this.query = {};\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a punycoded representation of \"domain\".\n      // It only converts parts of the domain name that\n      // have non-ASCII characters, i.e. it doesn't matter if\n      // you call it with a domain that already is ASCII-only.\n      this.hostname = punycode.toASCII(this.hostname);\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      if (rest.indexOf(ae) === -1)\n        continue;\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) this.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  //to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (util.isString(obj)) obj = urlParse(obj);\n  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n  return obj.format();\n}\n\nUrl.prototype.format = function() {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n      pathname = this.pathname || '',\n      hash = this.hash || '',\n      host = false,\n      query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ?\n        this.hostname :\n        '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query &&\n      util.isObject(this.query) &&\n      Object.keys(this.query).length) {\n    query = querystring.stringify(this.query);\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (this.slashes ||\n      (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (util.isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  var tkeys = Object.keys(this);\n  for (var tk = 0; tk < tkeys.length; tk++) {\n    var tkey = tkeys[tk];\n    result[tkey] = this[tkey];\n  }\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    var rkeys = Object.keys(relative);\n    for (var rk = 0; rk < rkeys.length; rk++) {\n      var rkey = rkeys[rk];\n      if (rkey !== 'protocol')\n        result[rkey] = relative[rkey];\n    }\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n        result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      var keys = Object.keys(relative);\n      for (var v = 0; v < keys.length; v++) {\n        var k = keys[v];\n        result[k] = relative[k];\n      }\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n      isRelAbs = (\n          relative.host ||\n          relative.pathname && relative.pathname.charAt(0) === '/'\n      ),\n      mustEndAbs = (isRelAbs || isSourceAbs ||\n                    (result.host && relative.pathname)),\n      removeAllDots = mustEndAbs,\n      srcPath = result.pathname && result.pathname.split('/') || [],\n      relPath = relative.pathname && relative.pathname.split('/') || [],\n      psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n                  relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n                      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!util.isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especially happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n      (result.host || relative.host || srcPath.length > 1) &&\n      (last === '.' || last === '..') || last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n      (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n                                    srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especially happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                     result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n                  (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) this.hostname = host;\n};\n","var ClientRequest = require('./lib/request')\nvar response = require('./lib/response')\nvar extend = require('xtend')\nvar statusCodes = require('builtin-status-codes')\nvar url = require('url')\n\nvar http = exports\n\nhttp.request = function (opts, cb) {\n\tif (typeof opts === 'string')\n\t\topts = url.parse(opts)\n\telse\n\t\topts = extend(opts)\n\n\t// Normally, the page is loaded from http or https, so not specifying a protocol\n\t// will result in a (valid) protocol-relative url. However, this won't work if\n\t// the protocol is something else, like 'file:'\n\tvar defaultProtocol = global.location.protocol.search(/^https?:$/) === -1 ? 'http:' : ''\n\n\tvar protocol = opts.protocol || defaultProtocol\n\tvar host = opts.hostname || opts.host\n\tvar port = opts.port\n\tvar path = opts.path || '/'\n\n\t// Necessary for IPv6 addresses\n\tif (host && host.indexOf(':') !== -1)\n\t\thost = '[' + host + ']'\n\n\t// This may be a relative url. The browser should always be able to interpret it correctly.\n\topts.url = (host ? (protocol + '//' + host) : '') + (port ? ':' + port : '') + path\n\topts.method = (opts.method || 'GET').toUpperCase()\n\topts.headers = opts.headers || {}\n\n\t// Also valid opts.auth, opts.mode\n\n\tvar req = new ClientRequest(opts)\n\tif (cb)\n\t\treq.on('response', cb)\n\treturn req\n}\n\nhttp.get = function get (opts, cb) {\n\tvar req = http.request(opts, cb)\n\treq.end()\n\treturn req\n}\n\nhttp.ClientRequest = ClientRequest\nhttp.IncomingMessage = response.IncomingMessage\n\nhttp.Agent = function () {}\nhttp.Agent.defaultMaxSockets = 4\n\nhttp.globalAgent = new http.Agent()\n\nhttp.STATUS_CODES = statusCodes\n\nhttp.METHODS = [\n\t'CHECKOUT',\n\t'CONNECT',\n\t'COPY',\n\t'DELETE',\n\t'GET',\n\t'HEAD',\n\t'LOCK',\n\t'M-SEARCH',\n\t'MERGE',\n\t'MKACTIVITY',\n\t'MKCOL',\n\t'MOVE',\n\t'NOTIFY',\n\t'OPTIONS',\n\t'PATCH',\n\t'POST',\n\t'PROPFIND',\n\t'PROPPATCH',\n\t'PURGE',\n\t'PUT',\n\t'REPORT',\n\t'SEARCH',\n\t'SUBSCRIBE',\n\t'TRACE',\n\t'UNLOCK',\n\t'UNSUBSCRIBE'\n]","var http = require('http')\nvar url = require('url')\n\nvar https = module.exports\n\nfor (var key in http) {\n  if (http.hasOwnProperty(key)) https[key] = http[key]\n}\n\nhttps.request = function (params, cb) {\n  params = validateParams(params)\n  return http.request.call(this, params, cb)\n}\n\nhttps.get = function (params, cb) {\n  params = validateParams(params)\n  return http.get.call(this, params, cb)\n}\n\nfunction validateParams (params) {\n  if (typeof params === 'string') {\n    params = url.parse(params)\n  }\n  if (!params.protocol) {\n    params.protocol = 'https:'\n  }\n  if (params.protocol !== 'https:') {\n    throw new Error('Protocol \"' + params.protocol + '\" not supported. Expected \"https:\"')\n  }\n  return params\n}\n","/*!!\n flipnote.js v5.1.1 (web build)\n A JavaScript library for parsing, converting, and in-browser playback of the proprietary animation formats used by Nintendo's Flipnote Studio and Flipnote Studio 3D apps.\n Flipnote Studio is (c) Nintendo Co., Ltd. This project isn't affiliated with or endorsed by them in any way.\n 2018 - 2021 James Daniel\n https://flipnote.js.org\n Keep on Flipnoting!\n*/\n/** @internal */\r\nclass ByteArray {\r\n    constructor() {\r\n        this.pageSize = ByteArray.pageSize;\r\n        this.currPageIndex = -1;\r\n        this.pages = [];\r\n        this.pointer = 0;\r\n        this.newPage();\r\n    }\r\n    newPage() {\r\n        this.pages[++this.currPageIndex] = new Uint8Array(this.pageSize);\r\n        this.currPage = this.pages[this.currPageIndex];\r\n        this.pointer = 0;\r\n    }\r\n    getData() {\r\n        const data = new Uint8Array(this.currPageIndex * this.pageSize + this.pointer);\r\n        for (let index = 0; index < this.pages.length; index++) {\r\n            const page = this.pages[index];\r\n            if (index === this.currPageIndex)\r\n                data.set(page.slice(0, this.pointer), index * this.pageSize);\r\n            else\r\n                data.set(page, index * this.pageSize);\r\n        }\r\n        return data;\r\n    }\r\n    getBuffer() {\r\n        const data = this.getData();\r\n        return data.buffer;\r\n    }\r\n    writeByte(val) {\r\n        if (this.pointer >= this.pageSize)\r\n            this.newPage();\r\n        this.currPage[this.pointer++] = val;\r\n    }\r\n    writeBytes(bytes, offset, length) {\r\n        for (let l = length || bytes.length, i = offset || 0; i < l; i++)\r\n            this.writeByte(bytes[i]);\r\n    }\r\n}\r\nByteArray.pageSize = 2048;\n\n/**\r\n * Wrapper around the DataView API to keep track of the offset into the data\r\n * also provides some utils for reading ascii strings etc\r\n * @internal\r\n */\r\nclass DataStream {\r\n    constructor(arrayBuffer) {\r\n        this.buffer = arrayBuffer;\r\n        this.data = new DataView(arrayBuffer);\r\n        this.pointer = 0;\r\n    }\r\n    get bytes() {\r\n        return new Uint8Array(this.buffer);\r\n    }\r\n    get byteLength() {\r\n        return this.data.byteLength;\r\n    }\r\n    seek(offset, whence) {\r\n        switch (whence) {\r\n            case 2 /* End */:\r\n                this.pointer = this.data.byteLength + offset;\r\n                break;\r\n            case 1 /* Current */:\r\n                this.pointer += offset;\r\n                break;\r\n            case 0 /* Begin */:\r\n            default:\r\n                this.pointer = offset;\r\n                break;\r\n        }\r\n    }\r\n    readUint8() {\r\n        const val = this.data.getUint8(this.pointer);\r\n        this.pointer += 1;\r\n        return val;\r\n    }\r\n    writeUint8(value) {\r\n        this.data.setUint8(this.pointer, value);\r\n        this.pointer += 1;\r\n    }\r\n    readInt8() {\r\n        const val = this.data.getInt8(this.pointer);\r\n        this.pointer += 1;\r\n        return val;\r\n    }\r\n    writeInt8(value) {\r\n        this.data.setInt8(this.pointer, value);\r\n        this.pointer += 1;\r\n    }\r\n    readUint16(littleEndian = true) {\r\n        const val = this.data.getUint16(this.pointer, littleEndian);\r\n        this.pointer += 2;\r\n        return val;\r\n    }\r\n    writeUint16(value, littleEndian = true) {\r\n        this.data.setUint16(this.pointer, value, littleEndian);\r\n        this.pointer += 2;\r\n    }\r\n    readInt16(littleEndian = true) {\r\n        const val = this.data.getInt16(this.pointer, littleEndian);\r\n        this.pointer += 2;\r\n        return val;\r\n    }\r\n    writeInt16(value, littleEndian = true) {\r\n        this.data.setInt16(this.pointer, value, littleEndian);\r\n        this.pointer += 2;\r\n    }\r\n    readUint32(littleEndian = true) {\r\n        const val = this.data.getUint32(this.pointer, littleEndian);\r\n        this.pointer += 4;\r\n        return val;\r\n    }\r\n    writeUint32(value, littleEndian = true) {\r\n        this.data.setUint32(this.pointer, value, littleEndian);\r\n        this.pointer += 4;\r\n    }\r\n    readInt32(littleEndian = true) {\r\n        const val = this.data.getInt32(this.pointer, littleEndian);\r\n        this.pointer += 4;\r\n        return val;\r\n    }\r\n    writeInt32(value, littleEndian = true) {\r\n        this.data.setInt32(this.pointer, value, littleEndian);\r\n        this.pointer += 4;\r\n    }\r\n    readBytes(count) {\r\n        const bytes = new Uint8Array(this.data.buffer, this.pointer, count);\r\n        this.pointer += bytes.byteLength;\r\n        return bytes;\r\n    }\r\n    writeBytes(bytes) {\r\n        bytes.forEach((byte) => this.writeUint8(byte));\r\n    }\r\n    readHex(count, reverse = false) {\r\n        const bytes = this.readBytes(count);\r\n        let hex = [];\r\n        for (let i = 0; i < bytes.length; i++) {\r\n            hex.push(bytes[i].toString(16).padStart(2, '0'));\r\n        }\r\n        if (reverse)\r\n            hex.reverse();\r\n        return hex.join('').toUpperCase();\r\n    }\r\n    readChars(count) {\r\n        const chars = this.readBytes(count);\r\n        let str = '';\r\n        for (let i = 0; i < chars.length; i++) {\r\n            const char = chars[i];\r\n            if (char === 0)\r\n                break;\r\n            str += String.fromCharCode(char);\r\n        }\r\n        return str;\r\n    }\r\n    writeChars(string) {\r\n        for (let i = 0; i < string.length; i++) {\r\n            const char = string.charCodeAt(i);\r\n            this.writeUint8(char);\r\n        }\r\n    }\r\n    readWideChars(count) {\r\n        const chars = new Uint16Array(this.data.buffer, this.pointer, count);\r\n        let str = '';\r\n        for (let i = 0; i < chars.length; i++) {\r\n            const char = chars[i];\r\n            if (char == 0)\r\n                break;\r\n            str += String.fromCharCode(char);\r\n        }\r\n        this.pointer += chars.byteLength;\r\n        return str;\r\n    }\r\n}\n\n/**\r\n * Assert condition is true\r\n * @internal\r\n */\r\nfunction assert(condition, errMsg = 'Assert failed') {\r\n    if (!condition) {\r\n        console.trace(errMsg);\r\n        throw new Error(errMsg);\r\n    }\r\n}\r\n/**\r\n * Assert that a numberical value is between upper and lower bounds\r\n * @internal\r\n */\r\nfunction assertRange(value, min, max, name = '') {\r\n    assert(value >= min && value <= max, `Value ${name} should be between ${min} and ${max}`);\r\n}\n\n/**\r\n * Utils to find out information about the current code execution environment\r\n */\r\n/**\r\n * Is the code running in a browser environment?\r\n * @internal\r\n */\r\nconst isBrowser = typeof window !== 'undefined'\r\n    && typeof window.document !== 'undefined';\r\n/**\r\n * Assert that the current environment should support browser APIs\r\n * @internal\r\n */\r\nfunction assertBrowserEnv() {\r\n    return assert(isBrowser, 'This feature is only available in browser environments');\r\n}\r\n/**\r\n * Is the code running in a Node environment?\r\n * @internal\r\n */\r\nconst isNode = typeof process !== 'undefined'\r\n    && process.versions != null\r\n    && process.versions.node != null;\r\n/**\r\n * Assert that the current environment should support NodeJS APIs\r\n * @internal\r\n */\r\nfunction assertNodeEnv() {\r\n    return assert(isNode, 'This feature is only available in NodeJS environments');\r\n}\n\n/**\r\n * Number of seconds between the UNIX timestamp epoch (jan 1 1970) and the Nintendo timestamp epoch (jan 1 2000)\r\n * @internal\r\n */\r\nconst UNIX_EPOCH_2000 = 946684800;\r\n/**\r\n * Convert a Nintendo DS or 3DS timestamp int to a JS Date object\r\n * @internal\r\n */\r\nfunction dateFromNintendoTimestamp(timestamp) {\r\n    return new Date((timestamp + UNIX_EPOCH_2000) * 1000);\r\n}\r\n/**\r\n * Get the duration (in seconds) of a number of framres running at a specified framerate\r\n * @internal\r\n */\r\nfunction timeGetNoteDuration(frameCount, framerate) {\r\n    // multiply and devide by 100 to get around floating precision issues\r\n    return ((frameCount * 100) * (1 / framerate)) / 100;\r\n}\n\n/** @internal */\r\nconst saveData = (function () {\r\n    if (!isBrowser) {\r\n        return function () { };\r\n    }\r\n    var a = document.createElement(\"a\");\r\n    // document.body.appendChild(a);\r\n    // a.style.display = \"none\";\r\n    return function (blob, filename) {\r\n        const url = window.URL.createObjectURL(blob);\r\n        a.href = url;\r\n        a.download = filename;\r\n        a.click();\r\n        window.URL.revokeObjectURL(url);\r\n    };\r\n})();\n\n/** Identifies which animation format a Flipnote uses */\r\nvar FlipnoteFormat;\r\n(function (FlipnoteFormat) {\r\n    /** Animation format used by Flipnote Studio (Nintendo DSiWare) */\r\n    FlipnoteFormat[\"PPM\"] = \"PPM\";\r\n    /** Animation format used by Flipnote Studio 3D (Nintendo 3DS) */\r\n    FlipnoteFormat[\"KWZ\"] = \"KWZ\";\r\n})(FlipnoteFormat || (FlipnoteFormat = {}));\r\n/** Identifies a Flipnote audio track type */\r\nvar FlipnoteAudioTrack;\r\n(function (FlipnoteAudioTrack) {\r\n    /** Background music track */\r\n    FlipnoteAudioTrack[FlipnoteAudioTrack[\"BGM\"] = 0] = \"BGM\";\r\n    /** Sound effect 1 track */\r\n    FlipnoteAudioTrack[FlipnoteAudioTrack[\"SE1\"] = 1] = \"SE1\";\r\n    /** Sound effect 2 track */\r\n    FlipnoteAudioTrack[FlipnoteAudioTrack[\"SE2\"] = 2] = \"SE2\";\r\n    /** Sound effect 3 track */\r\n    FlipnoteAudioTrack[FlipnoteAudioTrack[\"SE3\"] = 3] = \"SE3\";\r\n    /** Sound effect 4 track (only used by KWZ files) */\r\n    FlipnoteAudioTrack[FlipnoteAudioTrack[\"SE4\"] = 4] = \"SE4\";\r\n})(FlipnoteAudioTrack || (FlipnoteAudioTrack = {}));\r\n/**\r\n * Base Flipnote parser class\r\n *\r\n * This doesn't implement any parsing functionality itself,\r\n * it just provides a consistent API for every format parser to implement.\r\n * @category File Parser\r\n*/\r\nclass FlipnoteParser extends DataStream {\r\n    /**\r\n     * Does an audio track exist in the Flipnote?\r\n     * @category Audio\r\n    */\r\n    hasAudioTrack(trackId) {\r\n        if (this.soundMeta.hasOwnProperty(trackId) && this.soundMeta[trackId].length > 0)\r\n            return true;\r\n        return false;\r\n    }\r\n}\n\n/**\r\n * Loader for web url strings (Browser only)\r\n * @internal\r\n */\r\nconst webUrlLoader = {\r\n    matches: function (source) {\r\n        return isBrowser && typeof source === 'string';\r\n    },\r\n    load: function (source, resolve, reject) {\r\n        const xhr = new XMLHttpRequest();\r\n        xhr.open('GET', source, true);\r\n        xhr.responseType = 'arraybuffer';\r\n        xhr.onreadystatechange = function (e) {\r\n            if (xhr.readyState === 4) {\r\n                if (xhr.status >= 200 && xhr.status < 300)\r\n                    resolve(xhr.response);\r\n                else\r\n                    reject({\r\n                        type: 'httpError',\r\n                        status: xhr.status,\r\n                        statusText: xhr.statusText\r\n                    });\r\n            }\r\n        };\r\n        xhr.send(null);\r\n    }\r\n};\n\n/**\r\n * Loader for web url strings (Node only)\r\n * @internal\r\n */\r\nconst nodeUrlLoader = {\r\n    matches: function (source) {\r\n        return isNode && typeof source === 'string';\r\n    },\r\n    load: function (source, resolve, reject) {\r\n        const http = require('https');\r\n        http.get(source, (res) => {\r\n            const chunks = [];\r\n            res.on('data', chunk => chunks.push(chunk));\r\n            res.on('end', () => {\r\n                const buffer = Buffer.concat(chunks);\r\n                resolve(buffer.buffer);\r\n            });\r\n            res.on('error', (err) => reject(err));\r\n        });\r\n    }\r\n};\n\n/**\r\n * Loader for File objects (browser only)\r\n * @internal\r\n */\r\nconst fileLoader = {\r\n    matches: function (source) {\r\n        return isBrowser && typeof File !== 'undefined' && source instanceof File;\r\n    },\r\n    load: function (source, resolve, reject) {\r\n        assert(typeof FileReader !== 'undefined');\r\n        const reader = new FileReader();\r\n        reader.onload = (event) => {\r\n            resolve(reader.result);\r\n        };\r\n        reader.onerror = (event) => {\r\n            reject({ type: 'fileReadError' });\r\n        };\r\n        reader.readAsArrayBuffer(source);\r\n    }\r\n};\n\n/**\r\n * Loader for Buffer objects (Node only)\r\n * @internal\r\n */\r\nconst nodeBufferLoader = {\r\n    matches: function (source) {\r\n        return isNode && (source instanceof Buffer);\r\n    },\r\n    load: function (source, resolve, reject) {\r\n        resolve(source.buffer);\r\n    }\r\n};\n\n/**\r\n * Loader for ArrayBuffer objects\r\n * @internal\r\n */\r\nconst arrayBufferLoader = {\r\n    matches: function (source) {\r\n        return (source instanceof ArrayBuffer);\r\n    },\r\n    load: function (source, resolve, reject) {\r\n        resolve(source);\r\n    }\r\n};\n\n/** @internal */\r\nconst loaders = [\r\n    webUrlLoader,\r\n    nodeUrlLoader,\r\n    fileLoader,\r\n    nodeBufferLoader,\r\n    arrayBufferLoader\r\n];\r\n/** @internal */\r\nfunction loadSource(source) {\r\n    return new Promise((resolve, reject) => {\r\n        for (let i = 0; i < loaders.length; i++) {\r\n            const loader = loaders[i];\r\n            if (loader.matches(source))\r\n                return loader.load(source, resolve, reject);\r\n        }\r\n        reject('No loader available for source type');\r\n    });\r\n}\n\n/** @internal */\r\nfunction clamp(n, l, h) {\r\n    if (n < l)\r\n        return l;\r\n    if (n > h)\r\n        return h;\r\n    return n;\r\n}\r\n/**\r\n * Zero-order hold interpolation\r\n * Credit to SimonTime for the original C version\r\n * @internal\r\n */\r\nfunction pcmDsAudioResample(src, srcFreq, dstFreq) {\r\n    const srcDuration = src.length / srcFreq;\r\n    const dstLength = srcDuration * dstFreq;\r\n    const dst = new Int16Array(dstLength);\r\n    const adjFreq = (srcFreq) / dstFreq;\r\n    for (let n = 0; n < dst.length; n++) {\r\n        dst[n] = src[Math.floor(n * adjFreq)];\r\n    }\r\n    return dst;\r\n}\r\n/** @internal */\r\nconst ADPCM_INDEX_TABLE_2BIT = new Int8Array([\r\n    -1, 2, -1, 2\r\n]);\r\n/** @internal */\r\nconst ADPCM_INDEX_TABLE_4BIT = new Int8Array([\r\n    -1, -1, -1, -1, 2, 4, 6, 8,\r\n    -1, -1, -1, -1, 2, 4, 6, 8\r\n]);\r\n/** @internal */\r\nconst ADPCM_STEP_TABLE = new Int16Array([\r\n    7, 8, 9, 10, 11, 12, 13, 14, 16, 17,\r\n    19, 21, 23, 25, 28, 31, 34, 37, 41, 45,\r\n    50, 55, 60, 66, 73, 80, 88, 97, 107, 118,\r\n    130, 143, 157, 173, 190, 209, 230, 253, 279, 307,\r\n    337, 371, 408, 449, 494, 544, 598, 658, 724, 796,\r\n    876, 963, 1060, 1166, 1282, 1411, 1552, 1707, 1878, 2066,\r\n    2272, 2499, 2749, 3024, 3327, 3660, 4026, 4428, 4871, 5358,\r\n    5894, 6484, 7132, 7845, 8630, 9493, 10442, 11487, 12635, 13899,\r\n    15289, 16818, 18500, 20350, 22385, 24623, 27086, 29794, 32767, 0\r\n]);\r\n/**\r\n * Get a ratio of how many audio samples hit the pcm_s16_le clipping bounds\r\n * This can be used to detect corrupted audio\r\n * @internal\r\n */\r\nfunction pcmGetClippingRatio(src) {\r\n    const numSamples = src.length;\r\n    let numClippedSamples = 0;\r\n    for (let i = 0; i < numSamples; i++) {\r\n        const sample = src[i];\r\n        if (sample == -32768 || sample == 32767)\r\n            numClippedSamples += 1;\r\n    }\r\n    return numClippedSamples / numSamples;\r\n}\n\n/**\r\n * PPM decoder\r\n * Reads frames, audio, and metadata from Flipnote Studio PPM files\r\n * Based on my Python PPM decoder implementation (https://github.com/jaames/flipnote-tools)\r\n *\r\n * Credits:\r\n *  PPM format reverse-engineering and documentation:\r\n *   - bricklife (http://ugomemo.g.hatena.ne.jp/bricklife/20090307/1236391313)\r\n *   - mirai-iro (http://mirai-iro.hatenablog.jp/entry/20090116/ugomemo_ppm)\r\n *   - harimau_tigris (http://ugomemo.g.hatena.ne.jp/harimau_tigris)\r\n *   - steven (http://www.dsibrew.org/wiki/User:Steven)\r\n *   - yellows8 (http://www.dsibrew.org/wiki/User:Yellows8)\r\n *   - PBSDS (https://github.com/pbsds)\r\n *   - jaames (https://github.com/jaames)\r\n *  Identifying the PPM sound codec:\r\n *   - Midmad from Hatena Haiku\r\n *   - WDLMaster from hcs64.com\r\n *  Helping me to identify issues with the Python decoder that this is based on:\r\n *   - Austin Burk (https://sudomemo.net)\r\n *\r\n *  Lastly, a huge thanks goes to Nintendo for creating Flipnote Studio,\r\n *  and to Hatena for providing the Flipnote Hatena online service, both of which inspired so many c:\r\n*/\r\n/**\r\n * PPM framerates in frames per second, indexed by the in-app frame speed.\r\n * Frame speed 0 is never noramally used\r\n */\r\nconst PPM_FRAMERATES = [0.5, 0.5, 1, 2, 4, 6, 12, 20, 30];\r\n/**\r\n * PPM color defines (red, green, blue, alpha)\r\n */\r\nconst PPM_PALETTE = {\r\n    WHITE: [0xff, 0xff, 0xff, 0xff],\r\n    BLACK: [0x0e, 0x0e, 0x0e, 0xff],\r\n    RED: [0xff, 0x2a, 0x2a, 0xff],\r\n    BLUE: [0x0a, 0x39, 0xff, 0xff]\r\n};\r\n/**\r\n * Parser class for (DSiWare) Flipnote Studio's PPM animation format.\r\n *\r\n * Format docs: https://github.com/Flipnote-Collective/flipnote-studio-docs/wiki/PPM-format\r\n * @category File Parser\r\n */\r\nclass PpmParser extends FlipnoteParser {\r\n    /**\r\n     * Create a new PPM file parser instance\r\n     * @param arrayBuffer an ArrayBuffer containing file data\r\n     * @param settings parser settings (none currently implemented)\r\n     */\r\n    constructor(arrayBuffer, settings = {}) {\r\n        super(arrayBuffer);\r\n        /** File format type, reflects {@link PpmParser.format} */\r\n        this.format = FlipnoteFormat.PPM;\r\n        /** Animation frame width, reflects {@link PpmParser.width} */\r\n        this.width = PpmParser.width;\r\n        /** Animation frame height, reflects {@link PpmParser.height} */\r\n        this.height = PpmParser.height;\r\n        /** Number of animation frame layers, reflects {@link PpmParser.numLayers} */\r\n        this.numLayers = PpmParser.numLayers;\r\n        /** Audio track base sample rate, reflects {@link PpmParser.rawSampleRate} */\r\n        this.rawSampleRate = PpmParser.rawSampleRate;\r\n        /** Audio output sample rate, reflects {@link PpmParser.sampleRate} */\r\n        this.sampleRate = PpmParser.sampleRate;\r\n        /** Global animation frame color palette, reflects {@link PpmParser.globalPalette} */\r\n        this.globalPalette = PpmParser.globalPalette;\r\n        this.prevDecodedFrame = null;\r\n        this.decodeHeader();\r\n        this.decodeAnimationHeader();\r\n        this.decodeSoundHeader();\r\n        // this is always true afaik, it's likely just a remnant from development\r\n        // doesn't hurt to be accurate though...\r\n        if (((this.version >> 4) & 0xf) !== 0) {\r\n            this.decodeMeta();\r\n        }\r\n        // create image buffers\r\n        this.layerBuffers = [\r\n            new Uint8Array(PpmParser.width * PpmParser.height),\r\n            new Uint8Array(PpmParser.width * PpmParser.height)\r\n        ];\r\n        this.prevLayerBuffers = [\r\n            new Uint8Array(PpmParser.width * PpmParser.height),\r\n            new Uint8Array(PpmParser.width * PpmParser.height)\r\n        ];\r\n        this.lineEncodingBuffers = [\r\n            new Uint8Array(PpmParser.height),\r\n            new Uint8Array(PpmParser.height)\r\n        ];\r\n        this.prevDecodedFrame = null;\r\n    }\r\n    static validateFSID(fsid) {\r\n        return /[0159]{1}[0-9A-F]{6}0[0-9A-F]{8}/.test(fsid);\r\n    }\r\n    static validateFilename(filename) {\r\n        return /[0-9A-F]{6}_[0-9A-F]{13}_[0-9]{3}/.test(filename);\r\n    }\r\n    decodeHeader() {\r\n        assert(16 < this.byteLength);\r\n        this.seek(4);\r\n        // decode header\r\n        // https://github.com/Flipnote-Collective/flipnote-studio-docs/wiki/PPM-format#header\r\n        this.frameDataLength = this.readUint32();\r\n        this.soundDataLength = this.readUint32();\r\n        this.frameCount = this.readUint16() + 1;\r\n        this.version = this.readUint16();\r\n    }\r\n    readFilename() {\r\n        const mac = this.readHex(3);\r\n        const random = this.readChars(13);\r\n        const edits = this.readUint16().toString().padStart(3, '0');\r\n        return `${mac}_${random}_${edits}`;\r\n    }\r\n    decodeMeta() {\r\n        // https://github.com/Flipnote-Collective/flipnote-studio-docs/wiki/PPM-format#metadata\r\n        assert(0x06A8 < this.byteLength);\r\n        this.seek(0x10);\r\n        const lock = this.readUint16();\r\n        const thumbIndex = this.readInt16();\r\n        const rootAuthorName = this.readWideChars(11);\r\n        const parentAuthorName = this.readWideChars(11);\r\n        const currentAuthorName = this.readWideChars(11);\r\n        const parentAuthorId = this.readHex(8, true);\r\n        const currentAuthorId = this.readHex(8, true);\r\n        const parentFilename = this.readFilename();\r\n        const currentFilename = this.readFilename();\r\n        const rootAuthorId = this.readHex(8, true);\r\n        this.seek(0x9A);\r\n        const timestamp = dateFromNintendoTimestamp(this.readInt32());\r\n        this.seek(0x06A6);\r\n        const flags = this.readUint16();\r\n        this.thumbFrameIndex = thumbIndex;\r\n        this.layerVisibility = {\r\n            1: (flags & 0x10) === 0,\r\n            2: (flags & 0x20) === 0,\r\n            3: false\r\n        };\r\n        this.isSpinoff = (currentAuthorId !== parentAuthorId) || (currentAuthorId !== rootAuthorId);\r\n        this.meta = {\r\n            lock: lock === 1,\r\n            loop: (flags >> 1 & 0x1) === 1,\r\n            isSpinoff: this.isSpinoff,\r\n            frameCount: this.frameCount,\r\n            frameSpeed: this.frameSpeed,\r\n            bgmSpeed: this.bgmSpeed,\r\n            duration: this.duration,\r\n            thumbIndex: thumbIndex,\r\n            timestamp: timestamp,\r\n            root: {\r\n                filename: null,\r\n                username: rootAuthorName,\r\n                fsid: rootAuthorId,\r\n            },\r\n            parent: {\r\n                username: parentAuthorName,\r\n                fsid: parentAuthorId,\r\n                filename: parentFilename\r\n            },\r\n            current: {\r\n                username: currentAuthorName,\r\n                fsid: currentAuthorId,\r\n                filename: currentFilename\r\n            },\r\n        };\r\n    }\r\n    decodeAnimationHeader() {\r\n        // jump to the start of the animation data section\r\n        // https://github.com/Flipnote-Collective/flipnote-studio-docs/wiki/PPM-format#animation-header\r\n        this.seek(0x06A0);\r\n        const offsetTableLength = this.readUint16();\r\n        const numOffsets = offsetTableLength / 4;\r\n        assert(numOffsets <= this.frameCount);\r\n        // skip padding + flags\r\n        this.seek(0x06A8);\r\n        // read frame offsets and build them into a table\r\n        const frameOffsets = new Uint32Array(numOffsets);\r\n        for (let n = 0; n < numOffsets; n++) {\r\n            const ptr = 0x06A8 + offsetTableLength + this.readUint32();\r\n            assert(ptr < this.byteLength, `Frame ${n} pointer is out of bounds`);\r\n            frameOffsets[n] = ptr;\r\n        }\r\n        this.frameOffsets = frameOffsets;\r\n    }\r\n    decodeSoundHeader() {\r\n        // https://github.com/Flipnote-Collective/flipnote-studio-docs/wiki/PPM-format#sound-header\r\n        // offset = frame data offset + frame data length + sound effect flags\r\n        let ptr = 0x06A0 + this.frameDataLength + this.frameCount;\r\n        assert(ptr < this.byteLength);\r\n        // align offset\r\n        if (ptr % 4 != 0)\r\n            ptr += 4 - (ptr % 4);\r\n        this.seek(ptr);\r\n        const bgmLen = this.readUint32();\r\n        const se1Len = this.readUint32();\r\n        const se2Len = this.readUint32();\r\n        const se3Len = this.readUint32();\r\n        this.frameSpeed = 8 - this.readUint8();\r\n        this.bgmSpeed = 8 - this.readUint8();\r\n        assert(this.frameSpeed <= 8 && this.bgmSpeed <= 8);\r\n        ptr += 32;\r\n        this.framerate = PPM_FRAMERATES[this.frameSpeed];\r\n        this.duration = timeGetNoteDuration(this.frameCount, this.framerate);\r\n        this.bgmrate = PPM_FRAMERATES[this.bgmSpeed];\r\n        this.soundMeta = {\r\n            [FlipnoteAudioTrack.BGM]: { ptr: ptr, length: bgmLen },\r\n            [FlipnoteAudioTrack.SE1]: { ptr: ptr += bgmLen, length: se1Len },\r\n            [FlipnoteAudioTrack.SE2]: { ptr: ptr += se1Len, length: se2Len },\r\n            [FlipnoteAudioTrack.SE3]: { ptr: ptr += se2Len, length: se3Len },\r\n        };\r\n    }\r\n    isNewFrame(frameIndex) {\r\n        this.seek(this.frameOffsets[frameIndex]);\r\n        const header = this.readUint8();\r\n        return (header >> 7) & 0x1;\r\n    }\r\n    /**\r\n     * Decode a frame, returning the raw pixel buffers for each layer\r\n     * @category Image\r\n    */\r\n    decodeFrame(frameIndex) {\r\n        assert(frameIndex > -1 && frameIndex < this.frameCount, `Frame index ${frameIndex} out of bounds`);\r\n        if (this.prevDecodedFrame !== frameIndex - 1 && (!this.isNewFrame(frameIndex)) && frameIndex !== 0)\r\n            this.decodeFrame(frameIndex - 1);\r\n        this.prevDecodedFrame = frameIndex;\r\n        // https://github.com/Flipnote-Collective/flipnote-studio-docs/wiki/PPM-format#animation-data\r\n        this.seek(this.frameOffsets[frameIndex]);\r\n        const header = this.readUint8();\r\n        const isNewFrame = (header >> 7) & 0x1;\r\n        const isTranslated = (header >> 5) & 0x3;\r\n        // reset current layer buffers\r\n        this.layerBuffers[0].fill(0);\r\n        this.layerBuffers[1].fill(0);\r\n        let translateX = 0;\r\n        let translateY = 0;\r\n        if (isTranslated) {\r\n            translateX = this.readInt8();\r\n            translateY = this.readInt8();\r\n        }\r\n        // unpack line encodings for each layer\r\n        for (let layerIndex = 0; layerIndex < 2; layerIndex++) {\r\n            const lineEncodingBuffer = this.lineEncodingBuffers[layerIndex];\r\n            lineEncodingBuffer.fill(0);\r\n            for (let ptr = 0; ptr < lineEncodingBuffer.length;) {\r\n                let byte = this.readUint8();\r\n                // the 4 lines in this byte are all empty (type 0) - skip\r\n                if (byte === 0) {\r\n                    ptr += 4;\r\n                    continue;\r\n                }\r\n                // unpack 4 line types from the current byte\r\n                lineEncodingBuffer[ptr++] = byte & 0x03;\r\n                lineEncodingBuffer[ptr++] = (byte >> 2) & 0x03;\r\n                lineEncodingBuffer[ptr++] = (byte >> 4) & 0x03;\r\n                lineEncodingBuffer[ptr++] = (byte >> 6) & 0x03;\r\n            }\r\n        }\r\n        // unpack layer bitmaps\r\n        for (let layerIndex = 0; layerIndex < 2; layerIndex++) {\r\n            const pixelBuffer = this.layerBuffers[layerIndex];\r\n            const lineEncodingBuffer = this.lineEncodingBuffers[layerIndex];\r\n            for (let y = 0; y < PpmParser.height; y++) {\r\n                let pixelBufferPtr = y * PpmParser.width;\r\n                const lineType = lineEncodingBuffer[y];\r\n                switch (lineType) {\r\n                    // line type 0 = blank line, decode nothing\r\n                    case 0:\r\n                        break;\r\n                    // line type 1 = compressed bitmap line\r\n                    case 1:\r\n                        // read lineHeader as a big-endian int\r\n                        var lineHeader = this.readUint32(false);\r\n                        // loop through each bit in the line header\r\n                        // shift lineheader to the left by 1 bit every interation, \r\n                        // so on the next loop cycle the next bit will be checked\r\n                        // and if the line header equals 0, no more bits are set, \r\n                        // the rest of the line is empty and can be skipped\r\n                        for (; lineHeader !== 0; lineHeader <<= 1, pixelBufferPtr += 8) {\r\n                            // if the bit is set, this 8-pix wide chunk is stored\r\n                            // else we can just leave it blank and move on to the next chunk\r\n                            if (lineHeader & 0x80000000) {\r\n                                let chunk = this.readUint8();\r\n                                // unpack chunk bits\r\n                                // the chunk if shifted right 1 bit on every loop\r\n                                // if the chunk equals 0, no more bits are set, \r\n                                // so the rest of the chunk is empty and can be skipped\r\n                                for (let pixel = 0; chunk !== 0; pixel++, chunk >>= 1)\r\n                                    pixelBuffer[pixelBufferPtr + pixel] = chunk & 0x1;\r\n                            }\r\n                        }\r\n                        break;\r\n                    // line type 2 = compressed bitmap line like type 1, but all pixels are set to 1 first\r\n                    case 2:\r\n                        // line type 2 starts as an inverted line\r\n                        pixelBuffer.fill(1, pixelBufferPtr, pixelBufferPtr + PpmParser.width);\r\n                        // read lineHeader as a big-endian int\r\n                        var lineHeader = this.readUint32(false);\r\n                        // loop through each bit in the line header\r\n                        // shift lineheader to the left by 1 bit every interation, \r\n                        // so on the next loop cycle the next bit will be checked\r\n                        // and if the line header equals 0, no more bits are set, \r\n                        // the rest of the line is empty and can be skipped\r\n                        for (; lineHeader !== 0; lineHeader <<= 1, pixelBufferPtr += 8) {\r\n                            // if the bit is set, this 8-pix wide chunk is stored\r\n                            // else we can just leave it blank and move on to the next chunk\r\n                            if (lineHeader & 0x80000000) {\r\n                                let chunk = this.readUint8();\r\n                                // unpack chunk bits\r\n                                for (let pixel = 0; pixel < 8; pixel++, chunk >>= 1)\r\n                                    pixelBuffer[pixelBufferPtr + pixel] = chunk & 0x1;\r\n                            }\r\n                        }\r\n                        break;\r\n                    // line type 3 = raw bitmap line\r\n                    case 3:\r\n                        for (let chunk = 0, i = 0; i < PpmParser.width; i++) {\r\n                            if (i % 8 === 0)\r\n                                chunk = this.readUint8();\r\n                            pixelBuffer[pixelBufferPtr++] = chunk & 0x1;\r\n                            chunk >>= 1;\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n        }\r\n        // if the current frame is based on changes from the preivous one, merge them by XORing their values\r\n        const layer1 = this.layerBuffers[0];\r\n        const layer2 = this.layerBuffers[1];\r\n        const layer1Prev = this.prevLayerBuffers[0];\r\n        const layer2Prev = this.prevLayerBuffers[1];\r\n        if (!isNewFrame) {\r\n            let dest, src;\r\n            // loop through each line\r\n            for (let y = 0; y < PpmParser.height; y++) {\r\n                // skip to next line if this one falls off the top edge of the screen\r\n                if (y - translateY < 0)\r\n                    continue;\r\n                // stop once the bottom screen edge has been reached\r\n                if (y - translateY >= PpmParser.height)\r\n                    break;\r\n                // loop through each pixel in the line\r\n                for (let x = 0; x < PpmParser.width; x++) {\r\n                    // skip to the next pixel if this one falls off the left edge of the screen\r\n                    if (x - translateX < 0)\r\n                        continue;\r\n                    // stop diffing this line once the right screen edge has been reached\r\n                    if (x - translateX >= PpmParser.width)\r\n                        break;\r\n                    dest = x + y * PpmParser.width;\r\n                    src = dest - (translateX + translateY * PpmParser.width);\r\n                    // diff pixels with a binary XOR\r\n                    layer1[dest] ^= layer1Prev[src];\r\n                    layer2[dest] ^= layer2Prev[src];\r\n                }\r\n            }\r\n        }\r\n        // copy the current layer buffers to the previous ones\r\n        this.prevLayerBuffers[0].set(this.layerBuffers[0]);\r\n        this.prevLayerBuffers[1].set(this.layerBuffers[1]);\r\n        return this.layerBuffers;\r\n    }\r\n    /**\r\n     * Get the layer draw order for a given frame\r\n     * @category Image\r\n     * @returns Array of layer indexes, in the order they should be drawn\r\n    */\r\n    getFrameLayerOrder(frameIndex) {\r\n        return [0, 1];\r\n    }\r\n    /**\r\n     * Get the color palette indices for a given frame. RGBA colors for these values can be indexed from {@link PpmParser.globalPalette}\r\n     *\r\n     * Returns an array where:\r\n     *  - index 0 is the paper color index\r\n     *  - index 1 is the layer 1 color index\r\n     *  - index 2 is the layer 2 color index\r\n     * @category Image\r\n    */\r\n    getFramePaletteIndices(frameIndex) {\r\n        this.seek(this.frameOffsets[frameIndex]);\r\n        const header = this.readUint8();\r\n        const isInverted = (header & 0x1) !== 1;\r\n        const penMap = [\r\n            isInverted ? 0 : 1,\r\n            isInverted ? 0 : 1,\r\n            2,\r\n            3,\r\n        ];\r\n        return [\r\n            isInverted ? 1 : 0,\r\n            penMap[(header >> 1) & 0x3],\r\n            penMap[(header >> 3) & 0x3],\r\n        ];\r\n    }\r\n    /**\r\n     * Get the RGBA colors for a given frame\r\n     *\r\n     * Returns an array where:\r\n     *  - index 0 is the paper color\r\n     *  - index 1 is the layer 1 color\r\n     *  - index 2 is the layer 2 color\r\n     * @category Image\r\n     */\r\n    getFramePalette(frameIndex) {\r\n        const indices = this.getFramePaletteIndices(frameIndex);\r\n        return indices.map(colorIndex => this.globalPalette[colorIndex]);\r\n    }\r\n    /**\r\n     * Get the pixels for a given frame layer\r\n     * @category Image\r\n    */\r\n    getLayerPixels(frameIndex, layerIndex) {\r\n        if (this.prevDecodedFrame !== frameIndex) {\r\n            this.decodeFrame(frameIndex);\r\n        }\r\n        const palette = this.getFramePaletteIndices(frameIndex);\r\n        const layer = this.layerBuffers[layerIndex];\r\n        const image = new Uint8Array(PpmParser.width * PpmParser.height);\r\n        const layerColor = palette[layerIndex + 1];\r\n        for (let pixel = 0; pixel < image.length; pixel++) {\r\n            if (layer[pixel] === 1)\r\n                image[pixel] = layerColor;\r\n        }\r\n        return image;\r\n    }\r\n    /**\r\n     * Get the pixels for a given frame\r\n     * @category Image\r\n    */\r\n    getFramePixels(frameIndex) {\r\n        const palette = this.getFramePaletteIndices(frameIndex);\r\n        const layers = this.decodeFrame(frameIndex);\r\n        const image = new Uint8Array(PpmParser.width * PpmParser.height);\r\n        const layer1 = layers[0];\r\n        const layer2 = layers[1];\r\n        const paperColor = palette[0];\r\n        const layer1Color = palette[1];\r\n        const layer2Color = palette[2];\r\n        image.fill(paperColor);\r\n        for (let pixel = 0; pixel < image.length; pixel++) {\r\n            const a = layer1[pixel];\r\n            const b = layer2[pixel];\r\n            if (a === 1)\r\n                image[pixel] = layer1Color;\r\n            else if (b === 1)\r\n                image[pixel] = layer2Color;\r\n        }\r\n        return image;\r\n    }\r\n    /**\r\n     * Get the sound effect flags for every frame in the Flipnote\r\n     * @category Audio\r\n    */\r\n    decodeSoundFlags() {\r\n        assert(0x06A0 + this.frameDataLength < this.byteLength);\r\n        // https://github.com/Flipnote-Collective/flipnote-studio-docs/wiki/PPM-format#sound-effect-flags\r\n        this.seek(0x06A0 + this.frameDataLength);\r\n        const numFlags = this.frameCount;\r\n        const flags = this.readBytes(numFlags);\r\n        const unpacked = new Array(numFlags);\r\n        for (let i = 0; i < numFlags; i++) {\r\n            const byte = flags[i];\r\n            unpacked[i] = [\r\n                (byte & 0x1) !== 0,\r\n                (byte & 0x2) !== 0,\r\n                (byte & 0x4) !== 0,\r\n            ];\r\n        }\r\n        return unpacked;\r\n    }\r\n    /**\r\n     * Get the raw compressed audio data for a given track\r\n     * @returns byte array\r\n     * @category Audio\r\n    */\r\n    getAudioTrackRaw(trackId) {\r\n        const trackMeta = this.soundMeta[trackId];\r\n        assert(trackMeta.ptr + trackMeta.length < this.byteLength);\r\n        this.seek(trackMeta.ptr);\r\n        return this.readBytes(trackMeta.length);\r\n    }\r\n    /**\r\n     * Get the decoded audio data for a given track, using the track's native samplerate\r\n     * @returns Signed 16-bit PCM audio\r\n     * @category Audio\r\n    */\r\n    decodeAudioTrack(trackId) {\r\n        // note this doesn't resample\r\n        // TODO: kinda slow, maybe use sample lookup table\r\n        // decode a 4 bit IMA adpcm audio track\r\n        // https://github.com/Flipnote-Collective/flipnote-studio-docs/wiki/PPM-format#sound-data\r\n        const src = this.getAudioTrackRaw(trackId);\r\n        const srcSize = src.length;\r\n        const dst = new Int16Array(srcSize * 2);\r\n        let srcPtr = 0;\r\n        let dstPtr = 0;\r\n        let sample = 0;\r\n        let stepIndex = 0;\r\n        let predictor = 0;\r\n        let lowNibble = true;\r\n        while (srcPtr < srcSize) {\r\n            // switch between high and low nibble each loop iteration\r\n            // increments srcPtr after every high nibble\r\n            if (lowNibble)\r\n                sample = src[srcPtr] & 0xF;\r\n            else\r\n                sample = src[srcPtr++] >> 4;\r\n            lowNibble = !lowNibble;\r\n            const step = ADPCM_STEP_TABLE[stepIndex];\r\n            let diff = step >> 3;\r\n            if (sample & 1)\r\n                diff += step >> 2;\r\n            if (sample & 2)\r\n                diff += step >> 1;\r\n            if (sample & 4)\r\n                diff += step;\r\n            if (sample & 8)\r\n                diff = -diff;\r\n            predictor += diff;\r\n            predictor = clamp(predictor, -32768, 32767);\r\n            stepIndex += ADPCM_INDEX_TABLE_4BIT[sample];\r\n            stepIndex = clamp(stepIndex, 0, 88);\r\n            dst[dstPtr++] = predictor;\r\n        }\r\n        return dst;\r\n    }\r\n    /**\r\n     * Get the decoded audio data for a given track, using the specified samplerate\r\n     * @returns Signed 16-bit PCM audio\r\n     * @category Audio\r\n    */\r\n    getAudioTrackPcm(trackId, dstFreq = this.sampleRate) {\r\n        const srcPcm = this.decodeAudioTrack(trackId);\r\n        let srcFreq = this.rawSampleRate;\r\n        if (trackId === FlipnoteAudioTrack.BGM) {\r\n            const bgmAdjust = (1 / this.bgmrate) / (1 / this.framerate);\r\n            srcFreq = this.rawSampleRate * bgmAdjust;\r\n        }\r\n        if (srcFreq !== dstFreq)\r\n            return pcmDsAudioResample(srcPcm, srcFreq, dstFreq);\r\n        return srcPcm;\r\n    }\r\n    pcmAudioMix(src, dst, dstOffset = 0) {\r\n        const srcSize = src.length;\r\n        const dstSize = dst.length;\r\n        for (let n = 0; n < srcSize; n++) {\r\n            if (dstOffset + n > dstSize)\r\n                break;\r\n            // half src volume\r\n            const samp = dst[dstOffset + n] + (src[n] / 2);\r\n            dst[dstOffset + n] = clamp(samp, -32768, 32767);\r\n        }\r\n    }\r\n    /**\r\n     * Get the full mixed audio for the Flipnote, using the specified samplerate\r\n     * @returns Signed 16-bit PCM audio\r\n     * @category Audio\r\n    */\r\n    getAudioMasterPcm(dstFreq = this.sampleRate) {\r\n        const dstSize = Math.ceil(this.duration * dstFreq);\r\n        const master = new Int16Array(dstSize);\r\n        const hasBgm = this.hasAudioTrack(FlipnoteAudioTrack.BGM);\r\n        const hasSe1 = this.hasAudioTrack(FlipnoteAudioTrack.SE1);\r\n        const hasSe2 = this.hasAudioTrack(FlipnoteAudioTrack.SE2);\r\n        const hasSe3 = this.hasAudioTrack(FlipnoteAudioTrack.SE3);\r\n        // Mix background music\r\n        if (hasBgm) {\r\n            const bgmPcm = this.getAudioTrackPcm(FlipnoteAudioTrack.BGM, dstFreq);\r\n            this.pcmAudioMix(bgmPcm, master, 0);\r\n        }\r\n        // Mix sound effects\r\n        if (hasSe1 || hasSe2 || hasSe3) {\r\n            const samplesPerFrame = dstFreq / this.framerate;\r\n            const se1Pcm = hasSe1 ? this.getAudioTrackPcm(FlipnoteAudioTrack.SE1, dstFreq) : null;\r\n            const se2Pcm = hasSe2 ? this.getAudioTrackPcm(FlipnoteAudioTrack.SE2, dstFreq) : null;\r\n            const se3Pcm = hasSe3 ? this.getAudioTrackPcm(FlipnoteAudioTrack.SE3, dstFreq) : null;\r\n            const seFlags = this.decodeSoundFlags();\r\n            for (let frame = 0; frame < this.frameCount; frame++) {\r\n                const seOffset = Math.ceil(frame * samplesPerFrame);\r\n                const flag = seFlags[frame];\r\n                if (hasSe1 && flag[0])\r\n                    this.pcmAudioMix(se1Pcm, master, seOffset);\r\n                if (hasSe2 && flag[1])\r\n                    this.pcmAudioMix(se2Pcm, master, seOffset);\r\n                if (hasSe3 && flag[2])\r\n                    this.pcmAudioMix(se3Pcm, master, seOffset);\r\n            }\r\n        }\r\n        this.audioClipRatio = pcmGetClippingRatio(master);\r\n        return master;\r\n    }\r\n}\r\n/** Default PPM parser settings */\r\nPpmParser.defaultSettings = {};\r\n/** File format type */\r\nPpmParser.format = FlipnoteFormat.PPM;\r\n/** Animation frame width */\r\nPpmParser.width = 256;\r\n/** Animation frame height */\r\nPpmParser.height = 192;\r\n/** Number of animation frame layers */\r\nPpmParser.numLayers = 2;\r\n/** Audio track base sample rate */\r\nPpmParser.rawSampleRate = 8192;\r\n/** Nintendo DSi audio output rate */\r\nPpmParser.sampleRate = 32768;\r\n/** Global animation frame color palette */\r\nPpmParser.globalPalette = [\r\n    PPM_PALETTE.WHITE,\r\n    PPM_PALETTE.BLACK,\r\n    PPM_PALETTE.RED,\r\n    PPM_PALETTE.BLUE\r\n];\n\n/**\r\n * KWZ framerates in frames per second, indexed by the in-app frame speed\r\n */\r\nconst KWZ_FRAMERATES = [.2, .5, 1, 2, 4, 6, 8, 12, 20, 24, 30];\r\n/**\r\n * KWZ color defines (red, green, blue, alpha)\r\n */\r\nconst KWZ_PALETTE = {\r\n    WHITE: [0xff, 0xff, 0xff, 0xff],\r\n    BLACK: [0x10, 0x10, 0x10, 0xff],\r\n    RED: [0xff, 0x10, 0x10, 0xff],\r\n    YELLOW: [0xff, 0xe7, 0x00, 0xff],\r\n    GREEN: [0x00, 0x86, 0x31, 0xff],\r\n    BLUE: [0x00, 0x38, 0xce, 0xff],\r\n    NONE: [0xff, 0xff, 0xff, 0x00]\r\n};\r\n/**\r\n * Pre computed bitmasks for readBits; done as a slight optimisation\r\n * @internal\r\n */\r\nconst BITMASKS = new Uint16Array(16);\r\nfor (let i = 0; i < 16; i++) {\r\n    BITMASKS[i] = (1 << i) - 1;\r\n}\r\n/**\r\n * Every possible sequence of pixels for each 8-pixel line\r\n * @internal\r\n */\r\nconst KWZ_LINE_TABLE = new Uint8Array(6561 * 8);\r\n/**\r\n * Same lines as KWZ_LINE_TABLE, but the pixels are shift-rotated to the left by one place\r\n * @internal\r\n */\r\nconst KWZ_LINE_TABLE_SHIFT = new Uint8Array(6561 * 8);\r\n/** @internal */\r\nvar offset = 0;\r\nfor (let a = 0; a < 3; a++)\r\n    for (let b = 0; b < 3; b++)\r\n        for (let c = 0; c < 3; c++)\r\n            for (let d = 0; d < 3; d++)\r\n                for (let e = 0; e < 3; e++)\r\n                    for (let f = 0; f < 3; f++)\r\n                        for (let g = 0; g < 3; g++)\r\n                            for (let h = 0; h < 3; h++) {\r\n                                KWZ_LINE_TABLE.set([b, a, d, c, f, e, h, g], offset);\r\n                                KWZ_LINE_TABLE_SHIFT.set([a, d, c, f, e, h, g, b], offset);\r\n                                offset += 8;\r\n                            }\r\n/**\r\n * Commonly used lines - represents lines where all the pixels are empty, full,\r\n * or include a pattern produced by the paint tool, etc\r\n * @internal\r\n */\r\nconst KWZ_LINE_TABLE_COMMON = new Uint8Array(32 * 8);\r\n/**\r\n * Same lines as common line table, but shift-rotates one place to the left\r\n * @internal\r\n */\r\nconst KWZ_LINE_TABLE_COMMON_SHIFT = new Uint8Array(32 * 8);\r\n[\r\n    0x0000, 0x0CD0, 0x19A0, 0x02D9, 0x088B, 0x0051, 0x00F3, 0x0009,\r\n    0x001B, 0x0001, 0x0003, 0x05B2, 0x1116, 0x00A2, 0x01E6, 0x0012,\r\n    0x0036, 0x0002, 0x0006, 0x0B64, 0x08DC, 0x0144, 0x00FC, 0x0024,\r\n    0x001C, 0x0004, 0x0334, 0x099C, 0x0668, 0x1338, 0x1004, 0x166C\r\n].forEach((value, i) => {\r\n    const lineTablePtr = value * 8;\r\n    const pixels = KWZ_LINE_TABLE.subarray(lineTablePtr, lineTablePtr + 8);\r\n    const shiftPixels = KWZ_LINE_TABLE_SHIFT.subarray(lineTablePtr, lineTablePtr + 8);\r\n    KWZ_LINE_TABLE_COMMON.set(pixels, i * 8);\r\n    KWZ_LINE_TABLE_COMMON_SHIFT.set(shiftPixels, i * 8);\r\n});\r\n/**\r\n * Parser class for Flipnote Studio 3D's KWZ animation format\r\n *\r\n * KWZ format docs: https://github.com/Flipnote-Collective/flipnote-studio-3d-docs/wiki/KWZ-Format\r\n * @category File Parser\r\n */\r\nclass KwzParser extends FlipnoteParser {\r\n    /**\r\n     * Create a new KWZ file parser instance\r\n     * @param arrayBuffer an ArrayBuffer containing file data\r\n     * @param settings parser settings\r\n     */\r\n    constructor(arrayBuffer, settings = {}) {\r\n        super(arrayBuffer);\r\n        /** File format type, reflects {@link KwzParser.format} */\r\n        this.format = FlipnoteFormat.KWZ;\r\n        /** Animation frame width, reflects {@link KwzParser.width} */\r\n        this.width = KwzParser.width;\r\n        /** Animation frame height, reflects {@link KwzParser.height} */\r\n        this.height = KwzParser.height;\r\n        /** Number of animation frame layers, reflects {@link KwzParser.numLayers} */\r\n        this.numLayers = KwzParser.numLayers;\r\n        /** Audio track base sample rate, reflects {@link KwzParser.rawSampleRate} */\r\n        this.rawSampleRate = KwzParser.rawSampleRate;\r\n        /** Audio output sample rate, reflects {@link KwzParser.sampleRate} */\r\n        this.sampleRate = KwzParser.sampleRate;\r\n        /** Global animation frame color palette, reflects {@link KwzParser.globalPalette} */\r\n        this.globalPalette = KwzParser.globalPalette;\r\n        this.prevFrameIndex = null;\r\n        this.bitIndex = 0;\r\n        this.bitValue = 0;\r\n        this.settings = { ...KwzParser.defaultSettings, ...settings };\r\n        this.layers = [\r\n            new Uint8Array(KwzParser.width * KwzParser.height),\r\n            new Uint8Array(KwzParser.width * KwzParser.height),\r\n            new Uint8Array(KwzParser.width * KwzParser.height),\r\n        ];\r\n        this.buildSectionMap();\r\n        if (!this.settings.quickMeta)\r\n            this.decodeMeta();\r\n        else\r\n            this.decodeMetaQuick();\r\n        this.getFrameOffsets();\r\n        this.decodeSoundHeader();\r\n    }\r\n    buildSectionMap() {\r\n        this.seek(0);\r\n        const fileSize = this.byteLength - 256;\r\n        const sectionMap = new Map();\r\n        let sectionCount = 0;\r\n        let ptr = 0;\r\n        // counting sections should mitigate against one of mrnbayoh's notehax exploits\r\n        while ((ptr < fileSize) && (sectionCount < 6)) {\r\n            this.seek(ptr);\r\n            const magic = this.readChars(4).substring(0, 3);\r\n            const length = this.readUint32();\r\n            sectionMap.set(magic, { ptr, length });\r\n            ptr += length + 8;\r\n            sectionCount += 1;\r\n        }\r\n        this.sectionMap = sectionMap;\r\n        assert(sectionMap.has('KMC') && sectionMap.has('KMI'));\r\n    }\r\n    readBits(num) {\r\n        // assert(num < 16);\r\n        if (this.bitIndex + num > 16) {\r\n            const nextBits = this.readUint16();\r\n            this.bitValue |= nextBits << (16 - this.bitIndex);\r\n            this.bitIndex -= 16;\r\n        }\r\n        const result = this.bitValue & BITMASKS[num];\r\n        this.bitValue >>= num;\r\n        this.bitIndex += num;\r\n        return result;\r\n    }\r\n    readFsid() {\r\n        if (this.settings.dsiGalleryNote) { // format as DSi PPM FSID\r\n            const hex = this.readHex(10, true);\r\n            return hex.slice(2, 18);\r\n        }\r\n        const hex = this.readHex(10);\r\n        return `${hex.slice(0, 4)}-${hex.slice(4, 8)}-${hex.slice(8, 12)}-${hex.slice(12, 18)}`.toLowerCase();\r\n    }\r\n    readFilename() {\r\n        const ptr = this.pointer;\r\n        const chars = this.readChars(28);\r\n        if (chars.length === 28)\r\n            return chars;\r\n        // Otherwise, this is likely a DSi Library note, \r\n        // where sometimes Nintendo's buggy PPM converter includes the original packed PPM filename\r\n        this.seek(ptr);\r\n        const mac = this.readHex(3);\r\n        const random = this.readChars(13);\r\n        const edits = this.readUint16().toString().padStart(3, '0');\r\n        this.seek(ptr + 28);\r\n        return `${mac}_${random}_${edits}`;\r\n    }\r\n    decodeMeta() {\r\n        assert(this.sectionMap.has('KFH'));\r\n        this.seek(this.sectionMap.get('KFH').ptr + 12);\r\n        const creationTime = dateFromNintendoTimestamp(this.readUint32());\r\n        const modifiedTime = dateFromNintendoTimestamp(this.readUint32());\r\n        // const simonTime = \r\n        const appVersion = this.readUint32();\r\n        const rootAuthorId = this.readFsid();\r\n        const parentAuthorId = this.readFsid();\r\n        const currentAuthorId = this.readFsid();\r\n        const rootAuthorName = this.readWideChars(11);\r\n        const parentAuthorName = this.readWideChars(11);\r\n        const currentAuthorName = this.readWideChars(11);\r\n        const rootFilename = this.readFilename();\r\n        const parentFilename = this.readFilename();\r\n        const currentFilename = this.readFilename();\r\n        const frameCount = this.readUint16();\r\n        const thumbIndex = this.readUint16();\r\n        const flags = this.readUint16();\r\n        const frameSpeed = this.readUint8();\r\n        const layerFlags = this.readUint8();\r\n        this.isSpinoff = (currentAuthorId !== parentAuthorId) || (currentAuthorId !== rootAuthorId);\r\n        this.frameCount = frameCount;\r\n        this.frameSpeed = frameSpeed;\r\n        this.framerate = KWZ_FRAMERATES[frameSpeed];\r\n        this.duration = timeGetNoteDuration(this.frameCount, this.framerate);\r\n        this.thumbFrameIndex = thumbIndex;\r\n        this.layerVisibility = {\r\n            1: (layerFlags & 0x1) === 0,\r\n            2: (layerFlags & 0x2) === 0,\r\n            3: (layerFlags & 0x3) === 0,\r\n        };\r\n        this.meta = {\r\n            lock: (flags & 0x1) !== 0,\r\n            loop: (flags & 0x2) !== 0,\r\n            isSpinoff: this.isSpinoff,\r\n            frameCount: frameCount,\r\n            frameSpeed: frameSpeed,\r\n            duration: this.duration,\r\n            thumbIndex: thumbIndex,\r\n            timestamp: modifiedTime,\r\n            creationTimestamp: creationTime,\r\n            root: {\r\n                username: rootAuthorName,\r\n                fsid: rootAuthorId,\r\n                filename: rootFilename,\r\n                isDsiFilename: rootFilename.length !== 28\r\n            },\r\n            parent: {\r\n                username: parentAuthorName,\r\n                fsid: parentAuthorId,\r\n                filename: parentFilename,\r\n                isDsiFilename: parentFilename.length !== 28\r\n            },\r\n            current: {\r\n                username: currentAuthorName,\r\n                fsid: currentAuthorId,\r\n                filename: currentFilename,\r\n                isDsiFilename: currentFilename.length !== 28\r\n            },\r\n        };\r\n    }\r\n    decodeMetaQuick() {\r\n        assert(this.sectionMap.has('KFH'));\r\n        this.seek(this.sectionMap.get('KFH').ptr + 0x8 + 0xC4);\r\n        const frameCount = this.readUint16();\r\n        const thumbFrameIndex = this.readUint16();\r\n        const flags = this.readUint16();\r\n        const frameSpeed = this.readUint8();\r\n        const layerFlags = this.readUint8();\r\n        this.frameCount = frameCount;\r\n        this.thumbFrameIndex = thumbFrameIndex;\r\n        this.frameSpeed = frameSpeed;\r\n        this.framerate = KWZ_FRAMERATES[frameSpeed];\r\n        this.duration = timeGetNoteDuration(this.frameCount, this.framerate);\r\n        this.layerVisibility = {\r\n            1: (layerFlags & 0x1) === 0,\r\n            2: (layerFlags & 0x2) === 0,\r\n            3: (layerFlags & 0x3) === 0,\r\n        };\r\n    }\r\n    getFrameOffsets() {\r\n        assert(this.sectionMap.has('KMI') && this.sectionMap.has('KMC'));\r\n        const numFrames = this.frameCount;\r\n        const kmiSection = this.sectionMap.get('KMI');\r\n        const kmcSection = this.sectionMap.get('KMC');\r\n        assert(kmiSection.length / 28 >= numFrames);\r\n        const frameMetaOffsets = new Uint32Array(numFrames);\r\n        const frameDataOffsets = new Uint32Array(numFrames);\r\n        const frameLayerSizes = [];\r\n        let frameMetaPtr = kmiSection.ptr + 8;\r\n        let frameDataPtr = kmcSection.ptr + 12;\r\n        for (let frameIndex = 0; frameIndex < numFrames; frameIndex++) {\r\n            this.seek(frameMetaPtr + 4);\r\n            const layerASize = this.readUint16();\r\n            const layerBSize = this.readUint16();\r\n            const layerCSize = this.readUint16();\r\n            frameMetaOffsets[frameIndex] = frameMetaPtr;\r\n            frameDataOffsets[frameIndex] = frameDataPtr;\r\n            frameMetaPtr += 28;\r\n            frameDataPtr += layerASize + layerBSize + layerCSize;\r\n            assert(frameMetaPtr < this.byteLength, `frame${frameIndex} meta pointer out of bounds`);\r\n            assert(frameDataPtr < this.byteLength, `frame${frameIndex} data pointer out of bounds`);\r\n            frameLayerSizes.push([layerASize, layerBSize, layerCSize]);\r\n        }\r\n        this.frameMetaOffsets = frameMetaOffsets;\r\n        this.frameDataOffsets = frameDataOffsets;\r\n        this.frameLayerSizes = frameLayerSizes;\r\n    }\r\n    decodeSoundHeader() {\r\n        assert(this.sectionMap.has('KSN'));\r\n        let ptr = this.sectionMap.get('KSN').ptr + 8;\r\n        this.seek(ptr);\r\n        this.bgmSpeed = this.readUint32();\r\n        assert(this.bgmSpeed <= 10);\r\n        this.bgmrate = KWZ_FRAMERATES[this.bgmSpeed];\r\n        const trackSizes = new Uint32Array(this.buffer, ptr + 4, 20);\r\n        this.soundMeta = {\r\n            [FlipnoteAudioTrack.BGM]: { ptr: ptr += 28, length: trackSizes[0] },\r\n            [FlipnoteAudioTrack.SE1]: { ptr: ptr += trackSizes[0], length: trackSizes[1] },\r\n            [FlipnoteAudioTrack.SE2]: { ptr: ptr += trackSizes[1], length: trackSizes[2] },\r\n            [FlipnoteAudioTrack.SE3]: { ptr: ptr += trackSizes[2], length: trackSizes[3] },\r\n            [FlipnoteAudioTrack.SE4]: { ptr: ptr += trackSizes[3], length: trackSizes[4] },\r\n        };\r\n    }\r\n    /**\r\n     * Get the color palette indices for a given frame. RGBA colors for these values can be indexed from {@link KwzParser.globalPalette}\r\n     *\r\n     * Returns an array where:\r\n     *  - index 0 is the paper color index\r\n     *  - index 1 is the layer A color 1 index\r\n     *  - index 2 is the layer A color 2 index\r\n     *  - index 3 is the layer B color 1 index\r\n     *  - index 4 is the layer B color 2 index\r\n     *  - index 5 is the layer C color 1 index\r\n     *  - index 6 is the layer C color 2 index\r\n     * @category Image\r\n    */\r\n    getFramePaletteIndices(frameIndex) {\r\n        this.seek(this.frameMetaOffsets[frameIndex]);\r\n        const flags = this.readUint32();\r\n        return [\r\n            flags & 0xF,\r\n            (flags >> 8) & 0xF,\r\n            (flags >> 12) & 0xF,\r\n            (flags >> 16) & 0xF,\r\n            (flags >> 20) & 0xF,\r\n            (flags >> 24) & 0xF,\r\n            (flags >> 28) & 0xF,\r\n        ];\r\n    }\r\n    /**\r\n     * Get the RGBA colors for a given frame\r\n     *\r\n     * Returns an array where:\r\n     *  - index 0 is the paper color\r\n     *  - index 1 is the layer A color 1\r\n     *  - index 2 is the layer A color 2\r\n     *  - index 3 is the layer B color 1\r\n     *  - index 4 is the layer B color 2\r\n     *  - index 5 is the layer C color 1\r\n     *  - index 6 is the layer C color 2\r\n     * @category Image\r\n    */\r\n    getFramePalette(frameIndex) {\r\n        const indices = this.getFramePaletteIndices(frameIndex);\r\n        return indices.map(colorIndex => this.globalPalette[colorIndex]);\r\n    }\r\n    getFrameDiffingFlag(frameIndex) {\r\n        this.seek(this.frameMetaOffsets[frameIndex]);\r\n        const flags = this.readUint32();\r\n        return (flags >> 4) & 0x07;\r\n    }\r\n    getFrameLayerSizes(frameIndex) {\r\n        this.seek(this.frameMetaOffsets[frameIndex] + 0x4);\r\n        return [\r\n            this.readUint16(),\r\n            this.readUint16(),\r\n            this.readUint16()\r\n        ];\r\n    }\r\n    getFrameLayerDepths(frameIndex) {\r\n        this.seek(this.frameMetaOffsets[frameIndex] + 0x14);\r\n        return [\r\n            this.readUint8(),\r\n            this.readUint8(),\r\n            this.readUint8()\r\n        ];\r\n    }\r\n    getFrameAuthor(frameIndex) {\r\n        this.seek(this.frameMetaOffsets[frameIndex] + 0xA);\r\n        return this.readHex(10);\r\n    }\r\n    getFrameSoundFlags(frameIndex) {\r\n        this.seek(this.frameMetaOffsets[frameIndex] + 0x17);\r\n        const soundFlags = this.readUint8();\r\n        return [\r\n            (soundFlags & 0x1) !== 0,\r\n            (soundFlags & 0x2) !== 0,\r\n            (soundFlags & 0x4) !== 0,\r\n            (soundFlags & 0x8) !== 0,\r\n        ];\r\n    }\r\n    getFrameCameraFlags(frameIndex) {\r\n        this.seek(this.frameMetaOffsets[frameIndex] + 0x1A);\r\n        const cameraFlags = this.readUint8();\r\n        return [\r\n            (cameraFlags & 0x1) !== 0,\r\n            (cameraFlags & 0x2) !== 0,\r\n            (cameraFlags & 0x4) !== 0,\r\n        ];\r\n    }\r\n    /**\r\n     * Get the layer draw order for a given frame\r\n     * @category Image\r\n     * @returns Array of layer indexes, in the order they should be drawn\r\n    */\r\n    getFrameLayerOrder(frameIndex) {\r\n        const depths = this.getFrameLayerDepths(frameIndex);\r\n        return [2, 1, 0].sort((a, b) => depths[b] - depths[a]);\r\n    }\r\n    /**\r\n     * Decode a frame, returning the raw pixel buffers for each layer\r\n     * @category Image\r\n    */\r\n    decodeFrame(frameIndex, diffingFlag = 0x7, isPrevFrame = false) {\r\n        assert(frameIndex > -1 && frameIndex < this.frameCount, `Frame index ${frameIndex} out of bounds`);\r\n        // the prevDecodedFrame check is an optimisation for decoding frames in full sequence\r\n        if (this.prevFrameIndex !== frameIndex - 1 && frameIndex !== 0) {\r\n            // if this frame is being decoded as a prev frame, then we only want to decode the layers necessary\r\n            // diffingFlag is negated with ~ so if no layers are diff-based, diffingFlag is 0\r\n            if (isPrevFrame)\r\n                diffingFlag = diffingFlag & ~this.getFrameDiffingFlag(frameIndex + 1);\r\n            // if diffing flag isn't 0, decode the previous frame before this one\r\n            if (diffingFlag !== 0)\r\n                this.decodeFrame(frameIndex - 1, diffingFlag, true);\r\n        }\r\n        let framePtr = this.frameDataOffsets[frameIndex];\r\n        const layerSizes = this.frameLayerSizes[frameIndex];\r\n        for (let layerIndex = 0; layerIndex < 3; layerIndex++) {\r\n            // dsi gallery conversions don't use the third layer, so it can be skipped if this is set\r\n            if (this.settings.dsiGalleryNote && layerIndex === 3)\r\n                break;\r\n            this.seek(framePtr);\r\n            let layerSize = layerSizes[layerIndex];\r\n            framePtr += layerSize;\r\n            const pixelBuffer = this.layers[layerIndex];\r\n            // if the layer is 38 bytes then it hasn't changed at all since the previous frame, so we can skip it\r\n            if (layerSize === 38)\r\n                continue;\r\n            // if this layer doesn't need to be decoded for diffing\r\n            if (((diffingFlag >> layerIndex) & 0x1) === 0)\r\n                continue;\r\n            // reset readbits state\r\n            this.bitIndex = 16;\r\n            this.bitValue = 0;\r\n            // tile skip counter\r\n            let skipTileCounter = 0;\r\n            for (let tileOffsetY = 0; tileOffsetY < 240; tileOffsetY += 128) {\r\n                for (let tileOffsetX = 0; tileOffsetX < 320; tileOffsetX += 128) {\r\n                    // loop small tiles\r\n                    for (let subTileOffsetY = 0; subTileOffsetY < 128; subTileOffsetY += 8) {\r\n                        const y = tileOffsetY + subTileOffsetY;\r\n                        if (y >= 240)\r\n                            break;\r\n                        for (let subTileOffsetX = 0; subTileOffsetX < 128; subTileOffsetX += 8) {\r\n                            const x = tileOffsetX + subTileOffsetX;\r\n                            if (x >= 320)\r\n                                break;\r\n                            // continue to next tile loop if skipTileCounter is > 0\r\n                            if (skipTileCounter > 0) {\r\n                                skipTileCounter -= 1;\r\n                                continue;\r\n                            }\r\n                            let pixelBufferPtr = y * KwzParser.width + x;\r\n                            const tileType = this.readBits(3);\r\n                            if (tileType === 0) {\r\n                                const linePtr = this.readBits(5) * 8;\r\n                                const pixels = KWZ_LINE_TABLE_COMMON.subarray(linePtr, linePtr + 8);\r\n                                pixelBuffer.set(pixels, pixelBufferPtr);\r\n                                pixelBuffer.set(pixels, pixelBufferPtr += 320);\r\n                                pixelBuffer.set(pixels, pixelBufferPtr += 320);\r\n                                pixelBuffer.set(pixels, pixelBufferPtr += 320);\r\n                                pixelBuffer.set(pixels, pixelBufferPtr += 320);\r\n                                pixelBuffer.set(pixels, pixelBufferPtr += 320);\r\n                                pixelBuffer.set(pixels, pixelBufferPtr += 320);\r\n                                pixelBuffer.set(pixels, pixelBufferPtr += 320);\r\n                            }\r\n                            else if (tileType === 1) {\r\n                                const linePtr = this.readBits(13) * 8;\r\n                                const pixels = KWZ_LINE_TABLE.subarray(linePtr, linePtr + 8);\r\n                                pixelBuffer.set(pixels, pixelBufferPtr);\r\n                                pixelBuffer.set(pixels, pixelBufferPtr += 320);\r\n                                pixelBuffer.set(pixels, pixelBufferPtr += 320);\r\n                                pixelBuffer.set(pixels, pixelBufferPtr += 320);\r\n                                pixelBuffer.set(pixels, pixelBufferPtr += 320);\r\n                                pixelBuffer.set(pixels, pixelBufferPtr += 320);\r\n                                pixelBuffer.set(pixels, pixelBufferPtr += 320);\r\n                                pixelBuffer.set(pixels, pixelBufferPtr += 320);\r\n                            }\r\n                            else if (tileType === 2) {\r\n                                const linePtr = this.readBits(5) * 8;\r\n                                const a = KWZ_LINE_TABLE_COMMON.subarray(linePtr, linePtr + 8);\r\n                                const b = KWZ_LINE_TABLE_COMMON_SHIFT.subarray(linePtr, linePtr + 8);\r\n                                pixelBuffer.set(a, pixelBufferPtr);\r\n                                pixelBuffer.set(b, pixelBufferPtr += 320);\r\n                                pixelBuffer.set(a, pixelBufferPtr += 320);\r\n                                pixelBuffer.set(b, pixelBufferPtr += 320);\r\n                                pixelBuffer.set(a, pixelBufferPtr += 320);\r\n                                pixelBuffer.set(b, pixelBufferPtr += 320);\r\n                                pixelBuffer.set(a, pixelBufferPtr += 320);\r\n                                pixelBuffer.set(b, pixelBufferPtr += 320);\r\n                            }\r\n                            else if (tileType === 3) {\r\n                                const linePtr = this.readBits(13) * 8;\r\n                                const a = KWZ_LINE_TABLE.subarray(linePtr, linePtr + 8);\r\n                                const b = KWZ_LINE_TABLE_SHIFT.subarray(linePtr, linePtr + 8);\r\n                                pixelBuffer.set(a, pixelBufferPtr);\r\n                                pixelBuffer.set(b, pixelBufferPtr += 320);\r\n                                pixelBuffer.set(a, pixelBufferPtr += 320);\r\n                                pixelBuffer.set(b, pixelBufferPtr += 320);\r\n                                pixelBuffer.set(a, pixelBufferPtr += 320);\r\n                                pixelBuffer.set(b, pixelBufferPtr += 320);\r\n                                pixelBuffer.set(a, pixelBufferPtr += 320);\r\n                                pixelBuffer.set(b, pixelBufferPtr += 320);\r\n                            }\r\n                            // most common tile type\r\n                            else if (tileType === 4) {\r\n                                const flags = this.readBits(8);\r\n                                for (let mask = 1; mask < 0xFF; mask <<= 1) {\r\n                                    if (flags & mask) {\r\n                                        const linePtr = this.readBits(5) * 8;\r\n                                        const pixels = KWZ_LINE_TABLE_COMMON.subarray(linePtr, linePtr + 8);\r\n                                        pixelBuffer.set(pixels, pixelBufferPtr);\r\n                                    }\r\n                                    else {\r\n                                        const linePtr = this.readBits(13) * 8;\r\n                                        const pixels = KWZ_LINE_TABLE.subarray(linePtr, linePtr + 8);\r\n                                        pixelBuffer.set(pixels, pixelBufferPtr);\r\n                                    }\r\n                                    pixelBufferPtr += 320;\r\n                                }\r\n                            }\r\n                            else if (tileType === 5) {\r\n                                skipTileCounter = this.readBits(5);\r\n                                continue;\r\n                            }\r\n                            // type 6 doesnt exist\r\n                            else if (tileType === 7) {\r\n                                let pattern = this.readBits(2);\r\n                                let useCommonLines = this.readBits(1);\r\n                                let a, b;\r\n                                if (useCommonLines !== 0) {\r\n                                    const linePtrA = this.readBits(5) * 8;\r\n                                    const linePtrB = this.readBits(5) * 8;\r\n                                    a = KWZ_LINE_TABLE_COMMON.subarray(linePtrA, linePtrA + 8);\r\n                                    b = KWZ_LINE_TABLE_COMMON.subarray(linePtrB, linePtrB + 8);\r\n                                    pattern = (pattern + 1) % 4;\r\n                                }\r\n                                else {\r\n                                    const linePtrA = this.readBits(13) * 8;\r\n                                    const linePtrB = this.readBits(13) * 8;\r\n                                    a = KWZ_LINE_TABLE.subarray(linePtrA, linePtrA + 8);\r\n                                    b = KWZ_LINE_TABLE.subarray(linePtrB, linePtrB + 8);\r\n                                }\r\n                                if (pattern === 0) {\r\n                                    pixelBuffer.set(a, pixelBufferPtr);\r\n                                    pixelBuffer.set(b, pixelBufferPtr += 320);\r\n                                    pixelBuffer.set(a, pixelBufferPtr += 320);\r\n                                    pixelBuffer.set(b, pixelBufferPtr += 320);\r\n                                    pixelBuffer.set(a, pixelBufferPtr += 320);\r\n                                    pixelBuffer.set(b, pixelBufferPtr += 320);\r\n                                    pixelBuffer.set(a, pixelBufferPtr += 320);\r\n                                    pixelBuffer.set(b, pixelBufferPtr += 320);\r\n                                }\r\n                                else if (pattern === 1) {\r\n                                    pixelBuffer.set(a, pixelBufferPtr);\r\n                                    pixelBuffer.set(a, pixelBufferPtr += 320);\r\n                                    pixelBuffer.set(b, pixelBufferPtr += 320);\r\n                                    pixelBuffer.set(a, pixelBufferPtr += 320);\r\n                                    pixelBuffer.set(a, pixelBufferPtr += 320);\r\n                                    pixelBuffer.set(b, pixelBufferPtr += 320);\r\n                                    pixelBuffer.set(a, pixelBufferPtr += 320);\r\n                                    pixelBuffer.set(a, pixelBufferPtr += 320);\r\n                                }\r\n                                else if (pattern === 2) {\r\n                                    pixelBuffer.set(a, pixelBufferPtr);\r\n                                    pixelBuffer.set(b, pixelBufferPtr += 320);\r\n                                    pixelBuffer.set(a, pixelBufferPtr += 320);\r\n                                    pixelBuffer.set(a, pixelBufferPtr += 320);\r\n                                    pixelBuffer.set(b, pixelBufferPtr += 320);\r\n                                    pixelBuffer.set(a, pixelBufferPtr += 320);\r\n                                    pixelBuffer.set(a, pixelBufferPtr += 320);\r\n                                    pixelBuffer.set(b, pixelBufferPtr += 320);\r\n                                }\r\n                                else if (pattern === 3) {\r\n                                    pixelBuffer.set(a, pixelBufferPtr);\r\n                                    pixelBuffer.set(b, pixelBufferPtr += 320);\r\n                                    pixelBuffer.set(b, pixelBufferPtr += 320);\r\n                                    pixelBuffer.set(a, pixelBufferPtr += 320);\r\n                                    pixelBuffer.set(b, pixelBufferPtr += 320);\r\n                                    pixelBuffer.set(b, pixelBufferPtr += 320);\r\n                                    pixelBuffer.set(a, pixelBufferPtr += 320);\r\n                                    pixelBuffer.set(b, pixelBufferPtr += 320);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.prevFrameIndex = frameIndex;\r\n        return this.layers;\r\n    }\r\n    /**\r\n     * Get the pixels for a given frame layer\r\n     * @category Image\r\n    */\r\n    getLayerPixels(frameIndex, layerIndex) {\r\n        if (this.prevFrameIndex !== frameIndex)\r\n            this.decodeFrame(frameIndex);\r\n        const palette = this.getFramePaletteIndices(frameIndex);\r\n        const layers = this.layers[layerIndex];\r\n        const image = new Uint8Array(KwzParser.width * KwzParser.height);\r\n        const paletteOffset = layerIndex * 2 + 1;\r\n        for (let pixelIndex = 0; pixelIndex < layers.length; pixelIndex++) {\r\n            let pixel = layers[pixelIndex];\r\n            if (pixel === 1)\r\n                image[pixelIndex] = palette[paletteOffset];\r\n            else if (pixel === 2)\r\n                image[pixelIndex] = palette[paletteOffset + 1];\r\n        }\r\n        return image;\r\n    }\r\n    /**\r\n     * Get the pixels for a given frame\r\n     * @category Image\r\n    */\r\n    getFramePixels(frameIndex) {\r\n        if (this.prevFrameIndex !== frameIndex)\r\n            this.decodeFrame(frameIndex);\r\n        const palette = this.getFramePaletteIndices(frameIndex);\r\n        const layerOrder = this.getFrameLayerOrder(frameIndex);\r\n        const layerA = this.layers[layerOrder[2]]; // top\r\n        const layerB = this.layers[layerOrder[1]]; // middle\r\n        const layerC = this.layers[layerOrder[0]]; // bottom\r\n        const layerAOffset = layerOrder[2] * 2;\r\n        const layerBOffset = layerOrder[1] * 2;\r\n        const layerCOffset = layerOrder[0] * 2;\r\n        if (!this.settings.dsiGalleryNote) {\r\n            const image = new Uint8Array(KwzParser.width * KwzParser.height);\r\n            image.fill(palette[0]); // fill with paper color first\r\n            for (let pixel = 0; pixel < image.length; pixel++) {\r\n                const a = layerA[pixel];\r\n                const b = layerB[pixel];\r\n                const c = layerC[pixel];\r\n                if (a !== 0)\r\n                    image[pixel] = palette[layerAOffset + a];\r\n                else if (b !== 0)\r\n                    image[pixel] = palette[layerBOffset + b];\r\n                else if (c !== 0)\r\n                    image[pixel] = palette[layerCOffset + c];\r\n            }\r\n            return image;\r\n        }\r\n        // for dsi gallery notes, bottom layer is ignored and edge is cropped\r\n        else {\r\n            const image = new Uint8Array(KwzParser.width * KwzParser.height);\r\n            image.fill(palette[0]); // fill with paper color first\r\n            const cropStartY = 32;\r\n            const cropStartX = 24;\r\n            const cropWidth = KwzParser.width - 64;\r\n            const cropHeight = KwzParser.height - 48;\r\n            const srcStride = KwzParser.width;\r\n            for (let y = cropStartY; y < cropHeight; y++) {\r\n                let srcPtr = y * srcStride;\r\n                for (let x = cropStartX; x < cropWidth; x++) {\r\n                    const a = layerA[srcPtr];\r\n                    const b = layerB[srcPtr];\r\n                    if (a !== 0)\r\n                        image[srcPtr] = palette[layerAOffset + a];\r\n                    else if (b !== 0)\r\n                        image[srcPtr] = palette[layerBOffset + b];\r\n                    srcPtr += 1;\r\n                }\r\n            }\r\n            return image;\r\n        }\r\n    }\r\n    /**\r\n     * Get the sound effect flags for every frame in the Flipnote\r\n     * @category Audio\r\n    */\r\n    decodeSoundFlags() {\r\n        const result = [];\r\n        for (let i = 0; i < this.frameCount; i++) {\r\n            result.push(this.getFrameSoundFlags(i));\r\n        }\r\n        return result;\r\n    }\r\n    /**\r\n     * Get the raw compressed audio data for a given track\r\n     * @returns Byte array\r\n     * @category Audio\r\n    */\r\n    getAudioTrackRaw(trackId) {\r\n        const trackMeta = this.soundMeta[trackId];\r\n        assert(trackMeta.ptr + trackMeta.length < this.byteLength);\r\n        return new Uint8Array(this.buffer, trackMeta.ptr, trackMeta.length);\r\n    }\r\n    /**\r\n     * Get the decoded audio data for a given track, using the track's native samplerate\r\n     * @returns Signed 16-bit PCM audio\r\n     * @category Audio\r\n    */\r\n    decodeAudioTrack(trackId) {\r\n        const adpcm = this.getAudioTrackRaw(trackId);\r\n        const output = new Int16Array(16364 * 60);\r\n        let outputPtr = 0;\r\n        // initial decoder state\r\n        // Flipnote 3D's initial values are actually buggy, so these aren't 1:1\r\n        let predictor = 0;\r\n        let stepIndex = 0;\r\n        let sample = 0;\r\n        let step = 0;\r\n        let diff = 0;\r\n        // we can still optionally enable the in-app values here\r\n        if (this.settings.originalAudioSettings)\r\n            stepIndex = 40;\r\n        // loop through each byte in the raw adpcm data\r\n        for (let adpcmPtr = 0; adpcmPtr < adpcm.length; adpcmPtr++) {\r\n            let currByte = adpcm[adpcmPtr];\r\n            let currBit = 0;\r\n            while (currBit < 8) {\r\n                // 2 bit sample\r\n                if (stepIndex < 18 || currBit > 4) {\r\n                    sample = currByte & 0x3;\r\n                    step = ADPCM_STEP_TABLE[stepIndex];\r\n                    diff = step >> 3;\r\n                    if (sample & 1)\r\n                        diff += step;\r\n                    if (sample & 2)\r\n                        diff = -diff;\r\n                    predictor += diff;\r\n                    stepIndex += ADPCM_INDEX_TABLE_2BIT[sample];\r\n                    currByte >>= 2;\r\n                    currBit += 2;\r\n                }\r\n                // 4 bit sample\r\n                else {\r\n                    sample = currByte & 0xf;\r\n                    step = ADPCM_STEP_TABLE[stepIndex];\r\n                    diff = step >> 3;\r\n                    if (sample & 1)\r\n                        diff += step >> 2;\r\n                    if (sample & 2)\r\n                        diff += step >> 1;\r\n                    if (sample & 4)\r\n                        diff += step;\r\n                    if (sample & 8)\r\n                        diff = -diff;\r\n                    predictor += diff;\r\n                    stepIndex += ADPCM_INDEX_TABLE_4BIT[sample];\r\n                    currByte >>= 4;\r\n                    currBit += 4;\r\n                }\r\n                stepIndex = clamp(stepIndex, 0, 79);\r\n                // clamp as 12 bit then scale to 16\r\n                predictor = clamp(predictor, -2048, 2047);\r\n                output[outputPtr] = predictor * 16;\r\n                outputPtr += 1;\r\n            }\r\n        }\r\n        return output.slice(0, outputPtr);\r\n    }\r\n    /**\r\n     * Get the decoded audio data for a given track, using the specified samplerate\r\n     * @returns Signed 16-bit PCM audio\r\n     * @category Audio\r\n    */\r\n    getAudioTrackPcm(trackId, dstFreq = this.sampleRate) {\r\n        const srcPcm = this.decodeAudioTrack(trackId);\r\n        let srcFreq = this.rawSampleRate;\r\n        if (trackId === FlipnoteAudioTrack.BGM) {\r\n            const bgmAdjust = (1 / this.bgmrate) / (1 / this.framerate);\r\n            srcFreq = this.rawSampleRate * bgmAdjust;\r\n        }\r\n        if (srcFreq !== dstFreq)\r\n            return pcmDsAudioResample(srcPcm, srcFreq, dstFreq);\r\n        return srcPcm;\r\n    }\r\n    pcmAudioMix(src, dst, dstOffset = 0) {\r\n        const srcSize = src.length;\r\n        const dstSize = dst.length;\r\n        for (let n = 0; n < srcSize; n++) {\r\n            if (dstOffset + n > dstSize)\r\n                break;\r\n            // half src volume\r\n            const samp = dst[dstOffset + n] + src[n];\r\n            dst[dstOffset + n] = clamp(samp, -32768, 32767);\r\n        }\r\n    }\r\n    /**\r\n     * Get the full mixed audio for the Flipnote, using the specified samplerate\r\n     * @returns Signed 16-bit PCM audio\r\n     * @category Audio\r\n    */\r\n    getAudioMasterPcm(dstFreq = this.sampleRate) {\r\n        const dstSize = Math.ceil(this.duration * dstFreq);\r\n        const master = new Int16Array(dstSize);\r\n        const hasBgm = this.hasAudioTrack(FlipnoteAudioTrack.BGM);\r\n        const hasSe1 = this.hasAudioTrack(FlipnoteAudioTrack.SE1);\r\n        const hasSe2 = this.hasAudioTrack(FlipnoteAudioTrack.SE2);\r\n        const hasSe3 = this.hasAudioTrack(FlipnoteAudioTrack.SE3);\r\n        const hasSe4 = this.hasAudioTrack(FlipnoteAudioTrack.SE4);\r\n        // Mix background music\r\n        if (hasBgm) {\r\n            const bgmPcm = this.getAudioTrackPcm(FlipnoteAudioTrack.BGM, dstFreq);\r\n            this.pcmAudioMix(bgmPcm, master, 0);\r\n        }\r\n        // Mix sound effects\r\n        if (hasSe1 || hasSe2 || hasSe3 || hasSe4) {\r\n            const samplesPerFrame = dstFreq / this.framerate;\r\n            const se1Pcm = hasSe1 ? this.getAudioTrackPcm(FlipnoteAudioTrack.SE1, dstFreq) : null;\r\n            const se2Pcm = hasSe2 ? this.getAudioTrackPcm(FlipnoteAudioTrack.SE2, dstFreq) : null;\r\n            const se3Pcm = hasSe3 ? this.getAudioTrackPcm(FlipnoteAudioTrack.SE3, dstFreq) : null;\r\n            const se4Pcm = hasSe4 ? this.getAudioTrackPcm(FlipnoteAudioTrack.SE4, dstFreq) : null;\r\n            for (let i = 0; i < this.frameCount; i++) {\r\n                const seFlags = this.getFrameSoundFlags(i);\r\n                const seOffset = Math.ceil(i * samplesPerFrame);\r\n                if (hasSe1 && seFlags[0])\r\n                    this.pcmAudioMix(se1Pcm, master, seOffset);\r\n                if (hasSe2 && seFlags[1])\r\n                    this.pcmAudioMix(se2Pcm, master, seOffset);\r\n                if (hasSe3 && seFlags[2])\r\n                    this.pcmAudioMix(se3Pcm, master, seOffset);\r\n                if (hasSe4 && seFlags[3])\r\n                    this.pcmAudioMix(se4Pcm, master, seOffset);\r\n            }\r\n        }\r\n        this.audioClipRatio = pcmGetClippingRatio(master);\r\n        return master;\r\n    }\r\n}\r\n/** Default KWZ parser settings */\r\nKwzParser.defaultSettings = {\r\n    quickMeta: false,\r\n    dsiGalleryNote: false,\r\n    originalAudioSettings: false\r\n};\r\n/** File format type */\r\nKwzParser.format = FlipnoteFormat.KWZ;\r\n/** Animation frame width */\r\nKwzParser.width = 320;\r\n/** Animation frame height */\r\nKwzParser.height = 240;\r\n/** Number of animation frame layers */\r\nKwzParser.numLayers = 3;\r\n/** Audio track base sample rate */\r\nKwzParser.rawSampleRate = 16364;\r\n/** Audio output sample rate. NOTE: probably isn't accurate, full KWZ audio stack is still on the todo */\r\nKwzParser.sampleRate = 16364;\r\n/** Global animation frame color palette */\r\nKwzParser.globalPalette = [\r\n    KWZ_PALETTE.WHITE,\r\n    KWZ_PALETTE.BLACK,\r\n    KWZ_PALETTE.RED,\r\n    KWZ_PALETTE.YELLOW,\r\n    KWZ_PALETTE.GREEN,\r\n    KWZ_PALETTE.BLUE,\r\n    KWZ_PALETTE.NONE,\r\n];\n\n/**\r\n * Load a Flipnote from a given source, returning a promise with a parser object.\r\n * It will auto-detect the Flipnote format and return either a {@link PpmParser} or {@link KwzParser} accordingly.\r\n *\r\n * @param source - Source to load a Flipnote from. Depending on the operating envionment, this can be:\r\n * - A string representing a web URL\r\n * - An {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer | ArrayBuffer}\r\n * - A {@link https://developer.mozilla.org/en-US/docs/Web/API/File | File} object (Browser only)\r\n * - A {@link https://nodejs.org/api/buffer.html | Buffer} object (NodeJS only)\r\n * @param parserConfig - Config settings to pass to the parser, see {@link FlipnoteParserSettings}\r\n */\r\nfunction parseSource(source, parserConfig) {\r\n    return loadSource(source)\r\n        .then((arrayBuffer) => {\r\n        return new Promise((resolve, reject) => {\r\n            // check the buffer's magic to identify which format it uses\r\n            const magicBytes = new Uint8Array(arrayBuffer.slice(0, 4));\r\n            const magic = (magicBytes[0] << 24) | (magicBytes[1] << 16) | (magicBytes[2] << 8) | magicBytes[3];\r\n            // check if magic is PARA (ppm magic)\r\n            if (magic === 0x50415241)\r\n                resolve(new PpmParser(arrayBuffer, parserConfig));\r\n            // check if magic is KFH (kwz magic)\r\n            else if ((magic & 0xFFFFFF00) === 0x4B464800)\r\n                resolve(new KwzParser(arrayBuffer, parserConfig));\r\n            // TODO: KIC (f3ds folder icon) magic check\r\n            else\r\n                reject();\r\n        });\r\n    });\r\n}\n\n/**\r\n * Player event types\r\n * @internal\r\n */\r\nvar PlayerEvent;\r\n(function (PlayerEvent) {\r\n    PlayerEvent[\"__Any\"] = \"any\";\r\n    PlayerEvent[\"Play\"] = \"play\";\r\n    PlayerEvent[\"Pause\"] = \"pause\";\r\n    PlayerEvent[\"CanPlay\"] = \"canplay\";\r\n    PlayerEvent[\"CanPlayThrough\"] = \"canplaythrough\";\r\n    PlayerEvent[\"SeekStart\"] = \"seeking\";\r\n    PlayerEvent[\"SeekEnd\"] = \"seeked\";\r\n    PlayerEvent[\"Duration\"] = \"durationchange\";\r\n    PlayerEvent[\"Loop\"] = \"loop\";\r\n    PlayerEvent[\"Ended\"] = \"ended\";\r\n    PlayerEvent[\"VolumeChange\"] = \"volumechange\";\r\n    PlayerEvent[\"Progress\"] = \"progress\";\r\n    PlayerEvent[\"TimeUpdate\"] = \"timeupdate\";\r\n    PlayerEvent[\"FrameUpdate\"] = \"frameupdate\";\r\n    PlayerEvent[\"FrameNext\"] = \"framenext\";\r\n    PlayerEvent[\"FramePrev\"] = \"frameprev\";\r\n    PlayerEvent[\"FrameFirst\"] = \"framefirst\";\r\n    PlayerEvent[\"FrameLast\"] = \"framelast\";\r\n    PlayerEvent[\"Ready\"] = \"ready\";\r\n    PlayerEvent[\"Load\"] = \"load\";\r\n    PlayerEvent[\"LoadStart\"] = \"loadstart\";\r\n    PlayerEvent[\"LoadedData\"] = \"loadeddata\";\r\n    PlayerEvent[\"LoadedMeta\"] = \"loadedmetadata\";\r\n    PlayerEvent[\"Emptied\"] = \"emptied\";\r\n    PlayerEvent[\"Close\"] = \"close\";\r\n    PlayerEvent[\"Error\"] = \"error\";\r\n    PlayerEvent[\"Destroy\"] = \"destroy\";\r\n})(PlayerEvent || (PlayerEvent = {}));\r\n/** @internal */\r\nconst supportedEvents = [\r\n    PlayerEvent.Play,\r\n    PlayerEvent.Pause,\r\n    PlayerEvent.CanPlay,\r\n    PlayerEvent.CanPlayThrough,\r\n    PlayerEvent.SeekStart,\r\n    PlayerEvent.SeekEnd,\r\n    PlayerEvent.Duration,\r\n    PlayerEvent.Loop,\r\n    PlayerEvent.Ended,\r\n    PlayerEvent.VolumeChange,\r\n    PlayerEvent.Progress,\r\n    PlayerEvent.TimeUpdate,\r\n    PlayerEvent.FrameUpdate,\r\n    PlayerEvent.FrameNext,\r\n    PlayerEvent.FramePrev,\r\n    PlayerEvent.FrameFirst,\r\n    PlayerEvent.FrameLast,\r\n    PlayerEvent.Ready,\r\n    PlayerEvent.Load,\r\n    PlayerEvent.LoadStart,\r\n    PlayerEvent.LoadedData,\r\n    PlayerEvent.LoadedMeta,\r\n    PlayerEvent.Emptied,\r\n    PlayerEvent.Close,\r\n    PlayerEvent.Error,\r\n];\n\n/* @license twgl.js 4.15.2 Copyright (c) 2015, Gregg Tavares All Rights Reserved.\nAvailable via the MIT license.\nsee: http://github.com/greggman/twgl.js for details */\n\n/*\n * Copyright 2019 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\n/* DataType */\nconst BYTE                           = 0x1400;\nconst UNSIGNED_BYTE                  = 0x1401;\nconst SHORT                          = 0x1402;\nconst UNSIGNED_SHORT                 = 0x1403;\nconst INT                            = 0x1404;\nconst UNSIGNED_INT                   = 0x1405;\nconst FLOAT                          = 0x1406;\n\n/**\n * Get the GL type for a typedArray\n * @param {ArrayBufferView} typedArray a typedArray\n * @return {number} the GL type for array. For example pass in an `Int8Array` and `gl.BYTE` will\n *   be returned. Pass in a `Uint32Array` and `gl.UNSIGNED_INT` will be returned\n * @memberOf module:twgl/typedArray\n */\nfunction getGLTypeForTypedArray(typedArray) {\n  if (typedArray instanceof Int8Array)         { return BYTE; }           // eslint-disable-line\n  if (typedArray instanceof Uint8Array)        { return UNSIGNED_BYTE; }  // eslint-disable-line\n  if (typedArray instanceof Uint8ClampedArray) { return UNSIGNED_BYTE; }  // eslint-disable-line\n  if (typedArray instanceof Int16Array)        { return SHORT; }          // eslint-disable-line\n  if (typedArray instanceof Uint16Array)       { return UNSIGNED_SHORT; } // eslint-disable-line\n  if (typedArray instanceof Int32Array)        { return INT; }            // eslint-disable-line\n  if (typedArray instanceof Uint32Array)       { return UNSIGNED_INT; }   // eslint-disable-line\n  if (typedArray instanceof Float32Array)      { return FLOAT; }          // eslint-disable-line\n  throw new Error('unsupported typed array type');\n}\n\n/**\n * Get the GL type for a typedArray type\n * @param {ArrayBufferView} typedArrayType a typedArray constructor\n * @return {number} the GL type for type. For example pass in `Int8Array` and `gl.BYTE` will\n *   be returned. Pass in `Uint32Array` and `gl.UNSIGNED_INT` will be returned\n * @memberOf module:twgl/typedArray\n */\nfunction getGLTypeForTypedArrayType(typedArrayType) {\n  if (typedArrayType === Int8Array)         { return BYTE; }           // eslint-disable-line\n  if (typedArrayType === Uint8Array)        { return UNSIGNED_BYTE; }  // eslint-disable-line\n  if (typedArrayType === Uint8ClampedArray) { return UNSIGNED_BYTE; }  // eslint-disable-line\n  if (typedArrayType === Int16Array)        { return SHORT; }          // eslint-disable-line\n  if (typedArrayType === Uint16Array)       { return UNSIGNED_SHORT; } // eslint-disable-line\n  if (typedArrayType === Int32Array)        { return INT; }            // eslint-disable-line\n  if (typedArrayType === Uint32Array)       { return UNSIGNED_INT; }   // eslint-disable-line\n  if (typedArrayType === Float32Array)      { return FLOAT; }          // eslint-disable-line\n  throw new Error('unsupported typed array type');\n}\n\nconst isArrayBuffer = typeof SharedArrayBuffer !== 'undefined'\n  ? function isArrayBufferOrSharedArrayBuffer(a) {\n    return a && a.buffer && (a.buffer instanceof ArrayBuffer || a.buffer instanceof SharedArrayBuffer);\n  }\n  : function isArrayBuffer(a) {\n    return a && a.buffer && a.buffer instanceof ArrayBuffer;\n  };\n\nfunction isBuffer(gl, t) {\n  return typeof WebGLBuffer !== 'undefined' && t instanceof WebGLBuffer;\n}\n\nfunction isTexture(gl, t) {\n  return typeof WebGLTexture !== 'undefined' && t instanceof WebGLTexture;\n}\n\n/*\n * Copyright 2019 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\nconst STATIC_DRAW                  = 0x88e4;\nconst ARRAY_BUFFER                 = 0x8892;\nconst ELEMENT_ARRAY_BUFFER         = 0x8893;\nconst BUFFER_SIZE                  = 0x8764;\n\nconst BYTE$1                         = 0x1400;\nconst UNSIGNED_BYTE$1                = 0x1401;\nconst SHORT$1                        = 0x1402;\nconst UNSIGNED_SHORT$1               = 0x1403;\nconst INT$1                          = 0x1404;\nconst UNSIGNED_INT$1                 = 0x1405;\nconst FLOAT$1                        = 0x1406;\nconst defaults = {\n  attribPrefix: \"\",\n};\n\nfunction setBufferFromTypedArray(gl, type, buffer, array, drawType) {\n  gl.bindBuffer(type, buffer);\n  gl.bufferData(type, array, drawType || STATIC_DRAW);\n}\n\n/**\n * Given typed array creates a WebGLBuffer and copies the typed array\n * into it.\n *\n * @param {WebGLRenderingContext} gl A WebGLRenderingContext\n * @param {ArrayBuffer|SharedArrayBuffer|ArrayBufferView|WebGLBuffer} typedArray the typed array. Note: If a WebGLBuffer is passed in it will just be returned. No action will be taken\n * @param {number} [type] the GL bind type for the buffer. Default = `gl.ARRAY_BUFFER`.\n * @param {number} [drawType] the GL draw type for the buffer. Default = 'gl.STATIC_DRAW`.\n * @return {WebGLBuffer} the created WebGLBuffer\n * @memberOf module:twgl/attributes\n */\nfunction createBufferFromTypedArray(gl, typedArray, type, drawType) {\n  if (isBuffer(gl, typedArray)) {\n    return typedArray;\n  }\n  type = type || ARRAY_BUFFER;\n  const buffer = gl.createBuffer();\n  setBufferFromTypedArray(gl, type, buffer, typedArray, drawType);\n  return buffer;\n}\n\nfunction isIndices(name) {\n  return name === \"indices\";\n}\n\n// This is really just a guess. Though I can't really imagine using\n// anything else? Maybe for some compression?\nfunction getNormalizationForTypedArray(typedArray) {\n  if (typedArray instanceof Int8Array)    { return true; }  // eslint-disable-line\n  if (typedArray instanceof Uint8Array)   { return true; }  // eslint-disable-line\n  return false;\n}\n\n// This is really just a guess. Though I can't really imagine using\n// anything else? Maybe for some compression?\nfunction getNormalizationForTypedArrayType(typedArrayType) {\n  if (typedArrayType === Int8Array)    { return true; }  // eslint-disable-line\n  if (typedArrayType === Uint8Array)   { return true; }  // eslint-disable-line\n  return false;\n}\n\nfunction getArray(array) {\n  return array.length ? array : array.data;\n}\n\nconst texcoordRE = /coord|texture/i;\nconst colorRE = /color|colour/i;\n\nfunction guessNumComponentsFromName(name, length) {\n  let numComponents;\n  if (texcoordRE.test(name)) {\n    numComponents = 2;\n  } else if (colorRE.test(name)) {\n    numComponents = 4;\n  } else {\n    numComponents = 3;  // position, normals, indices ...\n  }\n\n  if (length % numComponents > 0) {\n    throw new Error(`Can not guess numComponents for attribute '${name}'. Tried ${numComponents} but ${length} values is not evenly divisible by ${numComponents}. You should specify it.`);\n  }\n\n  return numComponents;\n}\n\nfunction getNumComponents(array, arrayName) {\n  return array.numComponents || array.size || guessNumComponentsFromName(arrayName, getArray(array).length);\n}\n\nfunction makeTypedArray(array, name) {\n  if (isArrayBuffer(array)) {\n    return array;\n  }\n\n  if (isArrayBuffer(array.data)) {\n    return array.data;\n  }\n\n  if (Array.isArray(array)) {\n    array = {\n      data: array,\n    };\n  }\n\n  let Type = array.type;\n  if (!Type) {\n    if (isIndices(name)) {\n      Type = Uint16Array;\n    } else {\n      Type = Float32Array;\n    }\n  }\n  return new Type(array.data);\n}\n\n/**\n * The info for an attribute. This is effectively just the arguments to `gl.vertexAttribPointer` plus the WebGLBuffer\n * for the attribute.\n *\n * @typedef {Object} AttribInfo\n * @property {number[]|ArrayBufferView} [value] a constant value for the attribute. Note: if this is set the attribute will be\n *    disabled and set to this constant value and all other values will be ignored.\n * @property {number} [numComponents] the number of components for this attribute.\n * @property {number} [size] synonym for `numComponents`.\n * @property {number} [type] the type of the attribute (eg. `gl.FLOAT`, `gl.UNSIGNED_BYTE`, etc...) Default = `gl.FLOAT`\n * @property {boolean} [normalize] whether or not to normalize the data. Default = false\n * @property {number} [offset] offset into buffer in bytes. Default = 0\n * @property {number} [stride] the stride in bytes per element. Default = 0\n * @property {number} [divisor] the divisor in instances. Default = undefined. Note: undefined = don't call gl.vertexAttribDivisor\n *    where as anything else = do call it with this value\n * @property {WebGLBuffer} buffer the buffer that contains the data for this attribute\n * @property {number} [drawType] the draw type passed to gl.bufferData. Default = gl.STATIC_DRAW\n * @memberOf module:twgl\n */\n\n/**\n * Use this type of array spec when TWGL can't guess the type or number of components of an array\n * @typedef {Object} FullArraySpec\n * @property {number[]|ArrayBufferView} [value] a constant value for the attribute. Note: if this is set the attribute will be\n *    disabled and set to this constant value and all other values will be ignored.\n * @property {(number|number[]|ArrayBufferView)} data The data of the array. A number alone becomes the number of elements of type.\n * @property {number} [numComponents] number of components for `vertexAttribPointer`. Default is based on the name of the array.\n *    If `coord` is in the name assumes `numComponents = 2`.\n *    If `color` is in the name assumes `numComponents = 4`.\n *    otherwise assumes `numComponents = 3`\n * @property {constructor} [type] type. This is only used if `data` is a JavaScript array. It is the constructor for the typedarray. (eg. `Uint8Array`).\n * For example if you want colors in a `Uint8Array` you might have a `FullArraySpec` like `{ type: Uint8Array, data: [255,0,255,255, ...], }`.\n * @property {number} [size] synonym for `numComponents`.\n * @property {boolean} [normalize] normalize for `vertexAttribPointer`. Default is true if type is `Int8Array` or `Uint8Array` otherwise false.\n * @property {number} [stride] stride for `vertexAttribPointer`. Default = 0\n * @property {number} [offset] offset for `vertexAttribPointer`. Default = 0\n * @property {number} [divisor] divisor for `vertexAttribDivisor`. Default = undefined. Note: undefined = don't call gl.vertexAttribDivisor\n *    where as anything else = do call it with this value\n * @property {string} [attrib] name of attribute this array maps to. Defaults to same name as array prefixed by the default attribPrefix.\n * @property {string} [name] synonym for `attrib`.\n * @property {string} [attribName] synonym for `attrib`.\n * @property {WebGLBuffer} [buffer] Buffer to use for this attribute. This lets you use your own buffer\n *    but you will need to supply `numComponents` and `type`. You can effectively pass an `AttribInfo`\n *    to provide this. Example:\n *\n *         const bufferInfo1 = twgl.createBufferInfoFromArrays(gl, {\n *           position: [1, 2, 3, ... ],\n *         });\n *         const bufferInfo2 = twgl.createBufferInfoFromArrays(gl, {\n *           position: bufferInfo1.attribs.position,  // use the same buffer from bufferInfo1\n *         });\n *\n * @memberOf module:twgl\n */\n\n/**\n * An individual array in {@link module:twgl.Arrays}\n *\n * When passed to {@link module:twgl.createBufferInfoFromArrays} if an ArraySpec is `number[]` or `ArrayBufferView`\n * the types will be guessed based on the name. `indices` will be `Uint16Array`, everything else will\n * be `Float32Array`. If an ArraySpec is a number it's the number of floats for an empty (zeroed) buffer.\n *\n * @typedef {(number|number[]|ArrayBufferView|module:twgl.FullArraySpec)} ArraySpec\n * @memberOf module:twgl\n */\n\n/**\n * This is a JavaScript object of arrays by name. The names should match your shader's attributes. If your\n * attributes have a common prefix you can specify it by calling {@link module:twgl.setAttributePrefix}.\n *\n *     Bare JavaScript Arrays\n *\n *         var arrays = {\n *            position: [-1, 1, 0],\n *            normal: [0, 1, 0],\n *            ...\n *         }\n *\n *     Bare TypedArrays\n *\n *         var arrays = {\n *            position: new Float32Array([-1, 1, 0]),\n *            color: new Uint8Array([255, 128, 64, 255]),\n *            ...\n *         }\n *\n * *   Will guess at `numComponents` if not specified based on name.\n *\n *     If `coord` is in the name assumes `numComponents = 2`\n *\n *     If `color` is in the name assumes `numComponents = 4`\n *\n *     otherwise assumes `numComponents = 3`\n *\n * Objects with various fields. See {@link module:twgl.FullArraySpec}.\n *\n *     var arrays = {\n *       position: { numComponents: 3, data: [0, 0, 0, 10, 0, 0, 0, 10, 0, 10, 10, 0], },\n *       texcoord: { numComponents: 2, data: [0, 0, 0, 1, 1, 0, 1, 1],                 },\n *       normal:   { numComponents: 3, data: [0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1],     },\n *       indices:  { numComponents: 3, data: [0, 1, 2, 1, 2, 3],                       },\n *     };\n *\n * @typedef {Object.<string, module:twgl.ArraySpec>} Arrays\n * @memberOf module:twgl\n */\n\n\n/**\n * Creates a set of attribute data and WebGLBuffers from set of arrays\n *\n * Given\n *\n *      var arrays = {\n *        position: { numComponents: 3, data: [0, 0, 0, 10, 0, 0, 0, 10, 0, 10, 10, 0], },\n *        texcoord: { numComponents: 2, data: [0, 0, 0, 1, 1, 0, 1, 1],                 },\n *        normal:   { numComponents: 3, data: [0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1],     },\n *        color:    { numComponents: 4, data: [255, 255, 255, 255, 255, 0, 0, 255, 0, 0, 255, 255], type: Uint8Array, },\n *        indices:  { numComponents: 3, data: [0, 1, 2, 1, 2, 3],                       },\n *      };\n *\n * returns something like\n *\n *      var attribs = {\n *        position: { numComponents: 3, type: gl.FLOAT,         normalize: false, buffer: WebGLBuffer, },\n *        texcoord: { numComponents: 2, type: gl.FLOAT,         normalize: false, buffer: WebGLBuffer, },\n *        normal:   { numComponents: 3, type: gl.FLOAT,         normalize: false, buffer: WebGLBuffer, },\n *        color:    { numComponents: 4, type: gl.UNSIGNED_BYTE, normalize: true,  buffer: WebGLBuffer, },\n *      };\n *\n * notes:\n *\n * *   Arrays can take various forms\n *\n *     Bare JavaScript Arrays\n *\n *         var arrays = {\n *            position: [-1, 1, 0],\n *            normal: [0, 1, 0],\n *            ...\n *         }\n *\n *     Bare TypedArrays\n *\n *         var arrays = {\n *            position: new Float32Array([-1, 1, 0]),\n *            color: new Uint8Array([255, 128, 64, 255]),\n *            ...\n *         }\n *\n * *   Will guess at `numComponents` if not specified based on name.\n *\n *     If `coord` is in the name assumes `numComponents = 2`\n *\n *     If `color` is in the name assumes `numComponents = 4`\n *\n *     otherwise assumes `numComponents = 3`\n *\n * @param {WebGLRenderingContext} gl The webgl rendering context.\n * @param {module:twgl.Arrays} arrays The arrays\n * @param {module:twgl.BufferInfo} [srcBufferInfo] a BufferInfo to copy from\n *   This lets you share buffers. Any arrays you supply will override\n *   the buffers from srcBufferInfo.\n * @return {Object.<string, module:twgl.AttribInfo>} the attribs\n * @memberOf module:twgl/attributes\n */\nfunction createAttribsFromArrays(gl, arrays) {\n  const attribs = {};\n  Object.keys(arrays).forEach(function(arrayName) {\n    if (!isIndices(arrayName)) {\n      const array = arrays[arrayName];\n      const attribName = array.attrib || array.name || array.attribName || (defaults.attribPrefix + arrayName);\n      if (array.value) {\n        if (!Array.isArray(array.value) && !isArrayBuffer(array.value)) {\n          throw new Error('array.value is not array or typedarray');\n        }\n        attribs[attribName] = {\n          value: array.value,\n        };\n      } else {\n        let buffer;\n        let type;\n        let normalization;\n        let numComponents;\n        if (array.buffer && array.buffer instanceof WebGLBuffer) {\n          buffer = array.buffer;\n          numComponents = array.numComponents || array.size;\n          type = array.type;\n          normalization = array.normalize;\n        } else if (typeof array === \"number\" || typeof array.data === \"number\") {\n          const numValues = array.data || array;\n          const arrayType = array.type || Float32Array;\n          const numBytes = numValues * arrayType.BYTES_PER_ELEMENT;\n          type = getGLTypeForTypedArrayType(arrayType);\n          normalization = array.normalize !== undefined ? array.normalize : getNormalizationForTypedArrayType(arrayType);\n          numComponents = array.numComponents || array.size || guessNumComponentsFromName(arrayName, numValues);\n          buffer = gl.createBuffer();\n          gl.bindBuffer(ARRAY_BUFFER, buffer);\n          gl.bufferData(ARRAY_BUFFER, numBytes, array.drawType || STATIC_DRAW);\n        } else {\n          const typedArray = makeTypedArray(array, arrayName);\n          buffer = createBufferFromTypedArray(gl, typedArray, undefined, array.drawType);\n          type = getGLTypeForTypedArray(typedArray);\n          normalization = array.normalize !== undefined ? array.normalize : getNormalizationForTypedArray(typedArray);\n          numComponents = getNumComponents(array, arrayName);\n        }\n        attribs[attribName] = {\n          buffer:        buffer,\n          numComponents: numComponents,\n          type:          type,\n          normalize:     normalization,\n          stride:        array.stride || 0,\n          offset:        array.offset || 0,\n          divisor:       array.divisor === undefined ? undefined : array.divisor,\n          drawType:      array.drawType,\n        };\n      }\n    }\n  });\n  gl.bindBuffer(ARRAY_BUFFER, null);\n  return attribs;\n}\n\nfunction getBytesPerValueForGLType(gl, type) {\n  if (type === BYTE$1)           return 1;  // eslint-disable-line\n  if (type === UNSIGNED_BYTE$1)  return 1;  // eslint-disable-line\n  if (type === SHORT$1)          return 2;  // eslint-disable-line\n  if (type === UNSIGNED_SHORT$1) return 2;  // eslint-disable-line\n  if (type === INT$1)            return 4;  // eslint-disable-line\n  if (type === UNSIGNED_INT$1)   return 4;  // eslint-disable-line\n  if (type === FLOAT$1)          return 4;  // eslint-disable-line\n  return 0;\n}\n\n// Tries to get the number of elements from a set of arrays.\nconst positionKeys = ['position', 'positions', 'a_position'];\n\nfunction getNumElementsFromAttributes(gl, attribs) {\n  let key;\n  let ii;\n  for (ii = 0; ii < positionKeys.length; ++ii) {\n    key = positionKeys[ii];\n    if (key in attribs) {\n      break;\n    }\n    key = defaults.attribPrefix + key;\n    if (key in attribs) {\n      break;\n    }\n  }\n  if (ii === positionKeys.length) {\n    key = Object.keys(attribs)[0];\n  }\n  const attrib = attribs[key];\n  gl.bindBuffer(ARRAY_BUFFER, attrib.buffer);\n  const numBytes = gl.getBufferParameter(ARRAY_BUFFER, BUFFER_SIZE);\n  gl.bindBuffer(ARRAY_BUFFER, null);\n\n  const bytesPerValue = getBytesPerValueForGLType(gl, attrib.type);\n  const totalElements = numBytes / bytesPerValue;\n  const numComponents = attrib.numComponents || attrib.size;\n  // TODO: check stride\n  const numElements = totalElements / numComponents;\n  if (numElements % 1 !== 0) {\n    throw new Error(`numComponents ${numComponents} not correct for length ${length}`);\n  }\n  return numElements;\n}\n\n/**\n * @typedef {Object} BufferInfo\n * @property {number} numElements The number of elements to pass to `gl.drawArrays` or `gl.drawElements`.\n * @property {number} [elementType] The type of indices `UNSIGNED_BYTE`, `UNSIGNED_SHORT` etc..\n * @property {WebGLBuffer} [indices] The indices `ELEMENT_ARRAY_BUFFER` if any indices exist.\n * @property {Object.<string, module:twgl.AttribInfo>} [attribs] The attribs appropriate to call `setAttributes`\n * @memberOf module:twgl\n */\n\n/**\n * Creates a BufferInfo from an object of arrays.\n *\n * This can be passed to {@link module:twgl.setBuffersAndAttributes} and to\n * {@link module:twgl:drawBufferInfo}.\n *\n * Given an object like\n *\n *     var arrays = {\n *       position: { numComponents: 3, data: [0, 0, 0, 10, 0, 0, 0, 10, 0, 10, 10, 0], },\n *       texcoord: { numComponents: 2, data: [0, 0, 0, 1, 1, 0, 1, 1],                 },\n *       normal:   { numComponents: 3, data: [0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1],     },\n *       indices:  { numComponents: 3, data: [0, 1, 2, 1, 2, 3],                       },\n *     };\n *\n *  Creates an BufferInfo like this\n *\n *     bufferInfo = {\n *       numElements: 4,        // or whatever the number of elements is\n *       indices: WebGLBuffer,  // this property will not exist if there are no indices\n *       attribs: {\n *         position: { buffer: WebGLBuffer, numComponents: 3, },\n *         normal:   { buffer: WebGLBuffer, numComponents: 3, },\n *         texcoord: { buffer: WebGLBuffer, numComponents: 2, },\n *       },\n *     };\n *\n *  The properties of arrays can be JavaScript arrays in which case the number of components\n *  will be guessed.\n *\n *     var arrays = {\n *        position: [0, 0, 0, 10, 0, 0, 0, 10, 0, 10, 10, 0],\n *        texcoord: [0, 0, 0, 1, 1, 0, 1, 1],\n *        normal:   [0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1],\n *        indices:  [0, 1, 2, 1, 2, 3],\n *     };\n *\n *  They can also be TypedArrays\n *\n *     var arrays = {\n *        position: new Float32Array([0, 0, 0, 10, 0, 0, 0, 10, 0, 10, 10, 0]),\n *        texcoord: new Float32Array([0, 0, 0, 1, 1, 0, 1, 1]),\n *        normal:   new Float32Array([0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1]),\n *        indices:  new Uint16Array([0, 1, 2, 1, 2, 3]),\n *     };\n *\n *  Or AugmentedTypedArrays\n *\n *     var positions = createAugmentedTypedArray(3, 4);\n *     var texcoords = createAugmentedTypedArray(2, 4);\n *     var normals   = createAugmentedTypedArray(3, 4);\n *     var indices   = createAugmentedTypedArray(3, 2, Uint16Array);\n *\n *     positions.push([0, 0, 0, 10, 0, 0, 0, 10, 0, 10, 10, 0]);\n *     texcoords.push([0, 0, 0, 1, 1, 0, 1, 1]);\n *     normals.push([0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1]);\n *     indices.push([0, 1, 2, 1, 2, 3]);\n *\n *     var arrays = {\n *        position: positions,\n *        texcoord: texcoords,\n *        normal:   normals,\n *        indices:  indices,\n *     };\n *\n * For the last example it is equivalent to\n *\n *     var bufferInfo = {\n *       attribs: {\n *         position: { numComponents: 3, buffer: gl.createBuffer(), },\n *         texcoord: { numComponents: 2, buffer: gl.createBuffer(), },\n *         normal: { numComponents: 3, buffer: gl.createBuffer(), },\n *       },\n *       indices: gl.createBuffer(),\n *       numElements: 6,\n *     };\n *\n *     gl.bindBuffer(gl.ARRAY_BUFFER, bufferInfo.attribs.position.buffer);\n *     gl.bufferData(gl.ARRAY_BUFFER, arrays.position, gl.STATIC_DRAW);\n *     gl.bindBuffer(gl.ARRAY_BUFFER, bufferInfo.attribs.texcoord.buffer);\n *     gl.bufferData(gl.ARRAY_BUFFER, arrays.texcoord, gl.STATIC_DRAW);\n *     gl.bindBuffer(gl.ARRAY_BUFFER, bufferInfo.attribs.normal.buffer);\n *     gl.bufferData(gl.ARRAY_BUFFER, arrays.normal, gl.STATIC_DRAW);\n *     gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, bufferInfo.indices);\n *     gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, arrays.indices, gl.STATIC_DRAW);\n *\n * @param {WebGLRenderingContext} gl A WebGLRenderingContext\n * @param {module:twgl.Arrays} arrays Your data\n * @param {module:twgl.BufferInfo} [srcBufferInfo] An existing\n *        buffer info to start from. WebGLBuffers etc specified\n *        in the srcBufferInfo will be used in a new BufferInfo\n *        with any arrays specified overriding the ones in\n *        srcBufferInfo.\n * @return {module:twgl.BufferInfo} A BufferInfo\n * @memberOf module:twgl/attributes\n */\nfunction createBufferInfoFromArrays(gl, arrays, srcBufferInfo) {\n  const newAttribs = createAttribsFromArrays(gl, arrays);\n  const bufferInfo = Object.assign({}, srcBufferInfo ? srcBufferInfo : {});\n  bufferInfo.attribs = Object.assign({}, srcBufferInfo ? srcBufferInfo.attribs : {}, newAttribs);\n  const indices = arrays.indices;\n  if (indices) {\n    const newIndices = makeTypedArray(indices, \"indices\");\n    bufferInfo.indices = createBufferFromTypedArray(gl, newIndices, ELEMENT_ARRAY_BUFFER);\n    bufferInfo.numElements = newIndices.length;\n    bufferInfo.elementType = getGLTypeForTypedArray(newIndices);\n  } else if (!bufferInfo.numElements) {\n    bufferInfo.numElements = getNumElementsFromAttributes(gl, bufferInfo.attribs);\n  }\n\n  return bufferInfo;\n}\n\n/*\n * Copyright 2019 Gregg Tavares\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\n/**\n * Gets the gl version as a number\n * @param {WebGLRenderingContext} gl A WebGLRenderingContext\n * @return {number} version of gl\n * @private\n */\n//function getVersionAsNumber(gl) {\n//  return parseFloat(gl.getParameter(gl.\"5.1.1\").substr(6));\n//}\n\n/**\n * Check if context is WebGL 2.0\n * @param {WebGLRenderingContext} gl A WebGLRenderingContext\n * @return {bool} true if it's WebGL 2.0\n * @memberOf module:twgl\n */\nfunction isWebGL2(gl) {\n  // This is the correct check but it's slow\n  //  return gl.getParameter(gl.\"5.1.1\").indexOf(\"WebGL 2.0\") === 0;\n  // This might also be the correct check but I'm assuming it's slow-ish\n  // return gl instanceof WebGL2RenderingContext;\n  return !!gl.texStorage2D;\n}\n\nconst TEXTURE0                       = 0x84c0;\n\nconst ARRAY_BUFFER$1                   = 0x8892;\n\nconst ACTIVE_UNIFORMS                = 0x8b86;\nconst ACTIVE_ATTRIBUTES              = 0x8b89;\nconst TRANSFORM_FEEDBACK_VARYINGS    = 0x8c83;\nconst ACTIVE_UNIFORM_BLOCKS          = 0x8a36;\nconst UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER   = 0x8a44;\nconst UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER = 0x8a46;\nconst UNIFORM_BLOCK_DATA_SIZE                     = 0x8a40;\nconst UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES        = 0x8a43;\n\nconst FLOAT$3                         = 0x1406;\nconst FLOAT_VEC2                    = 0x8B50;\nconst FLOAT_VEC3                    = 0x8B51;\nconst FLOAT_VEC4                    = 0x8B52;\nconst INT$3                           = 0x1404;\nconst INT_VEC2                      = 0x8B53;\nconst INT_VEC3                      = 0x8B54;\nconst INT_VEC4                      = 0x8B55;\nconst BOOL                          = 0x8B56;\nconst BOOL_VEC2                     = 0x8B57;\nconst BOOL_VEC3                     = 0x8B58;\nconst BOOL_VEC4                     = 0x8B59;\nconst FLOAT_MAT2                    = 0x8B5A;\nconst FLOAT_MAT3                    = 0x8B5B;\nconst FLOAT_MAT4                    = 0x8B5C;\nconst SAMPLER_2D                    = 0x8B5E;\nconst SAMPLER_CUBE                  = 0x8B60;\nconst SAMPLER_3D                    = 0x8B5F;\nconst SAMPLER_2D_SHADOW             = 0x8B62;\nconst FLOAT_MAT2x3                  = 0x8B65;\nconst FLOAT_MAT2x4                  = 0x8B66;\nconst FLOAT_MAT3x2                  = 0x8B67;\nconst FLOAT_MAT3x4                  = 0x8B68;\nconst FLOAT_MAT4x2                  = 0x8B69;\nconst FLOAT_MAT4x3                  = 0x8B6A;\nconst SAMPLER_2D_ARRAY              = 0x8DC1;\nconst SAMPLER_2D_ARRAY_SHADOW       = 0x8DC4;\nconst SAMPLER_CUBE_SHADOW           = 0x8DC5;\nconst UNSIGNED_INT$3                  = 0x1405;\nconst UNSIGNED_INT_VEC2             = 0x8DC6;\nconst UNSIGNED_INT_VEC3             = 0x8DC7;\nconst UNSIGNED_INT_VEC4             = 0x8DC8;\nconst INT_SAMPLER_2D                = 0x8DCA;\nconst INT_SAMPLER_3D                = 0x8DCB;\nconst INT_SAMPLER_CUBE              = 0x8DCC;\nconst INT_SAMPLER_2D_ARRAY          = 0x8DCF;\nconst UNSIGNED_INT_SAMPLER_2D       = 0x8DD2;\nconst UNSIGNED_INT_SAMPLER_3D       = 0x8DD3;\nconst UNSIGNED_INT_SAMPLER_CUBE     = 0x8DD4;\nconst UNSIGNED_INT_SAMPLER_2D_ARRAY = 0x8DD7;\n\nconst TEXTURE_2D$1                    = 0x0DE1;\nconst TEXTURE_CUBE_MAP$1              = 0x8513;\nconst TEXTURE_3D$1                    = 0x806F;\nconst TEXTURE_2D_ARRAY$1              = 0x8C1A;\n\nconst typeMap = {};\n\n/**\n * Returns the corresponding bind point for a given sampler type\n */\nfunction getBindPointForSamplerType(gl, type) {\n  return typeMap[type].bindPoint;\n}\n\n// This kind of sucks! If you could compose functions as in `var fn = gl[name];`\n// this code could be a lot smaller but that is sadly really slow (T_T)\n\nfunction floatSetter(gl, location) {\n  return function(v) {\n    gl.uniform1f(location, v);\n  };\n}\n\nfunction floatArraySetter(gl, location) {\n  return function(v) {\n    gl.uniform1fv(location, v);\n  };\n}\n\nfunction floatVec2Setter(gl, location) {\n  return function(v) {\n    gl.uniform2fv(location, v);\n  };\n}\n\nfunction floatVec3Setter(gl, location) {\n  return function(v) {\n    gl.uniform3fv(location, v);\n  };\n}\n\nfunction floatVec4Setter(gl, location) {\n  return function(v) {\n    gl.uniform4fv(location, v);\n  };\n}\n\nfunction intSetter(gl, location) {\n  return function(v) {\n    gl.uniform1i(location, v);\n  };\n}\n\nfunction intArraySetter(gl, location) {\n  return function(v) {\n    gl.uniform1iv(location, v);\n  };\n}\n\nfunction intVec2Setter(gl, location) {\n  return function(v) {\n    gl.uniform2iv(location, v);\n  };\n}\n\nfunction intVec3Setter(gl, location) {\n  return function(v) {\n    gl.uniform3iv(location, v);\n  };\n}\n\nfunction intVec4Setter(gl, location) {\n  return function(v) {\n    gl.uniform4iv(location, v);\n  };\n}\n\nfunction uintSetter(gl, location) {\n  return function(v) {\n    gl.uniform1ui(location, v);\n  };\n}\n\nfunction uintArraySetter(gl, location) {\n  return function(v) {\n    gl.uniform1uiv(location, v);\n  };\n}\n\nfunction uintVec2Setter(gl, location) {\n  return function(v) {\n    gl.uniform2uiv(location, v);\n  };\n}\n\nfunction uintVec3Setter(gl, location) {\n  return function(v) {\n    gl.uniform3uiv(location, v);\n  };\n}\n\nfunction uintVec4Setter(gl, location) {\n  return function(v) {\n    gl.uniform4uiv(location, v);\n  };\n}\n\nfunction floatMat2Setter(gl, location) {\n  return function(v) {\n    gl.uniformMatrix2fv(location, false, v);\n  };\n}\n\nfunction floatMat3Setter(gl, location) {\n  return function(v) {\n    gl.uniformMatrix3fv(location, false, v);\n  };\n}\n\nfunction floatMat4Setter(gl, location) {\n  return function(v) {\n    gl.uniformMatrix4fv(location, false, v);\n  };\n}\n\nfunction floatMat23Setter(gl, location) {\n  return function(v) {\n    gl.uniformMatrix2x3fv(location, false, v);\n  };\n}\n\nfunction floatMat32Setter(gl, location) {\n  return function(v) {\n    gl.uniformMatrix3x2fv(location, false, v);\n  };\n}\n\nfunction floatMat24Setter(gl, location) {\n  return function(v) {\n    gl.uniformMatrix2x4fv(location, false, v);\n  };\n}\n\nfunction floatMat42Setter(gl, location) {\n  return function(v) {\n    gl.uniformMatrix4x2fv(location, false, v);\n  };\n}\n\nfunction floatMat34Setter(gl, location) {\n  return function(v) {\n    gl.uniformMatrix3x4fv(location, false, v);\n  };\n}\n\nfunction floatMat43Setter(gl, location) {\n  return function(v) {\n    gl.uniformMatrix4x3fv(location, false, v);\n  };\n}\n\nfunction samplerSetter(gl, type, unit, location) {\n  const bindPoint = getBindPointForSamplerType(gl, type);\n  return isWebGL2(gl) ? function(textureOrPair) {\n    let texture;\n    let sampler;\n    if (isTexture(gl, textureOrPair)) {\n      texture = textureOrPair;\n      sampler = null;\n    } else {\n      texture = textureOrPair.texture;\n      sampler = textureOrPair.sampler;\n    }\n    gl.uniform1i(location, unit);\n    gl.activeTexture(TEXTURE0 + unit);\n    gl.bindTexture(bindPoint, texture);\n    gl.bindSampler(unit, sampler);\n  } : function(texture) {\n    gl.uniform1i(location, unit);\n    gl.activeTexture(TEXTURE0 + unit);\n    gl.bindTexture(bindPoint, texture);\n  };\n}\n\nfunction samplerArraySetter(gl, type, unit, location, size) {\n  const bindPoint = getBindPointForSamplerType(gl, type);\n  const units = new Int32Array(size);\n  for (let ii = 0; ii < size; ++ii) {\n    units[ii] = unit + ii;\n  }\n\n  return isWebGL2(gl) ? function(textures) {\n    gl.uniform1iv(location, units);\n    textures.forEach(function(textureOrPair, index) {\n      gl.activeTexture(TEXTURE0 + units[index]);\n      let texture;\n      let sampler;\n      if (isTexture(gl, textureOrPair)) {\n        texture = textureOrPair;\n        sampler = null;\n      } else {\n        texture = textureOrPair.texture;\n        sampler = textureOrPair.sampler;\n      }\n      gl.bindSampler(unit, sampler);\n      gl.bindTexture(bindPoint, texture);\n    });\n  } : function(textures) {\n    gl.uniform1iv(location, units);\n    textures.forEach(function(texture, index) {\n      gl.activeTexture(TEXTURE0 + units[index]);\n      gl.bindTexture(bindPoint, texture);\n    });\n  };\n}\n\ntypeMap[FLOAT$3]                         = { Type: Float32Array, size:  4, setter: floatSetter,      arraySetter: floatArraySetter, };\ntypeMap[FLOAT_VEC2]                    = { Type: Float32Array, size:  8, setter: floatVec2Setter,  };\ntypeMap[FLOAT_VEC3]                    = { Type: Float32Array, size: 12, setter: floatVec3Setter,  };\ntypeMap[FLOAT_VEC4]                    = { Type: Float32Array, size: 16, setter: floatVec4Setter,  };\ntypeMap[INT$3]                           = { Type: Int32Array,   size:  4, setter: intSetter,        arraySetter: intArraySetter, };\ntypeMap[INT_VEC2]                      = { Type: Int32Array,   size:  8, setter: intVec2Setter,    };\ntypeMap[INT_VEC3]                      = { Type: Int32Array,   size: 12, setter: intVec3Setter,    };\ntypeMap[INT_VEC4]                      = { Type: Int32Array,   size: 16, setter: intVec4Setter,    };\ntypeMap[UNSIGNED_INT$3]                  = { Type: Uint32Array,  size:  4, setter: uintSetter,       arraySetter: uintArraySetter, };\ntypeMap[UNSIGNED_INT_VEC2]             = { Type: Uint32Array,  size:  8, setter: uintVec2Setter,   };\ntypeMap[UNSIGNED_INT_VEC3]             = { Type: Uint32Array,  size: 12, setter: uintVec3Setter,   };\ntypeMap[UNSIGNED_INT_VEC4]             = { Type: Uint32Array,  size: 16, setter: uintVec4Setter,   };\ntypeMap[BOOL]                          = { Type: Uint32Array,  size:  4, setter: intSetter,        arraySetter: intArraySetter, };\ntypeMap[BOOL_VEC2]                     = { Type: Uint32Array,  size:  8, setter: intVec2Setter,    };\ntypeMap[BOOL_VEC3]                     = { Type: Uint32Array,  size: 12, setter: intVec3Setter,    };\ntypeMap[BOOL_VEC4]                     = { Type: Uint32Array,  size: 16, setter: intVec4Setter,    };\ntypeMap[FLOAT_MAT2]                    = { Type: Float32Array, size: 16, setter: floatMat2Setter,  };\ntypeMap[FLOAT_MAT3]                    = { Type: Float32Array, size: 36, setter: floatMat3Setter,  };\ntypeMap[FLOAT_MAT4]                    = { Type: Float32Array, size: 64, setter: floatMat4Setter,  };\ntypeMap[FLOAT_MAT2x3]                  = { Type: Float32Array, size: 24, setter: floatMat23Setter, };\ntypeMap[FLOAT_MAT2x4]                  = { Type: Float32Array, size: 32, setter: floatMat24Setter, };\ntypeMap[FLOAT_MAT3x2]                  = { Type: Float32Array, size: 24, setter: floatMat32Setter, };\ntypeMap[FLOAT_MAT3x4]                  = { Type: Float32Array, size: 48, setter: floatMat34Setter, };\ntypeMap[FLOAT_MAT4x2]                  = { Type: Float32Array, size: 32, setter: floatMat42Setter, };\ntypeMap[FLOAT_MAT4x3]                  = { Type: Float32Array, size: 48, setter: floatMat43Setter, };\ntypeMap[SAMPLER_2D]                    = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_2D$1,       };\ntypeMap[SAMPLER_CUBE]                  = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_CUBE_MAP$1, };\ntypeMap[SAMPLER_3D]                    = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_3D$1,       };\ntypeMap[SAMPLER_2D_SHADOW]             = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_2D$1,       };\ntypeMap[SAMPLER_2D_ARRAY]              = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_2D_ARRAY$1, };\ntypeMap[SAMPLER_2D_ARRAY_SHADOW]       = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_2D_ARRAY$1, };\ntypeMap[SAMPLER_CUBE_SHADOW]           = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_CUBE_MAP$1, };\ntypeMap[INT_SAMPLER_2D]                = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_2D$1,       };\ntypeMap[INT_SAMPLER_3D]                = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_3D$1,       };\ntypeMap[INT_SAMPLER_CUBE]              = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_CUBE_MAP$1, };\ntypeMap[INT_SAMPLER_2D_ARRAY]          = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_2D_ARRAY$1, };\ntypeMap[UNSIGNED_INT_SAMPLER_2D]       = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_2D$1,       };\ntypeMap[UNSIGNED_INT_SAMPLER_3D]       = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_3D$1,       };\ntypeMap[UNSIGNED_INT_SAMPLER_CUBE]     = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_CUBE_MAP$1, };\ntypeMap[UNSIGNED_INT_SAMPLER_2D_ARRAY] = { Type: null,         size:  0, setter: samplerSetter,    arraySetter: samplerArraySetter, bindPoint: TEXTURE_2D_ARRAY$1, };\n\nfunction floatAttribSetter(gl, index) {\n  return function(b) {\n    if (b.value) {\n      gl.disableVertexAttribArray(index);\n      switch (b.value.length) {\n        case 4:\n          gl.vertexAttrib4fv(index, b.value);\n          break;\n        case 3:\n          gl.vertexAttrib3fv(index, b.value);\n          break;\n        case 2:\n          gl.vertexAttrib2fv(index, b.value);\n          break;\n        case 1:\n          gl.vertexAttrib1fv(index, b.value);\n          break;\n        default:\n          throw new Error('the length of a float constant value must be between 1 and 4!');\n      }\n    } else {\n      gl.bindBuffer(ARRAY_BUFFER$1, b.buffer);\n      gl.enableVertexAttribArray(index);\n      gl.vertexAttribPointer(\n          index, b.numComponents || b.size, b.type || FLOAT$3, b.normalize || false, b.stride || 0, b.offset || 0);\n      if (b.divisor !== undefined) {\n        gl.vertexAttribDivisor(index, b.divisor);\n      }\n    }\n  };\n}\n\nfunction intAttribSetter(gl, index) {\n  return function(b) {\n    if (b.value) {\n      gl.disableVertexAttribArray(index);\n      if (b.value.length === 4) {\n        gl.vertexAttrib4iv(index, b.value);\n      } else {\n        throw new Error('The length of an integer constant value must be 4!');\n      }\n    } else {\n      gl.bindBuffer(ARRAY_BUFFER$1, b.buffer);\n      gl.enableVertexAttribArray(index);\n      gl.vertexAttribIPointer(\n          index, b.numComponents || b.size, b.type || INT$3, b.stride || 0, b.offset || 0);\n      if (b.divisor !== undefined) {\n        gl.vertexAttribDivisor(index, b.divisor);\n      }\n    }\n  };\n}\n\nfunction uintAttribSetter(gl, index) {\n  return function(b) {\n    if (b.value) {\n      gl.disableVertexAttribArray(index);\n      if (b.value.length === 4) {\n        gl.vertexAttrib4uiv(index, b.value);\n      } else {\n        throw new Error('The length of an unsigned integer constant value must be 4!');\n      }\n    } else {\n      gl.bindBuffer(ARRAY_BUFFER$1, b.buffer);\n      gl.enableVertexAttribArray(index);\n      gl.vertexAttribIPointer(\n          index, b.numComponents || b.size, b.type || UNSIGNED_INT$3, b.stride || 0, b.offset || 0);\n      if (b.divisor !== undefined) {\n        gl.vertexAttribDivisor(index, b.divisor);\n      }\n    }\n  };\n}\n\nfunction matAttribSetter(gl, index, typeInfo) {\n  const defaultSize = typeInfo.size;\n  const count = typeInfo.count;\n\n  return function(b) {\n    gl.bindBuffer(ARRAY_BUFFER$1, b.buffer);\n    const numComponents = b.size || b.numComponents || defaultSize;\n    const size = numComponents / count;\n    const type = b.type || FLOAT$3;\n    const typeInfo = typeMap[type];\n    const stride = typeInfo.size * numComponents;\n    const normalize = b.normalize || false;\n    const offset = b.offset || 0;\n    const rowOffset = stride / count;\n    for (let i = 0; i < count; ++i) {\n      gl.enableVertexAttribArray(index + i);\n      gl.vertexAttribPointer(\n          index + i, size, type, normalize, stride, offset + rowOffset * i);\n      if (b.divisor !== undefined) {\n        gl.vertexAttribDivisor(index + i, b.divisor);\n      }\n    }\n  };\n}\n\n\n\nconst attrTypeMap = {};\nattrTypeMap[FLOAT$3]             = { size:  4, setter: floatAttribSetter, };\nattrTypeMap[FLOAT_VEC2]        = { size:  8, setter: floatAttribSetter, };\nattrTypeMap[FLOAT_VEC3]        = { size: 12, setter: floatAttribSetter, };\nattrTypeMap[FLOAT_VEC4]        = { size: 16, setter: floatAttribSetter, };\nattrTypeMap[INT$3]               = { size:  4, setter: intAttribSetter,   };\nattrTypeMap[INT_VEC2]          = { size:  8, setter: intAttribSetter,   };\nattrTypeMap[INT_VEC3]          = { size: 12, setter: intAttribSetter,   };\nattrTypeMap[INT_VEC4]          = { size: 16, setter: intAttribSetter,   };\nattrTypeMap[UNSIGNED_INT$3]      = { size:  4, setter: uintAttribSetter,  };\nattrTypeMap[UNSIGNED_INT_VEC2] = { size:  8, setter: uintAttribSetter,  };\nattrTypeMap[UNSIGNED_INT_VEC3] = { size: 12, setter: uintAttribSetter,  };\nattrTypeMap[UNSIGNED_INT_VEC4] = { size: 16, setter: uintAttribSetter,  };\nattrTypeMap[BOOL]              = { size:  4, setter: intAttribSetter,   };\nattrTypeMap[BOOL_VEC2]         = { size:  8, setter: intAttribSetter,   };\nattrTypeMap[BOOL_VEC3]         = { size: 12, setter: intAttribSetter,   };\nattrTypeMap[BOOL_VEC4]         = { size: 16, setter: intAttribSetter,   };\nattrTypeMap[FLOAT_MAT2]        = { size:  4, setter: matAttribSetter,   count: 2, };\nattrTypeMap[FLOAT_MAT3]        = { size:  9, setter: matAttribSetter,   count: 3, };\nattrTypeMap[FLOAT_MAT4]        = { size: 16, setter: matAttribSetter,   count: 4, };\n\n/**\n * Returns true if attribute/uniform is a reserved/built in\n *\n * It makes no sense to me why GL returns these because it's\n * illegal to call `gl.getUniformLocation` and `gl.getAttribLocation`\n * with names that start with `gl_` (and `webgl_` in WebGL)\n *\n * I can only assume they are there because they might count\n * when computing the number of uniforms/attributes used when you want to\n * know if you are near the limit. That doesn't really make sense\n * to me but the fact that these get returned are in the spec.\n *\n * @param {WebGLActiveInfo} info As returned from `gl.getActiveUniform` or\n *    `gl.getActiveAttrib`.\n * @return {bool} true if it's reserved\n * @private\n */\nfunction isBuiltIn(info) {\n  const name = info.name;\n  return name.startsWith(\"gl_\") || name.startsWith(\"webgl_\");\n}\n\n/**\n * Creates setter functions for all uniforms of a shader\n * program.\n *\n * @see {@link module:twgl.setUniforms}\n *\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext to use.\n * @param {WebGLProgram} program the program to create setters for.\n * @returns {Object.<string, function>} an object with a setter by name for each uniform\n * @memberOf module:twgl/programs\n */\nfunction createUniformSetters(gl, program) {\n  let textureUnit = 0;\n\n  /**\n   * Creates a setter for a uniform of the given program with it's\n   * location embedded in the setter.\n   * @param {WebGLProgram} program\n   * @param {WebGLUniformInfo} uniformInfo\n   * @returns {function} the created setter.\n   */\n  function createUniformSetter(program, uniformInfo, location) {\n    const isArray = (uniformInfo.size > 1 && uniformInfo.name.substr(-3) === \"[0]\");\n    const type = uniformInfo.type;\n    const typeInfo = typeMap[type];\n    if (!typeInfo) {\n      throw new Error(`unknown type: 0x${type.toString(16)}`); // we should never get here.\n    }\n    let setter;\n    if (typeInfo.bindPoint) {\n      // it's a sampler\n      const unit = textureUnit;\n      textureUnit += uniformInfo.size;\n      if (isArray) {\n        setter = typeInfo.arraySetter(gl, type, unit, location, uniformInfo.size);\n      } else {\n        setter = typeInfo.setter(gl, type, unit, location, uniformInfo.size);\n      }\n    } else {\n      if (typeInfo.arraySetter && isArray) {\n        setter = typeInfo.arraySetter(gl, location);\n      } else {\n        setter = typeInfo.setter(gl, location);\n      }\n    }\n    setter.location = location;\n    return setter;\n  }\n\n  const uniformSetters = { };\n  const numUniforms = gl.getProgramParameter(program, ACTIVE_UNIFORMS);\n\n  for (let ii = 0; ii < numUniforms; ++ii) {\n    const uniformInfo = gl.getActiveUniform(program, ii);\n    if (isBuiltIn(uniformInfo)) {\n        continue;\n    }\n    let name = uniformInfo.name;\n    // remove the array suffix.\n    if (name.substr(-3) === \"[0]\") {\n      name = name.substr(0, name.length - 3);\n    }\n    const location = gl.getUniformLocation(program, uniformInfo.name);\n    // the uniform will have no location if it's in a uniform block\n    if (location) {\n      uniformSetters[name] = createUniformSetter(program, uniformInfo, location);\n    }\n  }\n  return uniformSetters;\n}\n\n/**\n * @typedef {Object} TransformFeedbackInfo\n * @property {number} index index of transform feedback\n * @property {number} type GL type\n * @property {number} size 1 - 4\n * @memberOf module:twgl\n */\n\n/**\n * Create TransformFeedbackInfo for passing to bindTransformFeedbackInfo.\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext to use.\n * @param {WebGLProgram} program an existing WebGLProgram.\n * @return {Object<string, module:twgl.TransformFeedbackInfo>}\n * @memberOf module:twgl\n */\nfunction createTransformFeedbackInfo(gl, program) {\n  const info = {};\n  const numVaryings = gl.getProgramParameter(program, TRANSFORM_FEEDBACK_VARYINGS);\n  for (let ii = 0; ii < numVaryings; ++ii) {\n    const varying = gl.getTransformFeedbackVarying(program, ii);\n    info[varying.name] = {\n      index: ii,\n      type: varying.type,\n      size: varying.size,\n    };\n  }\n  return info;\n}\n\n/**\n * @typedef {Object} UniformData\n * @property {number} type The WebGL type enum for this uniform\n * @property {number} size The number of elements for this uniform\n * @property {number} blockNdx The block index this uniform appears in\n * @property {number} offset The byte offset in the block for this uniform's value\n * @memberOf module:twgl\n */\n\n/**\n * The specification for one UniformBlockObject\n *\n * @typedef {Object} BlockSpec\n * @property {number} index The index of the block.\n * @property {number} size The size in bytes needed for the block\n * @property {number[]} uniformIndices The indices of the uniforms used by the block. These indices\n *    correspond to entries in a UniformData array in the {@link module:twgl.UniformBlockSpec}.\n * @property {bool} usedByVertexShader Self explanatory\n * @property {bool} usedByFragmentShader Self explanatory\n * @property {bool} used Self explanatory\n * @memberOf module:twgl\n */\n\n/**\n * A `UniformBlockSpec` represents the data needed to create and bind\n * UniformBlockObjects for a given program\n *\n * @typedef {Object} UniformBlockSpec\n * @property {Object.<string, module:twgl.BlockSpec> blockSpecs The BlockSpec for each block by block name\n * @property {UniformData[]} uniformData An array of data for each uniform by uniform index.\n * @memberOf module:twgl\n */\n\n/**\n * Creates a UniformBlockSpec for the given program.\n *\n * A UniformBlockSpec represents the data needed to create and bind\n * UniformBlockObjects\n *\n * @param {WebGL2RenderingContext} gl A WebGL2 Rendering Context\n * @param {WebGLProgram} program A WebGLProgram for a successfully linked program\n * @return {module:twgl.UniformBlockSpec} The created UniformBlockSpec\n * @memberOf module:twgl/programs\n */\nfunction createUniformBlockSpecFromProgram(gl, program) {\n  const numUniforms = gl.getProgramParameter(program, ACTIVE_UNIFORMS);\n  const uniformData = [];\n  const uniformIndices = [];\n\n  for (let ii = 0; ii < numUniforms; ++ii) {\n    uniformIndices.push(ii);\n    uniformData.push({});\n    const uniformInfo = gl.getActiveUniform(program, ii);\n    if (isBuiltIn(uniformInfo)) {\n      break;\n    }\n    // REMOVE [0]?\n    uniformData[ii].name = uniformInfo.name;\n  }\n\n  [\n    [ \"UNIFORM_TYPE\", \"type\" ],\n    [ \"UNIFORM_SIZE\", \"size\" ],  // num elements\n    [ \"UNIFORM_BLOCK_INDEX\", \"blockNdx\" ],\n    [ \"UNIFORM_OFFSET\", \"offset\", ],\n  ].forEach(function(pair) {\n    const pname = pair[0];\n    const key = pair[1];\n    gl.getActiveUniforms(program, uniformIndices, gl[pname]).forEach(function(value, ndx) {\n      uniformData[ndx][key] = value;\n    });\n  });\n\n  const blockSpecs = {};\n\n  const numUniformBlocks = gl.getProgramParameter(program, ACTIVE_UNIFORM_BLOCKS);\n  for (let ii = 0; ii < numUniformBlocks; ++ii) {\n    const name = gl.getActiveUniformBlockName(program, ii);\n    const blockSpec = {\n      index: gl.getUniformBlockIndex(program, name),\n      usedByVertexShader: gl.getActiveUniformBlockParameter(program, ii, UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER),\n      usedByFragmentShader: gl.getActiveUniformBlockParameter(program, ii, UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER),\n      size: gl.getActiveUniformBlockParameter(program, ii, UNIFORM_BLOCK_DATA_SIZE),\n      uniformIndices: gl.getActiveUniformBlockParameter(program, ii, UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES),\n    };\n    blockSpec.used = blockSpec.usedByVertexShader || blockSpec.usedByFragmentShader;\n    blockSpecs[name] = blockSpec;\n  }\n\n  return {\n    blockSpecs: blockSpecs,\n    uniformData: uniformData,\n  };\n}\n\n/**\n * Set uniforms and binds related textures.\n *\n * example:\n *\n *     const programInfo = createProgramInfo(\n *         gl, [\"some-vs\", \"some-fs\"]);\n *\n *     const tex1 = gl.createTexture();\n *     const tex2 = gl.createTexture();\n *\n *     ... assume we setup the textures with data ...\n *\n *     const uniforms = {\n *       u_someSampler: tex1,\n *       u_someOtherSampler: tex2,\n *       u_someColor: [1,0,0,1],\n *       u_somePosition: [0,1,1],\n *       u_someMatrix: [\n *         1,0,0,0,\n *         0,1,0,0,\n *         0,0,1,0,\n *         0,0,0,0,\n *       ],\n *     };\n *\n *     gl.useProgram(program);\n *\n * This will automatically bind the textures AND set the\n * uniforms.\n *\n *     twgl.setUniforms(programInfo, uniforms);\n *\n * For the example above it is equivalent to\n *\n *     var texUnit = 0;\n *     gl.activeTexture(gl.TEXTURE0 + texUnit);\n *     gl.bindTexture(gl.TEXTURE_2D, tex1);\n *     gl.uniform1i(u_someSamplerLocation, texUnit++);\n *     gl.activeTexture(gl.TEXTURE0 + texUnit);\n *     gl.bindTexture(gl.TEXTURE_2D, tex2);\n *     gl.uniform1i(u_someSamplerLocation, texUnit++);\n *     gl.uniform4fv(u_someColorLocation, [1, 0, 0, 1]);\n *     gl.uniform3fv(u_somePositionLocation, [0, 1, 1]);\n *     gl.uniformMatrix4fv(u_someMatrix, false, [\n *         1,0,0,0,\n *         0,1,0,0,\n *         0,0,1,0,\n *         0,0,0,0,\n *       ]);\n *\n * Note it is perfectly reasonable to call `setUniforms` multiple times. For example\n *\n *     const uniforms = {\n *       u_someSampler: tex1,\n *       u_someOtherSampler: tex2,\n *     };\n *\n *     const moreUniforms {\n *       u_someColor: [1,0,0,1],\n *       u_somePosition: [0,1,1],\n *       u_someMatrix: [\n *         1,0,0,0,\n *         0,1,0,0,\n *         0,0,1,0,\n *         0,0,0,0,\n *       ],\n *     };\n *\n *     twgl.setUniforms(programInfo, uniforms);\n *     twgl.setUniforms(programInfo, moreUniforms);\n *\n * You can also add WebGLSamplers to uniform samplers as in\n *\n *     const uniforms = {\n *       u_someSampler: {\n *         texture: someWebGLTexture,\n *         sampler: someWebGLSampler,\n *       },\n *     };\n *\n * In which case both the sampler and texture will be bound to the\n * same unit.\n *\n * @param {(module:twgl.ProgramInfo|Object.<string, function>)} setters a `ProgramInfo` as returned from `createProgramInfo` or the setters returned from\n *        `createUniformSetters`.\n * @param {Object.<string, ?>} values an object with values for the\n *        uniforms.\n *   You can pass multiple objects by putting them in an array or by calling with more arguments.For example\n *\n *     const sharedUniforms = {\n *       u_fogNear: 10,\n *       u_projection: ...\n *       ...\n *     };\n *\n *     const localUniforms = {\n *       u_world: ...\n *       u_diffuseColor: ...\n *     };\n *\n *     twgl.setUniforms(programInfo, sharedUniforms, localUniforms);\n *\n *     // is the same as\n *\n *     twgl.setUniforms(programInfo, [sharedUniforms, localUniforms]);\n *\n *     // is the same as\n *\n *     twgl.setUniforms(programInfo, sharedUniforms);\n *     twgl.setUniforms(programInfo, localUniforms};\n *\n * @memberOf module:twgl/programs\n */\nfunction setUniforms(setters, values) {  // eslint-disable-line\n  const actualSetters = setters.uniformSetters || setters;\n  const numArgs = arguments.length;\n  for (let aNdx = 1; aNdx < numArgs; ++aNdx) {\n    const values = arguments[aNdx];\n    if (Array.isArray(values)) {\n      const numValues = values.length;\n      for (let ii = 0; ii < numValues; ++ii) {\n        setUniforms(actualSetters, values[ii]);\n      }\n    } else {\n      for (const name in values) {\n        const setter = actualSetters[name];\n        if (setter) {\n          setter(values[name]);\n        }\n      }\n    }\n  }\n}\n\n/**\n * Creates setter functions for all attributes of a shader\n * program. You can pass this to {@link module:twgl.setBuffersAndAttributes} to set all your buffers and attributes.\n *\n * @see {@link module:twgl.setAttributes} for example\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext to use.\n * @param {WebGLProgram} program the program to create setters for.\n * @return {Object.<string, function>} an object with a setter for each attribute by name.\n * @memberOf module:twgl/programs\n */\nfunction createAttributeSetters(gl, program) {\n  const attribSetters = {\n  };\n\n  const numAttribs = gl.getProgramParameter(program, ACTIVE_ATTRIBUTES);\n  for (let ii = 0; ii < numAttribs; ++ii) {\n    const attribInfo = gl.getActiveAttrib(program, ii);\n    if (isBuiltIn(attribInfo)) {\n        continue;\n    }\n    const index = gl.getAttribLocation(program, attribInfo.name);\n    const typeInfo = attrTypeMap[attribInfo.type];\n    const setter = typeInfo.setter(gl, index, typeInfo);\n    setter.location = index;\n    attribSetters[attribInfo.name] = setter;\n  }\n\n  return attribSetters;\n}\n\n/**\n * Sets attributes and binds buffers (deprecated... use {@link module:twgl.setBuffersAndAttributes})\n *\n * Example:\n *\n *     const program = createProgramFromScripts(\n *         gl, [\"some-vs\", \"some-fs\");\n *\n *     const attribSetters = createAttributeSetters(program);\n *\n *     const positionBuffer = gl.createBuffer();\n *     const texcoordBuffer = gl.createBuffer();\n *\n *     const attribs = {\n *       a_position: {buffer: positionBuffer, numComponents: 3},\n *       a_texcoord: {buffer: texcoordBuffer, numComponents: 2},\n *     };\n *\n *     gl.useProgram(program);\n *\n * This will automatically bind the buffers AND set the\n * attributes.\n *\n *     setAttributes(attribSetters, attribs);\n *\n * Properties of attribs. For each attrib you can add\n * properties:\n *\n * *   type: the type of data in the buffer. Default = gl.FLOAT\n * *   normalize: whether or not to normalize the data. Default = false\n * *   stride: the stride. Default = 0\n * *   offset: offset into the buffer. Default = 0\n * *   divisor: the divisor for instances. Default = undefined\n *\n * For example if you had 3 value float positions, 2 value\n * float texcoord and 4 value uint8 colors you'd setup your\n * attribs like this\n *\n *     const attribs = {\n *       a_position: {buffer: positionBuffer, numComponents: 3},\n *       a_texcoord: {buffer: texcoordBuffer, numComponents: 2},\n *       a_color: {\n *         buffer: colorBuffer,\n *         numComponents: 4,\n *         type: gl.UNSIGNED_BYTE,\n *         normalize: true,\n *       },\n *     };\n *\n * @param {Object.<string, function>} setters Attribute setters as returned from createAttributeSetters\n * @param {Object.<string, module:twgl.AttribInfo>} buffers AttribInfos mapped by attribute name.\n * @memberOf module:twgl/programs\n * @deprecated use {@link module:twgl.setBuffersAndAttributes}\n */\nfunction setAttributes(setters, buffers) {\n  for (const name in buffers) {\n    const setter = setters[name];\n    if (setter) {\n      setter(buffers[name]);\n    }\n  }\n}\n\n/**\n * @typedef {Object} ProgramInfo\n * @property {WebGLProgram} program A shader program\n * @property {Object<string, function>} uniformSetters object of setters as returned from createUniformSetters,\n * @property {Object<string, function>} attribSetters object of setters as returned from createAttribSetters,\n * @property {module:twgl.UniformBlockSpec} [uniformBlockSpace] a uniform block spec for making UniformBlockInfos with createUniformBlockInfo etc..\n * @property {Object<string, module:twgl.TransformFeedbackInfo>} [transformFeedbackInfo] info for transform feedbacks\n * @memberOf module:twgl\n */\n\n/**\n * Creates a ProgramInfo from an existing program.\n *\n * A ProgramInfo contains\n *\n *     programInfo = {\n *        program: WebGLProgram,\n *        uniformSetters: object of setters as returned from createUniformSetters,\n *        attribSetters: object of setters as returned from createAttribSetters,\n *     }\n *\n * @param {WebGLRenderingContext} gl The WebGLRenderingContext\n *        to use.\n * @param {WebGLProgram} program an existing WebGLProgram.\n * @return {module:twgl.ProgramInfo} The created ProgramInfo.\n * @memberOf module:twgl/programs\n */\nfunction createProgramInfoFromProgram(gl, program) {\n  const uniformSetters = createUniformSetters(gl, program);\n  const attribSetters = createAttributeSetters(gl, program);\n  const programInfo = {\n    program: program,\n    uniformSetters: uniformSetters,\n    attribSetters: attribSetters,\n  };\n\n  if (isWebGL2(gl)) {\n    programInfo.uniformBlockSpec = createUniformBlockSpecFromProgram(gl, program);\n    programInfo.transformFeedbackInfo = createTransformFeedbackInfo(gl, program);\n  }\n\n  return programInfo;\n}\n\nvar quadShader = \"#define GLSLIFY 1\\nattribute vec4 position;attribute vec2 texcoord;varying vec2 v_texel;varying vec2 v_uv;varying float v_scale;uniform bool u_flipY;uniform vec2 u_textureSize;uniform vec2 u_screenSize;void main(){v_uv=texcoord;v_scale=floor(u_screenSize.y/u_textureSize.y+0.01);gl_Position=position;if(u_flipY){gl_Position.y*=-1.;}}\"; // eslint-disable-line\n\nvar layerDrawShader = \"precision highp float;\\n#define GLSLIFY 1\\nvarying vec2 v_uv;uniform sampler2D u_palette;uniform sampler2D u_bitmap;uniform float u_paletteOffset;const vec4 transparent=vec4(0,0,0,0);void main(){float index=texture2D(u_bitmap,v_uv).a*255.;if(index>0.){gl_FragColor=texture2D(u_palette,vec2((u_paletteOffset+index)/8.,.5));}else{gl_FragColor=transparent;}}\"; // eslint-disable-line\n\nvar postProcessShader = \"precision highp float;\\n#define GLSLIFY 1\\nvarying vec2 v_uv;uniform sampler2D u_tex;varying float v_scale;uniform vec2 u_textureSize;uniform vec2 u_screenSize;void main(){vec2 v_texel=v_uv*u_textureSize;vec2 texel_floored=floor(v_texel);vec2 s=fract(v_texel);float region_range=0.5-0.5/v_scale;vec2 center_dist=s-0.5;vec2 f=(center_dist-clamp(center_dist,-region_range,region_range))*v_scale+0.5;vec2 mod_texel=texel_floored+f;vec2 coord=mod_texel.xy/u_textureSize.xy;gl_FragColor=texture2D(u_tex,coord);}\"; // eslint-disable-line\n\n/**\r\n * Animation frame renderer, built around the {@link https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API WebGL} API\r\n *\r\n * Only available in browser contexts\r\n */\r\nclass WebglRenderer {\r\n    /**\r\n     * Creates a new WebGlCanvas instance\r\n     * @param el - Canvas HTML element to use as a rendering surface\r\n     * @param width - Canvas width in CSS pixels\r\n     * @param height - Canvas height in CSS pixels\r\n     *\r\n     * The ratio between `width` and `height` should be 3:4 for best results\r\n     */\r\n    constructor(el, width = 640, height = 480, options = {}) {\r\n        this.refs = {\r\n            programs: [],\r\n            shaders: [],\r\n            textures: [],\r\n            buffers: [],\r\n            framebuffers: []\r\n        };\r\n        this.isCtxLost = false;\r\n        this.handleContextLoss = (e) => {\r\n            e.preventDefault();\r\n            this.destroy();\r\n            this.isCtxLost = true;\r\n            this.options.onlost();\r\n        };\r\n        this.handleContextRestored = (e) => {\r\n            this.isCtxLost = false;\r\n            this.init();\r\n            this.options.onrestored();\r\n        };\r\n        assertBrowserEnv();\r\n        this.el = el;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.options = { ...WebglRenderer.defaultOptions, ...options };\r\n        el.addEventListener('webglcontextlost', this.handleContextLoss, false);\r\n        el.addEventListener('webglcontextrestored', this.handleContextRestored, false);\r\n        this.gl = el.getContext('webgl', {\r\n            antialias: false,\r\n            alpha: true\r\n        });\r\n        this.init();\r\n    }\r\n    init() {\r\n        const gl = this.gl;\r\n        this.layerDrawProgram = this.createProgram(quadShader, layerDrawShader);\r\n        this.postProcessProgram = this.createProgram(quadShader, postProcessShader);\r\n        this.quadBuffer = this.createScreenQuad(-1, -1, 2, 2, 8, 8);\r\n        this.setBuffersAndAttribs(this.layerDrawProgram, this.quadBuffer);\r\n        this.setBuffersAndAttribs(this.postProcessProgram, this.quadBuffer);\r\n        this.paletteData = new Uint8Array(8 * 4);\r\n        this.paletteTexture = this.createTexture(gl.RGBA, gl.NEAREST, gl.CLAMP_TO_EDGE, 8, 1);\r\n        this.layerTexture = this.createTexture(gl.ALPHA, gl.NEAREST, gl.CLAMP_TO_EDGE);\r\n        this.frameTexture = this.createTexture(gl.RGBA, gl.LINEAR, gl.CLAMP_TO_EDGE);\r\n        this.frameBuffer = this.createFrameBuffer(this.frameTexture);\r\n        this.setCanvasSize(this.width, this.height);\r\n    }\r\n    createProgram(vertexShaderSource, fragmentShaderSource) {\r\n        assert(!this.isCtxLost);\r\n        const gl = this.gl;\r\n        const vert = this.createShader(gl.VERTEX_SHADER, vertexShaderSource);\r\n        const frag = this.createShader(gl.FRAGMENT_SHADER, fragmentShaderSource);\r\n        const program = gl.createProgram();\r\n        // set up shaders\r\n        gl.attachShader(program, vert);\r\n        gl.attachShader(program, frag);\r\n        // link program\r\n        gl.linkProgram(program);\r\n        if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\r\n            const log = gl.getProgramInfoLog(program);\r\n            gl.deleteProgram(program);\r\n            throw new Error(log);\r\n        }\r\n        const programInfo = createProgramInfoFromProgram(gl, program);\r\n        this.refs.programs.push(program);\r\n        return programInfo;\r\n    }\r\n    createShader(type, source) {\r\n        assert(!this.isCtxLost);\r\n        const gl = this.gl;\r\n        const shader = gl.createShader(type);\r\n        gl.shaderSource(shader, source);\r\n        gl.compileShader(shader);\r\n        // test if shader compilation was successful\r\n        if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\r\n            const log = gl.getShaderInfoLog(shader);\r\n            gl.deleteShader(shader);\r\n            throw new Error(log);\r\n        }\r\n        this.refs.shaders.push(shader);\r\n        return shader;\r\n    }\r\n    // creating a subdivided quad seems to produce slightly nicer texture filtering\r\n    createScreenQuad(x0, y0, width, height, xSubdivs, ySubdivs) {\r\n        assert(!this.isCtxLost);\r\n        const numVerts = (xSubdivs + 1) * (ySubdivs + 1);\r\n        const numVertsAcross = xSubdivs + 1;\r\n        const positions = new Float32Array(numVerts * 2);\r\n        const texCoords = new Float32Array(numVerts * 2);\r\n        let positionPtr = 0;\r\n        let texCoordPtr = 0;\r\n        for (let y = 0; y <= ySubdivs; y++) {\r\n            for (let x = 0; x <= xSubdivs; x++) {\r\n                const u = x / xSubdivs;\r\n                const v = y / ySubdivs;\r\n                positions[positionPtr++] = x0 + width * u;\r\n                positions[positionPtr++] = y0 + height * v;\r\n                texCoords[texCoordPtr++] = u;\r\n                texCoords[texCoordPtr++] = v;\r\n            }\r\n        }\r\n        const indices = new Uint16Array(xSubdivs * ySubdivs * 2 * 3);\r\n        let indicesPtr = 0;\r\n        for (let y = 0; y < ySubdivs; y++) {\r\n            for (let x = 0; x < xSubdivs; x++) {\r\n                // triangle 1\r\n                indices[indicesPtr++] = (y + 0) * numVertsAcross + x;\r\n                indices[indicesPtr++] = (y + 1) * numVertsAcross + x;\r\n                indices[indicesPtr++] = (y + 0) * numVertsAcross + x + 1;\r\n                // triangle 2\r\n                indices[indicesPtr++] = (y + 0) * numVertsAcross + x + 1;\r\n                indices[indicesPtr++] = (y + 1) * numVertsAcross + x;\r\n                indices[indicesPtr++] = (y + 1) * numVertsAcross + x + 1;\r\n            }\r\n        }\r\n        const bufferInfo = createBufferInfoFromArrays(this.gl, {\r\n            position: {\r\n                numComponents: 2,\r\n                data: positions\r\n            },\r\n            texcoord: {\r\n                numComponents: 2,\r\n                data: texCoords\r\n            },\r\n            indices: indices\r\n        });\r\n        // collect references to buffer objects\r\n        for (let name in bufferInfo.attribs)\r\n            this.refs.buffers.push(bufferInfo.attribs[name].buffer);\r\n        return bufferInfo;\r\n    }\r\n    setBuffersAndAttribs(program, buffer) {\r\n        const gl = this.gl;\r\n        setAttributes(program.attribSetters, buffer.attribs);\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buffer.indices);\r\n    }\r\n    createTexture(type, minMag, wrap, width = 1, height = 1) {\r\n        assert(!this.isCtxLost);\r\n        const gl = this.gl;\r\n        const tex = gl.createTexture();\r\n        gl.bindTexture(gl.TEXTURE_2D, tex);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, wrap);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, wrap);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, minMag);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, minMag);\r\n        gl.texImage2D(gl.TEXTURE_2D, 0, type, width, height, 0, type, gl.UNSIGNED_BYTE, null);\r\n        this.refs.textures.push(tex);\r\n        return tex;\r\n    }\r\n    createFrameBuffer(colorTexture) {\r\n        assert(!this.isCtxLost);\r\n        const gl = this.gl;\r\n        const fb = gl.createFramebuffer();\r\n        gl.bindFramebuffer(gl.FRAMEBUFFER, fb);\r\n        // enable alpha blending\r\n        gl.enable(gl.BLEND);\r\n        gl.blendEquation(gl.FUNC_ADD);\r\n        gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\r\n        // bind a texture to the framebuffer\r\n        gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, colorTexture, 0);\r\n        this.refs.framebuffers.push(fb);\r\n        return fb;\r\n    }\r\n    /**\r\n     * Resize the canvas surface\r\n     * @param width - New canvas width, in CSS pixels\r\n     * @param height - New canvas height, in CSS pixels\r\n     *\r\n     * The ratio between `width` and `height` should be 3:4 for best results\r\n     */\r\n    setCanvasSize(width, height) {\r\n        assert(!this.isCtxLost);\r\n        const dpi = window.devicePixelRatio || 1;\r\n        const internalWidth = width * dpi;\r\n        const internalHeight = height * dpi;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.el.width = internalWidth;\r\n        this.el.height = internalHeight;\r\n        this.screenWidth = internalWidth;\r\n        this.screenHeight = internalHeight;\r\n        this.el.style.width = `${width}px`;\r\n        this.el.style.height = `${height}px`;\r\n    }\r\n    /**\r\n     * Sets the size of the input pixel arrays\r\n     * @param width\r\n     * @param height\r\n     */\r\n    setInputSize(width, height) {\r\n        const gl = this.gl;\r\n        this.textureWidth = width;\r\n        this.textureHeight = height;\r\n        // resize frame texture\r\n        gl.bindTexture(gl.TEXTURE_2D, this.frameTexture);\r\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, this.textureWidth, this.textureHeight, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\r\n    }\r\n    /**\r\n     * Clear frame buffer\r\n     * @param colors - Paper color as `[R, G, B, A]`\r\n     */\r\n    clearFrameBuffer(paperColor) {\r\n        assert(!this.isCtxLost);\r\n        const gl = this.gl;\r\n        // bind to the frame buffer\r\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.frameBuffer);\r\n        gl.viewport(0, 0, this.textureWidth, this.textureHeight);\r\n        // clear it using the paper color\r\n        const [r, g, b, a] = paperColor;\r\n        gl.clearColor(r / 255, g / 255, b / 255, a / 255);\r\n        gl.clear(gl.COLOR_BUFFER_BIT);\r\n    }\r\n    /**\r\n     * Set the color palette to use for the next {@link drawPixels} call\r\n     * @param colors - Array of colors as `[R, G, B, A]`\r\n     */\r\n    setPalette(colors) {\r\n        assert(!this.isCtxLost);\r\n        assert(colors.length < 16);\r\n        const gl = this.gl;\r\n        const data = this.paletteData.fill(0);\r\n        let dataPtr = 0;\r\n        for (let i = 0; i < colors.length; i++) {\r\n            const [r, g, b, a] = colors[i];\r\n            data[dataPtr++] = r;\r\n            data[dataPtr++] = g;\r\n            data[dataPtr++] = b;\r\n            data[dataPtr++] = a;\r\n        }\r\n        // update layer texture pixels\r\n        gl.bindTexture(gl.TEXTURE_2D, this.paletteTexture);\r\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 8, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, data);\r\n    }\r\n    /**\r\n     * Draw pixels to the frame buffer\r\n     *\r\n     * Note: use {@link composite} to draw the frame buffer to the canvas\r\n     * @param pixels - Array of color indices for every pixl\r\n     * @param paletteOffset - Palette offset index for the pixels being drawn\r\n     */\r\n    drawPixels(pixels, paletteOffset) {\r\n        const { gl, layerDrawProgram, layerTexture, textureWidth, textureHeight, } = this;\r\n        assert(!this.isCtxLost);\r\n        assert(pixels.length === textureWidth * textureHeight);\r\n        // we wanna draw to the frame buffer\r\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.frameBuffer);\r\n        gl.viewport(0, 0, textureWidth, textureHeight);\r\n        // using the layer draw program\r\n        gl.useProgram(layerDrawProgram.program);\r\n        // update layer texture pixels\r\n        gl.bindTexture(gl.TEXTURE_2D, layerTexture);\r\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.ALPHA, textureWidth, textureHeight, 0, gl.ALPHA, gl.UNSIGNED_BYTE, pixels);\r\n        // prep uniforms\r\n        setUniforms(layerDrawProgram, {\r\n            u_palette: this.paletteTexture,\r\n            u_paletteOffset: paletteOffset,\r\n            u_bitmap: layerTexture,\r\n            u_textureSize: [textureWidth, textureHeight],\r\n            u_screenSize: [gl.drawingBufferWidth, gl.drawingBufferHeight],\r\n        });\r\n        // draw screen quad\r\n        gl.drawElements(gl.TRIANGLES, this.quadBuffer.numElements, this.quadBuffer.elementType, 0);\r\n    }\r\n    /**\r\n     * Composites the current frame buffer into the canvas, applying post-processing effects like scaling filters if enabled\r\n     */\r\n    composite() {\r\n        const gl = this.gl;\r\n        assert(!this.isCtxLost);\r\n        // setting gl.FRAMEBUFFER will draw directly to the screen\r\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\r\n        gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\r\n        // using postprocess program\r\n        gl.useProgram(this.postProcessProgram.program);\r\n        // clear whatever's already been drawn\r\n        gl.clear(gl.COLOR_BUFFER_BIT);\r\n        // prep uniforms\r\n        setUniforms(this.postProcessProgram, {\r\n            u_flipY: true,\r\n            u_tex: this.frameTexture,\r\n            u_textureSize: [this.textureWidth, this.textureHeight],\r\n            u_screenSize: [gl.drawingBufferWidth, gl.drawingBufferHeight],\r\n        });\r\n        // draw screen quad\r\n        gl.drawElements(gl.TRIANGLES, this.quadBuffer.numElements, this.quadBuffer.elementType, 0);\r\n    }\r\n    /**\r\n     * Returns true if the webGL context has returned an error\r\n     */\r\n    isErrorState() {\r\n        const gl = this.gl;\r\n        const error = gl.getError();\r\n        return error != gl.NO_ERROR && error != gl.CONTEXT_LOST_WEBGL;\r\n    }\r\n    /**\r\n     * Only a certain number of WebGL contexts can be added to a single page before the browser will start culling old contexts.\r\n     * This method returns true if it has been culled, false if not\r\n     */\r\n    isLost() {\r\n        return this.gl.isContextLost();\r\n    }\r\n    /**\r\n     * Frees any resources used by this canvas instance\r\n     */\r\n    async destroy() {\r\n        const refs = this.refs;\r\n        const gl = this.gl;\r\n        refs.shaders.forEach((shader) => {\r\n            gl.deleteShader(shader);\r\n        });\r\n        refs.shaders = [];\r\n        refs.framebuffers.forEach((fb) => {\r\n            gl.deleteFramebuffer(fb);\r\n        });\r\n        refs.framebuffers = [];\r\n        refs.textures.forEach((texture) => {\r\n            gl.deleteTexture(texture);\r\n        });\r\n        refs.textures = [];\r\n        refs.buffers.forEach((buffer) => {\r\n            gl.deleteBuffer(buffer);\r\n        });\r\n        refs.buffers = [];\r\n        refs.programs.forEach((program) => {\r\n            gl.deleteProgram(program);\r\n        });\r\n        refs.programs = [];\r\n        this.paletteData = null;\r\n        // shrink the canvas to reduce memory usage until it is garbage collected\r\n        gl.canvas.width = 1;\r\n        gl.canvas.height = 1;\r\n    }\r\n}\r\nWebglRenderer.defaultOptions = {\r\n    onlost: () => { },\r\n    onrestored: () => { },\r\n};\n\n/** @internal */\r\nconst _AudioContext = (() => {\r\n    if (isBrowser)\r\n        return (window.AudioContext || window.webkitAudioContext);\r\n    return null;\r\n})();\r\n/**\r\n * Audio player built around the {@link https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API | Web Audio API}\r\n *\r\n * Capable of playing PCM streams, with volume adjustment and an optional equalizer. Only available in browser contexts\r\n */\r\nclass WebAudioPlayer {\r\n    constructor() {\r\n        /** Whether the audio is being run through an equalizer or not */\r\n        this.useEq = false;\r\n        /** Default equalizer settings. Credit to {@link https://www.sudomemo.net/ | Sudomemo} for these */\r\n        this.eqSettings = [\r\n            [31.25, 4.1],\r\n            [62.5, 1.2],\r\n            [125, 0],\r\n            [250, -4.1],\r\n            [500, -2.3],\r\n            [1000, 0.5],\r\n            [2000, 6.5],\r\n            [8000, 5.1],\r\n            [16000, 5.1]\r\n        ];\r\n        this._volume = 1;\r\n        this._loop = false;\r\n        this.nodeRefs = [];\r\n        assertBrowserEnv();\r\n    }\r\n    /** The audio output volume. Range is 0 to 1 */\r\n    set volume(value) {\r\n        this.setVolume(value);\r\n    }\r\n    get volume() {\r\n        return this._volume;\r\n    }\r\n    /** Whether the audio should loop after it has ended */\r\n    set loop(value) {\r\n        this._loop = value;\r\n        if (this.source)\r\n            this.source.loop = value;\r\n    }\r\n    get loop() {\r\n        return this._loop;\r\n    }\r\n    getCtx() {\r\n        if (!this.ctx)\r\n            this.ctx = new _AudioContext();\r\n        return this.ctx;\r\n    }\r\n    /**\r\n     * Set the audio buffer to play\r\n     * @param inputBuffer\r\n     * @param sampleRate - For best results, this should be a multiple of 16364\r\n     */\r\n    setBuffer(inputBuffer, sampleRate) {\r\n        const ctx = this.getCtx();\r\n        const numSamples = inputBuffer.length;\r\n        const audioBuffer = ctx.createBuffer(1, numSamples, sampleRate);\r\n        const channelData = audioBuffer.getChannelData(0);\r\n        if (inputBuffer instanceof Float32Array)\r\n            channelData.set(inputBuffer, 0);\r\n        else if (inputBuffer instanceof Int16Array) {\r\n            for (let i = 0; i < numSamples; i++) {\r\n                channelData[i] = inputBuffer[i] / 32768;\r\n            }\r\n        }\r\n        this.buffer = audioBuffer;\r\n        this.sampleRate = sampleRate;\r\n    }\r\n    connectEqNodesTo(inNode) {\r\n        const ctx = this.getCtx();\r\n        const eqSettings = this.eqSettings;\r\n        let lastNode = inNode;\r\n        eqSettings.forEach(([frequency, gain], index) => {\r\n            const node = ctx.createBiquadFilter();\r\n            this.nodeRefs.push(node);\r\n            node.frequency.value = frequency;\r\n            node.gain.value = gain;\r\n            if (index === 0)\r\n                node.type = 'lowshelf';\r\n            else if (index === eqSettings.length - 1)\r\n                node.type = 'highshelf';\r\n            else\r\n                node.type = 'peaking';\r\n            lastNode.connect(node);\r\n            lastNode = node;\r\n        });\r\n        return lastNode;\r\n    }\r\n    initNodes() {\r\n        const ctx = this.getCtx();\r\n        this.nodeRefs = [];\r\n        const source = ctx.createBufferSource();\r\n        this.nodeRefs.push(source);\r\n        source.buffer = this.buffer;\r\n        const gainNode = ctx.createGain();\r\n        this.nodeRefs.push(gainNode);\r\n        if (this.useEq) {\r\n            const eq = this.connectEqNodesTo(source);\r\n            eq.connect(gainNode);\r\n        }\r\n        else\r\n            source.connect(gainNode);\r\n        source.connect(gainNode);\r\n        gainNode.connect(ctx.destination);\r\n        this.source = source;\r\n        this.gainNode = gainNode;\r\n        this.setVolume(this._volume);\r\n    }\r\n    /**\r\n     * Sets the audio volume level\r\n     * @param value - range is 0 to 1\r\n     */\r\n    setVolume(value) {\r\n        this._volume = value;\r\n        if (this.gainNode) {\r\n            // human perception of loudness is logarithmic, rather than linear\r\n            // https://www.dr-lex.be/info-stuff/volumecontrols.html\r\n            this.gainNode.gain.value = Math.pow(value, 2);\r\n        }\r\n    }\r\n    /**\r\n     * Begin playback from a specific point\r\n     *\r\n     * Note that the WebAudioPlayer doesn't keep track of audio playback itself. We rely on the {@link Player} API for that.\r\n     * @param currentTime initial playback position, in seconds\r\n     */\r\n    playFrom(currentTime) {\r\n        this.initNodes();\r\n        this.source.loop = this._loop;\r\n        this.source.start(0, currentTime);\r\n    }\r\n    /**\r\n     * Stops the audio playback\r\n     */\r\n    stop() {\r\n        if (this.source)\r\n            this.source.stop(0);\r\n    }\r\n    /**\r\n   * Frees any resources used by this canvas instance\r\n   */\r\n    async destroy() {\r\n        this.stop();\r\n        const ctx = this.getCtx();\r\n        this.nodeRefs.forEach(node => node.disconnect());\r\n        this.nodeRefs = [];\r\n        if (ctx.state !== 'closed' && typeof ctx.close === 'function')\r\n            await ctx.close();\r\n        this.buffer = null;\r\n    }\r\n}\n\n/** @internal */\r\nfunction createTimeRanges(ranges) {\r\n    return {\r\n        length: ranges.length,\r\n        start: (i) => ranges[i][0],\r\n        end: (i) => ranges[i][1],\r\n    };\r\n}\r\n/** @internal */\r\nfunction padNumber(num, strLength) {\r\n    return num.toString().padStart(strLength, '0');\r\n}\r\n/** @internal */\r\nfunction formatTime(seconds) {\r\n    const m = Math.floor((seconds % 3600) / 60);\r\n    const s = Math.floor(seconds % 60);\r\n    return `${m}:${padNumber(s, 2)}`;\r\n}\n\n/**\r\n * Flipnote Player API (exported as `flipnote.Player`) - provides a {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement | MediaElement}-like interface for loading Flipnotes and playing them.\r\n * This is intended for cases where you want to implement your own player UI, if you just want a pre-built player with some nice UI controls, check out the {@page Web Components} page instead!\r\n *\r\n * ### Create a new player\r\n *\r\n * You'll need a canvas element in your page's HTML:\r\n *\r\n * ```html\r\n *  <canvas id=\"player-canvas\"></canvas>\r\n * ```\r\n *\r\n * Then you can create a new `Player` instance by passing a CSS selector that matches the canvas, plus the disired width and height.\r\n *\r\n * ```js\r\n *  const player = new flipnote.Player('#player-canvas', 320, 240);\r\n * ```\r\n *\r\n * ### Load a Flipnote\r\n *\r\n * Load a Flipnote from a valid {@link FlipnoteSource}:\r\n *\r\n * ```js\r\n * player.load('./path/to/flipnote.ppm');\r\n * ```\r\n *\r\n * ### Listen to events\r\n *\r\n * Use the {@link on} method to register event listeners:\r\n *\r\n * ```js\r\n *  player.on('play', function() {\r\n *    // do something when the Flipnote starts playing...\r\n *  });\r\n * ```\r\n */\r\nclass Player {\r\n    /**\r\n     * Create a new Player instance\r\n     *\r\n     * @param el - Canvas element (or CSS selector matching a canvas element) to use as a rendering surface\r\n     * @param width - Canvas width (pixels)\r\n     * @param height - Canvas height (pixels)\r\n     *\r\n     * The ratio between `width` and `height` should be 3:4 for best results\r\n     */\r\n    constructor(el, width, height) {\r\n        /** Animation duration, in seconds */\r\n        this.duration = 0;\r\n        /** Automatically begin playback after a Flipnote is loaded */\r\n        this.autoplay = false;\r\n        /** Array of events supported by this player */\r\n        this.supportedEvents = supportedEvents;\r\n        /** @internal */\r\n        this._src = null;\r\n        /** @internal */\r\n        this._loop = false;\r\n        /** @internal */\r\n        this._volume = 1;\r\n        /** @internal */\r\n        this._muted = false;\r\n        /** @internal */\r\n        this._frame = null;\r\n        /** @internal */\r\n        this.isNoteLoaded = false;\r\n        /** @internal */\r\n        this.events = new Map();\r\n        /** @internal */\r\n        this.playbackStartTime = 0;\r\n        /** @internal */\r\n        this.playbackTime = 0;\r\n        /** @internal */\r\n        this.playbackLoopId = null;\r\n        /** @internal */\r\n        this.showThumbnail = true;\r\n        /** @internal */\r\n        this.hasPlaybackStarted = false;\r\n        /** @internal */\r\n        this.isPlaying = false;\r\n        /** @internal */\r\n        this.wasPlaying = false;\r\n        /** @internal */\r\n        this.isSeeking = false;\r\n        /**\r\n         * Playback animation loop\r\n         * @internal\r\n         * @category Playback Control\r\n         */\r\n        this.playbackLoop = (timestamp) => {\r\n            if (!this.isPlaying)\r\n                return;\r\n            const now = timestamp / 1000;\r\n            const currPlaybackTime = now - this.playbackStartTime;\r\n            if (currPlaybackTime >= this.duration) {\r\n                if (this.loop) {\r\n                    this.playbackStartTime = now;\r\n                    this.emit(PlayerEvent.Loop);\r\n                }\r\n                else {\r\n                    this.pause();\r\n                    this.emit(PlayerEvent.Ended);\r\n                }\r\n            }\r\n            this.setCurrentTime(currPlaybackTime % this.duration);\r\n            this.playbackLoopId = requestAnimationFrame(this.playbackLoop);\r\n        };\r\n        assertBrowserEnv();\r\n        // if `el` is a string, use it to select an Element, else assume it's an element\r\n        el = ('string' == typeof el) ? document.querySelector(el) : el;\r\n        this.renderer = new WebglRenderer(el, width, height, {\r\n            onlost: () => this.emit(PlayerEvent.Error),\r\n            onrestored: () => this.load()\r\n        });\r\n        this.audio = new WebAudioPlayer();\r\n        this.canvasEl = this.renderer.el;\r\n    }\r\n    /** The currently loaded Flipnote source, if there is one. Can be overridden to load another Flipnote */\r\n    get src() {\r\n        return this._src;\r\n    }\r\n    set src(source) {\r\n        this.load(source);\r\n    }\r\n    /** Indicates whether playback is currently paused */\r\n    get paused() {\r\n        return !this.isPlaying;\r\n    }\r\n    set paused(isPaused) {\r\n        if (isPaused)\r\n            this.pause();\r\n        else\r\n            this.play();\r\n    }\r\n    /** Current animation frame index */\r\n    get currentFrame() {\r\n        return this._frame;\r\n    }\r\n    set currentFrame(frameIndex) {\r\n        this.setCurrentFrame(frameIndex);\r\n    }\r\n    /** Current animation playback position, in seconds */\r\n    get currentTime() {\r\n        return this.isNoteLoaded ? this.playbackTime : null;\r\n    }\r\n    set currentTime(value) {\r\n        this.setCurrentTime(value);\r\n    }\r\n    /** Current animation playback progress, as a percentage out of 100 */\r\n    get progress() {\r\n        return this.isNoteLoaded ? (this.playbackTime / this.duration) * 100 : null;\r\n    }\r\n    set progress(value) {\r\n        this.setProgress(value);\r\n    }\r\n    /** Audio volume, range `0` to `1` */\r\n    get volume() {\r\n        return this.getVolume();\r\n    }\r\n    set volume(value) {\r\n        this.setVolume(value);\r\n    }\r\n    /** Audio mute state */\r\n    get muted() {\r\n        return this.getMuted();\r\n    }\r\n    set muted(value) {\r\n        this.setMuted(value);\r\n    }\r\n    /** Indicates whether playback should loop once the end is reached */\r\n    get loop() {\r\n        return this.getLoop();\r\n    }\r\n    set loop(value) {\r\n        this.setLoop(value);\r\n    }\r\n    /** Animation frame rate, measured in frames per second */\r\n    get framerate() {\r\n        return this.note.framerate;\r\n    }\r\n    /** Animation frame count */\r\n    get frameCount() {\r\n        return this.note.frameCount;\r\n    }\r\n    /** Animation frame speed */\r\n    get frameSpeed() {\r\n        return this.note.frameSpeed;\r\n    }\r\n    /**\r\n     * Implementation of the `HTMLMediaElement` {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/buffered | buffered } property\r\n     * @category HTMLVideoElement compatibility\r\n     */\r\n    get buffered() {\r\n        return createTimeRanges([[0, this.duration]]);\r\n    }\r\n    /**\r\n     * Implementation of the `HTMLMediaElement` {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/seekable | seekable} property\r\n     * @category HTMLVideoElement compatibility\r\n     */\r\n    get seekable() {\r\n        return createTimeRanges([[0, this.duration]]);\r\n    }\r\n    /**\r\n     * Implementation of the `HTMLMediaElement` {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/currentSrc | currentSrc} property\r\n     * @category HTMLVideoElement compatibility\r\n     */\r\n    get currentSrc() {\r\n        return this._src;\r\n    }\r\n    /**\r\n     * Implementation of the `HTMLVideoElement` {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLVideoElement/videoWidth | videoWidth} property\r\n     * @category HTMLVideoElement compatibility\r\n     */\r\n    get videoWidth() {\r\n        return this.isNoteLoaded ? this.note.width : 0;\r\n    }\r\n    /**\r\n     * Implementation of the `HTMLVideoElement` {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLVideoElement/videoHeight | videoHeight} property\r\n     * @category HTMLVideoElement compatibility\r\n     */\r\n    get videoHeight() {\r\n        return this.isNoteLoaded ? this.note.height : 0;\r\n    }\r\n    /**\r\n     * Open a Flipnote from a source\r\n     * @category Lifecycle\r\n     */\r\n    async load(source = null) {\r\n        // close currently open note first\r\n        if (this.isNoteLoaded)\r\n            this.closeNote();\r\n        // if no source specified, just reset everything\r\n        if (!source)\r\n            return this.openNote(this.note);\r\n        // otherwise do a normal load\r\n        this.emit(PlayerEvent.LoadStart);\r\n        return parseSource(source)\r\n            .then((note) => {\r\n            this.openNote(note);\r\n            this._src = source;\r\n        })\r\n            .catch((err) => {\r\n            this.emit(PlayerEvent.Error, err);\r\n            throw new Error(`Error loading Flipnote: ${err.message}`);\r\n        });\r\n    }\r\n    /**\r\n     * Close the currently loaded Flipnote\r\n     * @category Lifecycle\r\n     */\r\n    closeNote() {\r\n        this.pause();\r\n        this.note = null;\r\n        this.isNoteLoaded = false;\r\n        this.meta = null;\r\n        this._src = null;\r\n        this._frame = 0;\r\n        // this.playbackFrame = null;\r\n        this.playbackTime = 0;\r\n        this.duration = 0;\r\n        this.loop = false;\r\n        this.isPlaying = false;\r\n        this.wasPlaying = false;\r\n        this.hasPlaybackStarted = false;\r\n        this.showThumbnail = true;\r\n        this.renderer.clearFrameBuffer([0, 0, 0, 0]);\r\n    }\r\n    /**\r\n     * Open a Flipnote into the player\r\n     * @category Lifecycle\r\n     */\r\n    openNote(note) {\r\n        if (this.isNoteLoaded)\r\n            this.closeNote();\r\n        this.note = note;\r\n        this.meta = note.meta;\r\n        this.emit(PlayerEvent.LoadedMeta);\r\n        this.noteFormat = note.format;\r\n        this.duration = note.duration;\r\n        this.playbackTime = 0;\r\n        this._frame = 0;\r\n        this.isNoteLoaded = true;\r\n        this.isPlaying = false;\r\n        this.wasPlaying = false;\r\n        this.hasPlaybackStarted = false;\r\n        this.layerVisibility = note.layerVisibility;\r\n        this.showThumbnail = true;\r\n        this.audio.setBuffer(note.getAudioMasterPcm(), note.sampleRate);\r\n        this.emit(PlayerEvent.CanPlay);\r\n        this.emit(PlayerEvent.CanPlayThrough);\r\n        this.setLoop(note.meta.loop);\r\n        this.renderer.setInputSize(note.width, note.height);\r\n        this.drawFrame(note.thumbFrameIndex);\r\n        this.emit(PlayerEvent.LoadedData);\r\n        this.emit(PlayerEvent.Load);\r\n        this.emit(PlayerEvent.Ready);\r\n        if (this.autoplay)\r\n            this.play();\r\n    }\r\n    /**\r\n     * Set the current playback time\r\n     * @category Playback Control\r\n     */\r\n    setCurrentTime(value) {\r\n        this.assertNoteLoaded();\r\n        const i = Math.floor(value / (1 / this.framerate));\r\n        this.setCurrentFrame(i);\r\n        this.playbackTime = value;\r\n        this.emit(PlayerEvent.Progress, this.progress);\r\n    }\r\n    /**\r\n     * Get the current playback time\r\n     * @category Playback Control\r\n     */\r\n    getCurrentTime() {\r\n        return this.currentTime;\r\n    }\r\n    /**\r\n     * Get the current time as a counter string, like `\"0:00 / 1:00\"`\r\n     * @category Playback Control\r\n     */\r\n    getTimeCounter() {\r\n        const currentTime = formatTime(Math.max(this.currentTime, 0));\r\n        const duration = formatTime(this.duration);\r\n        return `${currentTime} / ${duration}`;\r\n    }\r\n    /**\r\n     * Get the current frame index as a counter string, like `\"001 / 999\"`\r\n     * @category Playback Control\r\n     */\r\n    getFrameCounter() {\r\n        const frame = padNumber(this.currentFrame + 1, 3);\r\n        const total = padNumber(this.frameCount, 3);\r\n        return `${frame} / ${total}`;\r\n    }\r\n    /**\r\n     * Set the current playback progress as a percentage (`0` to `100`)\r\n     * @category Playback Control\r\n     */\r\n    setProgress(value) {\r\n        this.assertNoteLoaded();\r\n        assertRange(value, 0, 100, 'progress');\r\n        this.currentTime = this.duration * (value / 100);\r\n    }\r\n    /**\r\n     * Get the current playback progress as a percentage (0 to 100)\r\n     * @category Playback Control\r\n     */\r\n    getProgress() {\r\n        return this.progress;\r\n    }\r\n    /**\r\n     * Begin animation playback starting at the current position\r\n     * @category Playback Control\r\n     */\r\n    async play() {\r\n        this.assertNoteLoaded();\r\n        if (this.isPlaying)\r\n            return;\r\n        // if ((!this.hasPlaybackStarted) || ((!this.loop) && (this.currentFrame == this.frameCount - 1)))\r\n        //   this.playbackTime = 0;\r\n        this.isPlaying = true;\r\n        this.hasPlaybackStarted = true;\r\n        const now = performance.now();\r\n        this.playbackStartTime = (now / 1000) - this.playbackTime;\r\n        this.playAudio();\r\n        this.playbackLoop(now);\r\n        this.emit(PlayerEvent.Play);\r\n    }\r\n    /**\r\n     * Pause animation playback at the current position\r\n     * @category Playback Control\r\n     */\r\n    pause() {\r\n        if (!this.isPlaying)\r\n            return;\r\n        this.isPlaying = false;\r\n        if (this.playbackLoopId !== null)\r\n            cancelAnimationFrame(this.playbackLoopId);\r\n        this.stopAudio();\r\n        this.emit(PlayerEvent.Pause);\r\n    }\r\n    /**\r\n     * Resumes animation playback if paused, otherwise pauses\r\n     * @category Playback Control\r\n     */\r\n    togglePlay() {\r\n        if (!this.isPlaying)\r\n            this.play();\r\n        else\r\n            this.pause();\r\n    }\r\n    /**\r\n     * Determines if playback is currently paused\r\n     * @category Playback Control\r\n     */\r\n    getPaused() {\r\n        return !this.isPlaying;\r\n    }\r\n    /**\r\n     * Get the duration of the Flipnote in seconds\r\n     * @category Playback Control\r\n     */\r\n    getDuration() {\r\n        return this.duration;\r\n    }\r\n    /**\r\n     * Determines if playback is looped\r\n     * @category Playback Control\r\n     */\r\n    getLoop() {\r\n        return this._loop;\r\n    }\r\n    /**\r\n     * Set the playback loop\r\n     * @category Playback Control\r\n     */\r\n    setLoop(loop) {\r\n        this._loop = loop;\r\n        this.audio.loop = loop;\r\n    }\r\n    /**\r\n     * Switch the playback loop between on and off\r\n     * @category Playback Control\r\n     */\r\n    toggleLoop() {\r\n        this.setLoop(!this._loop);\r\n    }\r\n    /**\r\n     * Jump to a given animation frame\r\n     * @category Frame Control\r\n     */\r\n    setCurrentFrame(newFrameValue) {\r\n        this.assertNoteLoaded();\r\n        const newFrameIndex = Math.max(0, Math.min(Math.floor(newFrameValue), this.frameCount - 1));\r\n        if (newFrameIndex === this.currentFrame && !this.showThumbnail)\r\n            return;\r\n        this._frame = newFrameIndex;\r\n        this.drawFrame(newFrameIndex);\r\n        this.showThumbnail = false;\r\n        if (!this.isPlaying) {\r\n            this.playbackTime = newFrameIndex * (1 / this.framerate);\r\n            this.emit(PlayerEvent.SeekEnd);\r\n        }\r\n        this.emit(PlayerEvent.FrameUpdate, this.currentFrame);\r\n        this.emit(PlayerEvent.Progress, this.progress);\r\n        this.emit(PlayerEvent.TimeUpdate, this.currentFrame);\r\n    }\r\n    /**\r\n     * Jump to the next animation frame\r\n     * If the animation loops, and is currently on its last frame, it will wrap to the first frame\r\n     * @category Frame Control\r\n     */\r\n    nextFrame() {\r\n        if ((this.loop) && (this.currentFrame === this.frameCount - 1))\r\n            this.currentFrame = 0;\r\n        else\r\n            this.currentFrame += 1;\r\n        this.emit(PlayerEvent.FrameNext);\r\n    }\r\n    /**\r\n     * Jump to the next animation frame\r\n     * If the animation loops, and is currently on its first frame, it will wrap to the last frame\r\n     * @category Frame Control\r\n     */\r\n    prevFrame() {\r\n        if ((this.loop) && (this.currentFrame === 0))\r\n            this.currentFrame = this.frameCount - 1;\r\n        else\r\n            this.currentFrame -= 1;\r\n        this.emit(PlayerEvent.FramePrev);\r\n    }\r\n    /**\r\n     * Jump to the last animation frame\r\n     * @category Frame Control\r\n     */\r\n    lastFrame() {\r\n        this.currentFrame = this.frameCount - 1;\r\n        this.emit(PlayerEvent.FrameLast);\r\n    }\r\n    /**\r\n     * Jump to the first animation frame\r\n     * @category Frame Control\r\n     */\r\n    firstFrame() {\r\n        this.currentFrame = 0;\r\n        this.emit(PlayerEvent.FrameFirst);\r\n    }\r\n    /**\r\n     * Jump to the thumbnail frame\r\n     * @category Frame Control\r\n     */\r\n    thumbnailFrame() {\r\n        this.currentFrame = this.note.thumbFrameIndex;\r\n    }\r\n    /**\r\n     * Begins a seek operation\r\n     * @category Playback Control\r\n     */\r\n    startSeek() {\r\n        if (!this.isSeeking) {\r\n            this.emit(PlayerEvent.SeekStart);\r\n            this.wasPlaying = this.isPlaying;\r\n            this.pause();\r\n            this.isSeeking = true;\r\n        }\r\n    }\r\n    /**\r\n     * Seek the playback progress to a different position\r\n     * @param position - animation playback position, range `0` to `1`\r\n     * @category Playback Control\r\n     */\r\n    seek(position) {\r\n        if (this.isSeeking)\r\n            this.progress = position * 100;\r\n    }\r\n    /**\r\n     * Ends a seek operation\r\n     * @category Playback Control\r\n     */\r\n    endSeek() {\r\n        if (this.isSeeking && this.wasPlaying === true)\r\n            this.play();\r\n        this.wasPlaying = false;\r\n        this.isSeeking = false;\r\n    }\r\n    /**\r\n     * Draws the specified animation frame to the canvas. Note that this doesn't update the playback time or anything, it simply decodes a given frame and displays it.\r\n     * @param frameIndex\r\n     * @category Display Control\r\n     */\r\n    drawFrame(frameIndex) {\r\n        const note = this.note;\r\n        const canvas = this.renderer;\r\n        const colors = note.getFramePalette(frameIndex);\r\n        const layerBuffers = note.decodeFrame(frameIndex);\r\n        const layerVisibility = this.layerVisibility;\r\n        // this.canvas.setPaperColor(colors[0]);\r\n        canvas.setPalette(colors);\r\n        canvas.clearFrameBuffer(colors[0]);\r\n        if (note.format === FlipnoteFormat.PPM) {\r\n            if (layerVisibility[2]) // bottom\r\n                canvas.drawPixels(layerBuffers[1], 1);\r\n            if (layerVisibility[1]) // top\r\n                canvas.drawPixels(layerBuffers[0], 0);\r\n        }\r\n        else if (note.format === FlipnoteFormat.KWZ) {\r\n            const order = note.getFrameLayerOrder(frameIndex);\r\n            const layerIndexC = order[0];\r\n            const layerIndexB = order[1];\r\n            const layerIndexA = order[2];\r\n            if (layerVisibility[layerIndexC + 1]) // bottom\r\n                canvas.drawPixels(layerBuffers[layerIndexC], layerIndexC * 2);\r\n            if (layerVisibility[layerIndexB + 1]) // middle\r\n                canvas.drawPixels(layerBuffers[layerIndexB], layerIndexB * 2);\r\n            if (layerVisibility[layerIndexA + 1]) // top\r\n                canvas.drawPixels(layerBuffers[layerIndexA], layerIndexA * 2);\r\n        }\r\n        canvas.composite();\r\n    }\r\n    /**\r\n     * Forces the current animation frame to be redrawn\r\n     * @category Display Control\r\n     */\r\n    forceUpdate() {\r\n        if (this.isNoteLoaded)\r\n            this.drawFrame(this.currentFrame);\r\n    }\r\n    /**\r\n     * Resize the playback canvas to a new size\r\n     * @param width - new canvas width (pixels)\r\n     * @param height - new canvas height (pixels)\r\n     *\r\n     * The ratio between `width` and `height` should be 3:4 for best results\r\n     *\r\n     * @category Display Control\r\n     */\r\n    resize(width, height) {\r\n        if (height !== width * .75)\r\n            console.warn(`Canvas width to height ratio should be 3:4 for best results (got ${width}x${height})`);\r\n        this.renderer.setCanvasSize(width, height);\r\n        this.forceUpdate();\r\n    }\r\n    /**\r\n     * Sets whether an animation layer should be visible throughout the entire animation\r\n     * @param layer - layer index, starting at 1\r\n     * @param value - `true` for visible, `false` for invisible\r\n     *\r\n     * @category Display Control\r\n     */\r\n    setLayerVisibility(layer, value) {\r\n        this.layerVisibility[layer] = value;\r\n        this.forceUpdate();\r\n    }\r\n    /**\r\n     * Returns the visibility state for a given layer\r\n     * @param layer - layer index, starting at 1\r\n     *\r\n     * @category Display Control\r\n     */\r\n    getLayerVisibility(layer) {\r\n        return this.layerVisibility[layer];\r\n    }\r\n    /**\r\n     * Toggles whether an animation layer should be visible throughout the entire animation\r\n     *\r\n     * @category Display Control\r\n     */\r\n    toggleLayerVisibility(layerIndex) {\r\n        this.setLayerVisibility(layerIndex, !this.layerVisibility[layerIndex]);\r\n    }\r\n    playAudio() {\r\n        this.audio.playFrom(this.currentTime);\r\n    }\r\n    stopAudio() {\r\n        this.audio.stop();\r\n    }\r\n    /**\r\n     * Toggle audio Sudomemo equalizer filter\r\n     * @category Audio Control\r\n     */\r\n    toggleAudioEq() {\r\n        this.setAudioEq(!this.audio.useEq);\r\n    }\r\n    /**\r\n     * Turn audio Sudomemo equalizer filter on or off\r\n     * @category Audio Control\r\n     */\r\n    setAudioEq(state) {\r\n        if (this.isPlaying) {\r\n            this.wasPlaying = true;\r\n            this.stopAudio();\r\n        }\r\n        this.audio.useEq = state;\r\n        if (this.wasPlaying) {\r\n            this.wasPlaying = false;\r\n            this.playAudio();\r\n        }\r\n    }\r\n    /**\r\n     * Turn the audio off\r\n     * @category Audio Control\r\n     */\r\n    mute() {\r\n        this.setMuted(true);\r\n    }\r\n    /**\r\n     * Turn the audio on\r\n     * @category Audio Control\r\n     */\r\n    unmute() {\r\n        this.setMuted(false);\r\n    }\r\n    /**\r\n     * Turn the audio on or off\r\n     * @category Audio Control\r\n     */\r\n    setMuted(isMute) {\r\n        if (isMute)\r\n            this.audio.volume = 0;\r\n        else\r\n            this.audio.volume = this._volume;\r\n        this._muted = isMute;\r\n        this.emit(PlayerEvent.VolumeChange, this.audio.volume);\r\n    }\r\n    /**\r\n     * Get the audio mute state\r\n     * @category Audio Control\r\n     */\r\n    getMuted() {\r\n        return this.volume === 0 ? true : this._muted;\r\n    }\r\n    /**\r\n     * Switch the audio between muted and unmuted\r\n     * @category Audio Control\r\n     */\r\n    toggleMuted() {\r\n        this.setMuted(!this._muted);\r\n    }\r\n    /**\r\n     * Set the audio volume\r\n     * @category Audio Control\r\n     */\r\n    setVolume(volume) {\r\n        assertRange(volume, 0, 1, 'volume');\r\n        this._volume = volume;\r\n        this.audio.volume = volume;\r\n        this.emit(PlayerEvent.VolumeChange, this.audio.volume);\r\n    }\r\n    /**\r\n     * Get the current audio volume\r\n     * @category Audio Control\r\n     */\r\n    getVolume() {\r\n        return this._muted ? 0 : this._volume;\r\n    }\r\n    /**\r\n     * Implementation of the `HTMLVideoElement` {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLVideoElement/seekToNextFrame | seekToNextFrame} method\r\n     * @category HTMLVideoElement compatibility\r\n     */\r\n    seekToNextFrame() {\r\n        this.nextFrame();\r\n    }\r\n    /**\r\n     * Implementation of the `HTMLMediaElement` {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/fastSeek | fastSeek} method\r\n     * @category HTMLVideoElement compatibility\r\n     */\r\n    fastSeek(time) {\r\n        this.currentTime = time;\r\n    }\r\n    /**\r\n     * Implementation of the `HTMLVideoElement` {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLVideoElement/getVideoPlaybackQuality | getVideoPlaybackQuality } method\r\n     * @category HTMLVideoElement compatibility\r\n     */\r\n    canPlayType(mediaType) {\r\n        switch (mediaType) {\r\n            case 'application/x-ppm':\r\n            case 'application/x-kwz':\r\n            case 'video/x-ppm':\r\n            case 'video/x-kwz':\r\n            // lauren is planning on registering these officially\r\n            case 'video/vnd.nintendo.ugomemo.ppm':\r\n            case 'video/vnd.nintendo.ugomemo.kwz':\r\n                return 'probably';\r\n            case 'application/octet-stream':\r\n                return 'maybe';\r\n            // and koizumi is planning his revenge\r\n            case 'video/vnd.nintendo.ugomemo.fykt':\r\n            default:\r\n                return '';\r\n        }\r\n    }\r\n    /**\r\n     * Implementation of the `HTMLVideoElement` [https://developer.mozilla.org/en-US/docs/Web/API/HTMLVideoElement/getVideoPlaybackQuality](getVideoPlaybackQuality) method\r\n     * @category HTMLVideoElement compatibility\r\n     */\r\n    getVideoPlaybackQuality() {\r\n        const quality = {\r\n            creationTime: 0,\r\n            droppedVideoFrames: 0,\r\n            totalVideoFrames: this.frameCount\r\n        };\r\n        return quality;\r\n    }\r\n    /**\r\n     * Implementation of the `HTMLVideoElement` [https://developer.mozilla.org/en-US/docs/Web/API/HTMLVideoElement/requestPictureInPicture](requestPictureInPicture) method. Not currently working, only a stub.\r\n     * @category HTMLVideoElement compatibility\r\n     */\r\n    requestPictureInPicture() {\r\n        throw new Error('Not implemented');\r\n    }\r\n    /**\r\n     * Implementation of the `HTMLVideoElement` [https://developer.mozilla.org/en-US/docs/Web/API/HTMLVideoElement/captureStream](captureStream) method. Not currently working, only a stub.\r\n     * @category HTMLVideoElement compatibility\r\n     */\r\n    captureStream() {\r\n        throw new Error('Not implemented');\r\n    }\r\n    /**\r\n     * Add an event callback\r\n     * @category Event API\r\n     */\r\n    on(eventType, listener) {\r\n        const events = this.events;\r\n        const eventList = Array.isArray(eventType) ? eventType : [eventType];\r\n        eventList.forEach(eventType => {\r\n            if (!events.has(eventType))\r\n                events.set(eventType, [listener]);\r\n            else\r\n                events.get(eventType).push(listener);\r\n        });\r\n    }\r\n    /**\r\n     * Remove an event callback\r\n     * @category Event API\r\n     */\r\n    off(eventType, callback) {\r\n        const events = this.events;\r\n        const eventList = Array.isArray(eventType) ? eventType : [eventType];\r\n        eventList.forEach(eventType => {\r\n            if (!events.has(eventType))\r\n                return;\r\n            const callbackList = events.get(eventType);\r\n            events.set(eventType, callbackList.splice(callbackList.indexOf(callback), 1));\r\n        });\r\n    }\r\n    /**\r\n     * Emit an event - mostly used internally\r\n     * @category Event API\r\n     */\r\n    emit(eventType, ...args) {\r\n        const events = this.events;\r\n        if (eventType !== PlayerEvent.__Any && events.has(eventType)) {\r\n            const callbackList = events.get(eventType);\r\n            callbackList.forEach(callback => callback.apply(null, args));\r\n            // call onwhatever() function for this event, if one has been added\r\n            const listenerName = `on${eventType}`;\r\n            const thisAsAny = this;\r\n            if (typeof thisAsAny[listenerName] === 'function')\r\n                thisAsAny[listenerName].apply(null, args);\r\n        }\r\n        // \"any\" event listeners fire for all events, and receive eventType as their first param\r\n        if (events.has(PlayerEvent.__Any)) {\r\n            const callbackList = events.get(PlayerEvent.__Any);\r\n            callbackList.forEach(callback => callback.apply(null, [eventType, ...args]));\r\n        }\r\n    }\r\n    /**\r\n     * Remove all registered event callbacks\r\n     * @category Event API\r\n     */\r\n    clearEvents() {\r\n        this.events.clear();\r\n    }\r\n    /**\r\n     * Destroy a Player instace\r\n     * @category Lifecycle\r\n     */\r\n    async destroy() {\r\n        this.clearEvents();\r\n        this.emit(PlayerEvent.Destroy);\r\n        this.closeNote();\r\n        await this.renderer.destroy();\r\n        await this.audio.destroy();\r\n    }\r\n    /**\r\n     * Returns true if the player supports a given event or method name\r\n     */\r\n    supports(name) {\r\n        const isEvent = this.supportedEvents.includes(name);\r\n        const isMethod = typeof this[name] === 'function';\r\n        return isEvent || isMethod;\r\n    }\r\n    /** @internal */\r\n    assertNoteLoaded() {\r\n        assert(this.isNoteLoaded, 'No Flipnote is currently loaded in this player');\r\n    }\r\n}\n\n/*\r\n  LZWEncoder.js\r\n\n  Authors\r\n  Kevin Weiner (original Java version - kweiner@fmsware.com)\r\n  Thibault Imbert (AS3 version - bytearray.org)\r\n  Johan Nordberg (JS version - code@johan-nordberg.com)\r\n  James Daniel (ES6/TS version)\r\n\n  Acknowledgements\r\n  GIFCOMPR.C - GIF Image compression routines\r\n  Lempel-Ziv compression based on 'compress'. GIF modifications by\r\n  David Rowley (mgardi@watdcsu.waterloo.edu)\r\n  GIF Image compression - modified 'compress'\r\n  Based on: compress.c - File compression ala IEEE Computer, June 1984.\r\n  By Authors: Spencer W. Thomas (decvax!harpo!utah-cs!utah-gr!thomas)\r\n  Jim McKie (decvax!mcvax!jim)\r\n  Steve Davies (decvax!vax135!petsd!peora!srd)\r\n  Ken Turkowski (decvax!decwrl!turtlevax!ken)\r\n  James A. Woods (decvax!ihnp4!ames!jaw)\r\n  Joe Orost (decvax!vax135!petsd!joe)\r\n*/\r\n/** @internal */\r\nconst EOF = -1;\r\n/** @internal */\r\nconst BITS = 12;\r\n/** @internal */\r\nconst HSIZE = 5003; // 80% occupancy\r\n/** @internal */\r\nconst masks = [\r\n    0x0000, 0x0001, 0x0003, 0x0007, 0x000F, 0x001F,\r\n    0x003F, 0x007F, 0x00FF, 0x01FF, 0x03FF, 0x07FF,\r\n    0x0FFF, 0x1FFF, 0x3FFF, 0x7FFF, 0xFFFF\r\n];\r\n/** @internal */\r\nclass LzwCompressor {\r\n    constructor(width, height, colorDepth) {\r\n        this.accum = new Uint8Array(256);\r\n        this.htab = new Int32Array(HSIZE);\r\n        this.codetab = new Int32Array(HSIZE);\r\n        this.cur_accum = 0;\r\n        this.cur_bits = 0;\r\n        this.curPixel = 0;\r\n        this.free_ent = 0; // first unused entry\r\n        // block compression parameters -- after all codes are used up,\r\n        // and compression rate changes, start over.\r\n        this.clear_flg = false;\r\n        // Algorithm: use open addressing double hashing (no chaining) on the\r\n        // prefix code / next character combination. We do a variant of Knuth's\r\n        // algorithm D (vol. 3, sec. 6.4) along with G. Knott's relatively-prime\r\n        // secondary probe. Here, the modular division first probe is gives way\r\n        // to a faster exclusive-or manipulation. Also do block compression with\r\n        // an adaptive reset, whereby the code table is cleared when the compression\r\n        // ratio decreases, but after the table fills. The variable-length output\r\n        // codes are re-sized at this point, and a special CLEAR code is generated\r\n        // for the decompressor. Late addition: construct the table according to\r\n        // file size for noticeable speed improvement on small files. Please direct\r\n        // questions about this implementation to ames!jaw.\r\n        this.g_init_bits = undefined;\r\n        this.ClearCode = undefined;\r\n        this.EOFCode = undefined;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.colorDepth = colorDepth;\r\n        this.reset();\r\n    }\r\n    reset() {\r\n        this.initCodeSize = Math.max(2, this.colorDepth);\r\n        this.accum.fill(0);\r\n        this.htab.fill(0);\r\n        this.codetab.fill(0);\r\n        this.cur_accum = 0;\r\n        this.cur_bits = 0;\r\n        this.curPixel = 0;\r\n        this.free_ent = 0; // first unused entry\r\n        this.maxcode;\r\n        // block compression parameters -- after all codes are used up,\r\n        // and compression rate changes, start over.\r\n        this.clear_flg = false;\r\n        // Algorithm: use open addressing double hashing (no chaining) on the\r\n        // prefix code / next character combination. We do a variant of Knuth's\r\n        // algorithm D (vol. 3, sec. 6.4) along with G. Knott's relatively-prime\r\n        // secondary probe. Here, the modular division first probe is gives way\r\n        // to a faster exclusive-or manipulation. Also do block compression with\r\n        // an adaptive reset, whereby the code table is cleared when the compression\r\n        // ratio decreases, but after the table fills. The variable-length output\r\n        // codes are re-sized at this point, and a special CLEAR code is generated\r\n        // for the decompressor. Late addition: construct the table according to\r\n        // file size for noticeable speed improvement on small files. Please direct\r\n        // questions about this implementation to ames!jaw.\r\n        this.g_init_bits = undefined;\r\n        this.ClearCode = undefined;\r\n        this.EOFCode = undefined;\r\n    }\r\n    // Add a character to the end of the current packet, and if it is 254\r\n    // characters, flush the packet to disk.\r\n    char_out(c, outs) {\r\n        this.accum[this.a_count++] = c;\r\n        if (this.a_count >= 254)\r\n            this.flush_char(outs);\r\n    }\r\n    // Clear out the hash table\r\n    // table clear for block compress\r\n    cl_block(outs) {\r\n        this.cl_hash(HSIZE);\r\n        this.free_ent = this.ClearCode + 2;\r\n        this.clear_flg = true;\r\n        this.output(this.ClearCode, outs);\r\n    }\r\n    // Reset code table\r\n    cl_hash(hsize) {\r\n        for (var i = 0; i < hsize; ++i)\r\n            this.htab[i] = -1;\r\n    }\r\n    compress(init_bits, outs) {\r\n        var fcode, c, i, ent, disp, hsize_reg, hshift;\r\n        // Set up the globals: this.g_init_bits - initial number of bits\r\n        this.g_init_bits = init_bits;\r\n        // Set up the necessary values\r\n        this.clear_flg = false;\r\n        this.n_bits = this.g_init_bits;\r\n        this.maxcode = this.get_maxcode(this.n_bits);\r\n        this.ClearCode = 1 << (init_bits - 1);\r\n        this.EOFCode = this.ClearCode + 1;\r\n        this.free_ent = this.ClearCode + 2;\r\n        this.a_count = 0; // clear packet\r\n        ent = this.nextPixel();\r\n        hshift = 0;\r\n        for (fcode = HSIZE; fcode < 65536; fcode *= 2)\r\n            ++hshift;\r\n        hshift = 8 - hshift; // set hash code range bound\r\n        hsize_reg = HSIZE;\r\n        this.cl_hash(hsize_reg); // clear hash table\r\n        this.output(this.ClearCode, outs);\r\n        outer_loop: while ((c = this.nextPixel()) != EOF) {\r\n            fcode = (c << BITS) + ent;\r\n            i = (c << hshift) ^ ent; // xor hashing\r\n            if (this.htab[i] === fcode) {\r\n                ent = this.codetab[i];\r\n                continue;\r\n            }\r\n            else if (this.htab[i] >= 0) { // non-empty slot\r\n                disp = hsize_reg - i; // secondary hash (after G. Knott)\r\n                if (i === 0) {\r\n                    disp = 1;\r\n                }\r\n                do {\r\n                    if ((i -= disp) < 0) {\r\n                        i += hsize_reg;\r\n                    }\r\n                    if (this.htab[i] === fcode) {\r\n                        ent = this.codetab[i];\r\n                        continue outer_loop;\r\n                    }\r\n                } while (this.htab[i] >= 0);\r\n            }\r\n            this.output(ent, outs);\r\n            ent = c;\r\n            if (this.free_ent < 1 << BITS) {\r\n                this.codetab[i] = this.free_ent++; // code -> hasthis.htable\r\n                this.htab[i] = fcode;\r\n            }\r\n            else {\r\n                this.cl_block(outs);\r\n            }\r\n        }\r\n        // Put out the final code.\r\n        this.output(ent, outs);\r\n        this.output(this.EOFCode, outs);\r\n    }\r\n    encode(pixels, outs) {\r\n        this.pixels = pixels;\r\n        outs.writeByte(this.initCodeSize); // write 'initial code size' byte\r\n        this.remaining = this.width * this.height; // reset navigation variables\r\n        this.curPixel = 0;\r\n        this.compress(this.initCodeSize + 1, outs); // compress and write the pixel data\r\n        outs.writeByte(0); // write block terminator\r\n    }\r\n    // Flush the packet to disk, and reset the this.accumulator\r\n    flush_char(outs) {\r\n        if (this.a_count > 0) {\r\n            outs.writeByte(this.a_count);\r\n            outs.writeBytes(this.accum, 0, this.a_count);\r\n            this.a_count = 0;\r\n        }\r\n    }\r\n    get_maxcode(n_bits) {\r\n        return (1 << n_bits) - 1;\r\n    }\r\n    // Return the next pixel from the image\r\n    nextPixel() {\r\n        if (this.remaining === 0)\r\n            return EOF;\r\n        --this.remaining;\r\n        var pix = this.pixels[this.curPixel++];\r\n        return pix & 0xff;\r\n    }\r\n    output(code, outs) {\r\n        this.cur_accum &= masks[this.cur_bits];\r\n        if (this.cur_bits > 0)\r\n            this.cur_accum |= (code << this.cur_bits);\r\n        else\r\n            this.cur_accum = code;\r\n        this.cur_bits += this.n_bits;\r\n        while (this.cur_bits >= 8) {\r\n            this.char_out((this.cur_accum & 0xff), outs);\r\n            this.cur_accum >>= 8;\r\n            this.cur_bits -= 8;\r\n        }\r\n        // If the next entry is going to be too big for the code size,\r\n        // then increase it, if possible.\r\n        if (this.free_ent > this.maxcode || this.clear_flg) {\r\n            if (this.clear_flg) {\r\n                this.maxcode = this.get_maxcode(this.n_bits = this.g_init_bits);\r\n                this.clear_flg = false;\r\n            }\r\n            else {\r\n                ++this.n_bits;\r\n                if (this.n_bits == BITS)\r\n                    this.maxcode = 1 << BITS;\r\n                else\r\n                    this.maxcode = this.get_maxcode(this.n_bits);\r\n            }\r\n        }\r\n        if (code == this.EOFCode) {\r\n            // At EOF, write the rest of the buffer.\r\n            while (this.cur_bits > 0) {\r\n                this.char_out((this.cur_accum & 0xff), outs);\r\n                this.cur_accum >>= 8;\r\n                this.cur_bits -= 8;\r\n            }\r\n            this.flush_char(outs);\r\n        }\r\n    }\r\n}\n\n/**\r\n * GIF image encoder\r\n *\r\n * Supports static single-frame GIF export as well as animated GIF\r\n * @category File Encoder\r\n */\r\nclass GifImage {\r\n    /**\r\n     * Create a new GIF image object\r\n     * @param width image width\r\n     * @param height image height\r\n     * @param settings whether the gif should loop, the delay between frames, etc. See {@link GifEncoderSettings}\r\n     */\r\n    constructor(width, height, settings = {}) {\r\n        /** Number of current GIF frames */\r\n        this.frameCount = 0;\r\n        this.dataUrl = null;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.data = new ByteArray();\r\n        this.settings = { ...GifImage.defaultSettings, ...settings };\r\n        this.compressor = new LzwCompressor(width, height, settings.colorDepth);\r\n    }\r\n    /**\r\n     * Create an animated GIF image from a Flipnote\r\n     *\r\n     * This will encode the entire animation, so depending on the number of frames it could take a while to return.\r\n     * @param flipnote {@link Flipnote} object ({@link PpmParser} or {@link KwzParser} instance)\r\n     * @param settings whether the gif should loop, the delay between frames, etc. See {@link GifEncoderSettings}\r\n     */\r\n    static fromFlipnote(flipnote, settings = {}) {\r\n        const gif = new GifImage(flipnote.width, flipnote.height, {\r\n            delay: 100 / flipnote.framerate,\r\n            repeat: flipnote.meta.loop ? -1 : 0,\r\n            ...settings\r\n        });\r\n        gif.palette = flipnote.globalPalette;\r\n        for (let frameIndex = 0; frameIndex < flipnote.frameCount; frameIndex++)\r\n            gif.writeFrame(flipnote.getFramePixels(frameIndex));\r\n        return gif;\r\n    }\r\n    /**\r\n     * Create an GIF image from a single Flipnote frame\r\n     * @param flipnote\r\n     * @param frameIndex animation frame index to encode\r\n     * @param settings whether the gif should loop, the delay between frames, etc. See {@link GifEncoderSettings}\r\n     */\r\n    static fromFlipnoteFrame(flipnote, frameIndex, settings = {}) {\r\n        const gif = new GifImage(flipnote.width, flipnote.height, {\r\n            // TODO: look at ideal delay and repeat settings for single frame GIF\r\n            delay: 100 / flipnote.framerate,\r\n            repeat: -1,\r\n            ...settings,\r\n        });\r\n        gif.palette = flipnote.globalPalette;\r\n        gif.writeFrame(flipnote.getFramePixels(frameIndex));\r\n        return gif;\r\n    }\r\n    /**\r\n     * Add a frame to the GIF image\r\n     * @param pixels Raw pixels to encode, must be an uncompressed 8bit array of palette indices with a size matching image width * image height\r\n     */\r\n    writeFrame(pixels) {\r\n        if (this.frameCount === 0)\r\n            this.writeFirstFrame(pixels);\r\n        else\r\n            this.writeAdditionalFrame(pixels);\r\n        this.frameCount += 1;\r\n    }\r\n    writeFirstFrame(pixels) {\r\n        const paletteSize = this.palette.length;\r\n        // calc colorDepth\r\n        for (var p = 1; 1 << p < paletteSize; p += 1)\r\n            continue;\r\n        this.settings.colorDepth = p;\r\n        this.writeHeader();\r\n        this.writeColorTable();\r\n        this.writeNetscapeExt();\r\n        this.writeFrameHeader();\r\n        this.writePixels(pixels);\r\n    }\r\n    writeAdditionalFrame(pixels) {\r\n        this.writeFrameHeader();\r\n        this.writePixels(pixels);\r\n    }\r\n    writeHeader() {\r\n        const header = new DataStream(new ArrayBuffer(13));\r\n        header.writeChars('GIF89a');\r\n        // Logical Screen Descriptor\r\n        header.writeUint16(this.width);\r\n        header.writeUint16(this.height);\r\n        header.writeUint8(0x80 | // 1 : global color table flag = 1 (gct used)\r\n            (this.settings.colorDepth - 1) // 6-8 : gct size\r\n        );\r\n        header.writeBytes([\r\n            0x0,\r\n            0x0\r\n        ]);\r\n        this.data.writeBytes(new Uint8Array(header.buffer));\r\n    }\r\n    writeColorTable() {\r\n        const palette = new Uint8Array(3 * Math.pow(2, this.settings.colorDepth));\r\n        let ptr = 0;\r\n        for (let index = 0; index < this.palette.length; index += 1) {\r\n            const [r, g, b, a] = this.palette[index];\r\n            palette[ptr++] = r;\r\n            palette[ptr++] = g;\r\n            palette[ptr++] = b;\r\n        }\r\n        this.data.writeBytes(palette);\r\n    }\r\n    writeNetscapeExt() {\r\n        const netscapeExt = new DataStream(new ArrayBuffer(19));\r\n        netscapeExt.writeBytes([\r\n            0x21,\r\n            0xFF,\r\n            11,\r\n        ]);\r\n        netscapeExt.writeChars('NETSCAPE2.0');\r\n        netscapeExt.writeUint8(3); // subblock size\r\n        netscapeExt.writeUint8(1); // loop subblock id\r\n        netscapeExt.writeUint16(this.settings.repeat); // loop flag\r\n        this.data.writeBytes(new Uint8Array(netscapeExt.buffer));\r\n    }\r\n    writeFrameHeader() {\r\n        const fHeader = new DataStream(new ArrayBuffer(18));\r\n        // graphics control ext block\r\n        const transparentFlag = this.settings.transparentBg ? 0x1 : 0x0;\r\n        fHeader.writeBytes([\r\n            0x21,\r\n            0xF9,\r\n            0x4,\r\n            0x0 | transparentFlag // bitflags\r\n        ]);\r\n        fHeader.writeUint16(this.settings.delay); // loop flag\r\n        fHeader.writeBytes([\r\n            0x0,\r\n            0x0\r\n        ]);\r\n        // image desc block\r\n        fHeader.writeUint8(0x2C);\r\n        fHeader.writeUint16(0); // image left\r\n        fHeader.writeUint16(0); // image top\r\n        fHeader.writeUint16(this.width);\r\n        fHeader.writeUint16(this.height);\r\n        fHeader.writeUint8(0);\r\n        this.data.writeBytes(new Uint8Array(fHeader.buffer));\r\n    }\r\n    writePixels(pixels) {\r\n        this.compressor.colorDepth = this.settings.colorDepth;\r\n        this.compressor.reset();\r\n        this.compressor.encode(pixels, this.data);\r\n    }\r\n    /**\r\n     * Returns the GIF image data as an {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer | ArrayBuffer}\r\n     */\r\n    getArrayBuffer() {\r\n        return this.data.getBuffer();\r\n    }\r\n    /**\r\n     * Returns the GIF image data as a NodeJS {@link https://nodejs.org/api/buffer.html | Buffer}\r\n     *\r\n     * Note: This method does not work outside of NodeJS environments\r\n     */\r\n    getBuffer() {\r\n        assertNodeEnv();\r\n        return Buffer.from(this.getArrayBuffer());\r\n    }\r\n    /**\r\n     * Returns the GIF image data as a file {@link https://developer.mozilla.org/en-US/docs/Web/API/Blob | Blob}\r\n     */\r\n    getBlob() {\r\n        assertBrowserEnv();\r\n        return new Blob([this.getArrayBuffer()], { type: 'image/gif' });\r\n    }\r\n    /**\r\n     * Returns the GIF image data as an {@link https://developer.mozilla.org/en-US/docs/Web/API/URL/createObjectURL | Object URL}\r\n     *\r\n     * Note: This method does not work outside of browser environments\r\n     */\r\n    getUrl() {\r\n        assertBrowserEnv();\r\n        if (this.dataUrl)\r\n            return this.dataUrl;\r\n        return window.URL.createObjectURL(this.getBlob());\r\n    }\r\n    /**\r\n     * Revokes this image's {@link https://developer.mozilla.org/en-US/docs/Web/API/URL/createObjectURL | Object URL} if one has been created, use this when the url created with {@link getUrl} is no longer needed, to preserve memory.\r\n     *\r\n     * Note: This method does not work outside of browser environments\r\n     */\r\n    revokeUrl() {\r\n        assertBrowserEnv();\r\n        if (this.dataUrl)\r\n            window.URL.revokeObjectURL(this.dataUrl);\r\n    }\r\n    /**\r\n     * Returns the GIF image data as an {@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/Image | Image} object\r\n     *\r\n     * Note: This method does not work outside of browser environments\r\n     */\r\n    getImage() {\r\n        assertBrowserEnv();\r\n        const img = new Image(this.width, this.height);\r\n        img.src = this.getUrl();\r\n        return img;\r\n    }\r\n}\r\n/**\r\n * Default GIF encoder settings\r\n */\r\nGifImage.defaultSettings = {\r\n    transparentBg: false,\r\n    delay: 100,\r\n    repeat: -1,\r\n    colorDepth: 8\r\n};\n\n/**\r\n * Wav audio object. Used to create a {@link https://en.wikipedia.org/wiki/WAV | WAV} file from a PCM audio stream or a {@link Flipnote} object.\r\n *\r\n * Currently only supports PCM s16_le audio encoding.\r\n *\r\n * @category File Encoder\r\n */\r\nclass WavAudio {\r\n    /**\r\n     * Create a new WAV audio object\r\n     * @param sampleRate audio samplerate\r\n     * @param channels number of audio channels\r\n     * @param bitsPerSample number of bits per sample\r\n     */\r\n    constructor(sampleRate, channels = 1, bitsPerSample = 16) {\r\n        this.sampleRate = sampleRate;\r\n        this.channels = channels;\r\n        this.bitsPerSample = bitsPerSample;\r\n        // Write WAV file header\r\n        // Reference: http://www.topherlee.com/software/pcm-tut-wavformat.html\r\n        const headerBuffer = new ArrayBuffer(44);\r\n        const header = new DataStream(headerBuffer);\r\n        // 'RIFF' indent\r\n        header.writeChars('RIFF');\r\n        // filesize (set later)\r\n        header.writeUint32(0);\r\n        // 'WAVE' indent\r\n        header.writeChars('WAVE');\r\n        // 'fmt ' section header\r\n        header.writeChars('fmt ');\r\n        // fmt section length\r\n        header.writeUint32(16);\r\n        // specify audio format is pcm (type 1)\r\n        header.writeUint16(1);\r\n        // number of audio channels\r\n        header.writeUint16(this.channels);\r\n        // audio sample rate\r\n        header.writeUint32(this.sampleRate);\r\n        // byterate = (sampleRate * bitsPerSample * channelCount) / 8\r\n        header.writeUint32((this.sampleRate * this.bitsPerSample * this.channels) / 8);\r\n        // blockalign = (bitsPerSample * channels) / 8\r\n        header.writeUint16((this.bitsPerSample * this.channels) / 8);\r\n        // bits per sample\r\n        header.writeUint16(this.bitsPerSample);\r\n        // 'data' section header\r\n        header.writeChars('data');\r\n        // data section length (set later)\r\n        header.writeUint32(0);\r\n        this.header = header;\r\n        this.pcmData = null;\r\n    }\r\n    /**\r\n     * Create a WAV audio file from a Flipnote's master audio track\r\n     * @param flipnote\r\n     * @param trackId\r\n     */\r\n    static fromFlipnote(note) {\r\n        const sampleRate = note.sampleRate;\r\n        const wav = new WavAudio(sampleRate, 1, 16);\r\n        const pcm = note.getAudioMasterPcm(sampleRate);\r\n        wav.writeFrames(pcm);\r\n        return wav;\r\n    }\r\n    /**\r\n     * Create a WAV audio file from a given Flipnote audio track\r\n     * @param flipnote\r\n     * @param trackId\r\n     */\r\n    static fromFlipnoteTrack(flipnote, trackId) {\r\n        const sampleRate = flipnote.sampleRate;\r\n        const wav = new WavAudio(sampleRate, 1, 16);\r\n        const pcm = flipnote.getAudioTrackPcm(trackId, sampleRate);\r\n        wav.writeFrames(pcm);\r\n        return wav;\r\n    }\r\n    /**\r\n     * Add PCM audio frames to the WAV\r\n     * @param pcmData signed int16 PCM audio samples\r\n     */\r\n    writeFrames(pcmData) {\r\n        let header = this.header;\r\n        // fill in filesize\r\n        header.seek(4);\r\n        header.writeUint32(header.byteLength + pcmData.byteLength);\r\n        // fill in data section length\r\n        header.seek(40);\r\n        header.writeUint32(pcmData.byteLength);\r\n        this.pcmData = pcmData;\r\n    }\r\n    /**\r\n     * Returns the WAV audio data as an {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer | ArrayBuffer}\r\n     */\r\n    getArrayBuffer() {\r\n        const headerBytes = this.header.bytes;\r\n        const pcmBytes = new Uint8Array(this.pcmData.buffer);\r\n        const resultBytes = new Uint8Array(this.header.byteLength + this.pcmData.byteLength);\r\n        resultBytes.set(headerBytes);\r\n        resultBytes.set(pcmBytes, headerBytes.byteLength);\r\n        return resultBytes.buffer;\r\n    }\r\n    /**\r\n     * Returns the WAV audio data as a NodeJS {@link https://nodejs.org/api/buffer.html | Buffer}\r\n     *\r\n     * Note: This method does not work outside of NodeJS environments\r\n     */\r\n    getBuffer() {\r\n        assertNodeEnv();\r\n        return Buffer.from(this.getArrayBuffer());\r\n    }\r\n    /**\r\n     * Returns the GIF image data as a file {@link https://developer.mozilla.org/en-US/docs/Web/API/Blob | Blob}\r\n     *\r\n     * Note: This method will not work outside of browser environments\r\n     */\r\n    getBlob() {\r\n        assertBrowserEnv();\r\n        const buffer = this.getArrayBuffer();\r\n        return new Blob([buffer], { type: 'audio/wav' });\r\n    }\r\n}\n\n// Entrypoint for web and node\r\n/**\r\n * flipnote.js library version (exported as `flipnote.version`). You can find the latest version on the project's [NPM](https://www.npmjs.com/package/flipnote.js) page.\r\n */\r\nconst version = \"5.1.1\"; // replaced by @rollup/plugin-replace; see rollup.config.js\n\nexport { FlipnoteAudioTrack, FlipnoteFormat, GifImage, KwzParser, Player, PpmParser, WavAudio, parseSource, version };\n","import { Flipnote, FlipnoteFormat, FlipnoteAudioTrack } from 'flipnote.js';\n\nexport function clamp(n: number, l: number, h: number) {\n  if (n < l)\n    return l;\n  if (n > h)\n    return h;\n  return n;\n}\n\nexport enum SampleSize {\n  FourBit,\n  TwoBit,\n  Variable\n}\n\nexport class AudioRenderer {\n\n  public audioBuffer: AudioBuffer;\n\n  public isNoteLoaded = false;\n  public note?: Flipnote;\n  public rawAudioData?: Uint8Array;\n\n  // initial decoder state values\n  public initialPredictor = 0;\n  public initialStepIndex = 40;\n  public initialSample = 0;\n  public initialStep = 0;\n  public initialDiff = 0;\n\n  // clamp and scale values\n  public stepIndexClampMin = 0;\n  public stepIndexClampMax = 79;\n  public predictorClampMin = -2048;\n  public predictorClampMax = 2047;\n  public predictorScale = 16;\n\n  // misc settings\n  public sampleSize: SampleSize = SampleSize.Variable;\n  public variableSwitchThreshold = 18;\n\n  // adpcm tables\n  public indexTable2Bit = [\n    -1, 2, -1, 2\n  ];\n  public indexTable4Bit = [\n    -1, -1, -1, -1, 2, 4, 6, 8,\n    -1, -1, -1, -1, 2, 4, 6, 8\n  ];\n  public stepTable = [\n    7, 8, 9, 10, 11, 12, 13, 14, 16, 17,\n    19, 21, 23, 25, 28, 31, 34, 37, 41, 45,\n    50, 55, 60, 66, 73, 80, 88, 97, 107, 118,\n    130, 143, 157, 173, 190, 209, 230, 253, 279, 307,\n    337, 371, 408, 449, 494, 544, 598, 658, 724, 796,\n    876, 963, 1060, 1166, 1282, 1411, 1552, 1707, 1878, 2066,\n    2272, 2499, 2749, 3024, 3327, 3660, 4026, 4428, 4871, 5358,\n    5894, 6484, 7132, 7845, 8630, 9493, 10442, 11487, 12635, 13899,\n    15289, 16818, 18500, 20350, 22385, 24623, 27086, 29794, 32767, 0\n  ];\n\n  public loadFlipnote(note: Flipnote) {\n    if (note.format !== FlipnoteFormat.KWZ)\n      throw new Error('This tool is only for KWZs');\n    this.note = note;\n    this.isNoteLoaded = true;\n    // Get the raw bytes of the BGM audio track\n    this.rawAudioData = note.getAudioTrackRaw(FlipnoteAudioTrack.BGM);\n  }\n\n  public renderPcm() {\n    if (!this.note || !this.rawAudioData)\n      return new Int16Array();\n\n    const input = this.rawAudioData;\n    // initial decoder state\n    let predictor = this.initialPredictor;\n    let stepIndex = this.initialStepIndex;\n    let sample = this.initialSample;\n    let step = this.initialStep;\n    let diff = this.initialDiff;\n    // clamps and scaling\n    const stepIndexClampMin = this.stepIndexClampMin;\n    const stepIndexClampMax = this.stepIndexClampMax;\n    const predictorClampMin = this.predictorClampMin;\n    const predictorClampMax = this.predictorClampMax;\n    const predictorScale = this.predictorScale;\n    // bitdepth settings\n    const bitDepth = this.sampleSize;\n    const bitDepthSwitchThreshold = this.variableSwitchThreshold;\n    // tables\n    const indexTable2Bit = new Int8Array(this.indexTable2Bit);\n    const indexTable4Bit = new Int8Array(this.indexTable4Bit);\n    const stepTable = new Int16Array(this.stepTable);\n    // output\n    const output = new Int16Array(16364 * 60);\n    let outputPtr = 0;\n    // loop through each byte in the raw adpcm data\n    for (let inputPtr = 0; inputPtr < input.length; inputPtr++) {\n      let currByte = input[inputPtr];\n      let currBit = 0;\n      while (currBit < 8) {\n        // 2 bit sample\n        if (bitDepth === SampleSize.TwoBit || (bitDepth === SampleSize.Variable && (stepIndex < bitDepthSwitchThreshold || currBit > 4))) {\n          sample = currByte & 0x3;\n          step = stepTable[stepIndex];\n          diff = step >> 3;\n          if (sample & 1)\n            diff += step;\n          if (sample & 2)\n            diff = -diff;\n          predictor += diff;\n          stepIndex += indexTable2Bit[sample];\n          currByte >>= 2;\n          currBit += 2;\n        }\n        // 4 bit sample\n        else {\n          sample = currByte & 0xf;\n          step = stepTable[stepIndex];\n          diff = step >> 3;\n          if (sample & 1) \n            diff += step >> 2;\n          if (sample & 2) \n            diff += step >> 1;\n          if (sample & 4)\n            diff += step;\n          if (sample & 8)\n            diff = -diff;\n          predictor += diff;\n          stepIndex += indexTable4Bit[sample];\n          currByte >>= 4;\n          currBit += 4;\n        }\n        stepIndex = clamp(stepIndex, stepIndexClampMin, stepIndexClampMax);\n        predictor = clamp(predictor, predictorClampMin, predictorClampMax);\n        output[outputPtr] = predictor * predictorScale;\n        outputPtr += 1;\n      }\n    }\n    return output.slice(0, outputPtr);\n  }\n\n}","import { h, FunctionComponent } from 'preact';\n\nexport const Header: FunctionComponent = () => (\n  <header class=\"Header\">\n    <h1 class=\"Header__title\">\n      Flipnote Audio Tool\n    </h1>\n    <a href=\"https://github.com/jaames/flipnote-audio-tool\">View on GitHub</a>\n  </header>\n);","import { h, FunctionComponent } from 'preact';\n\nexport const Footer: FunctionComponent = () => (\n  <footer class=\"Footer\">\n    <p class=\"Footer__copyright\">\n      Flipnote Studio and Flipnote Studio 3D are copyrights of Nintendo Co., Ltd. <br/>This project isn't affiliated with, or endorsed by them in any way.\n    </p>\n  </footer>\n);","import { h, Component } from 'preact';\nimport { Flipnote, GifImage } from 'flipnote.js';\n\ninterface Props {\n  note: Flipnote;\n};\n\ninterface State {\n  isNoteLoaded: boolean;\n  gifUrl: string;\n  author: string;\n  filename: string;\n  frameCount: number;\n};\n\nexport class NotePreview extends Component<Props, State> {\n\n  shouldComponentUpdate(nextProps: Props) {\n    const note = nextProps.note;\n    if (note && note !== this.props.note) {\n      const gif = GifImage.fromFlipnoteFrame(note, note.thumbFrameIndex);\n      const meta = note.meta;\n      const url = gif.getUrl();\n      this.setState({\n        isNoteLoaded: true,\n        gifUrl: url,\n        author: meta.current.username,\n        filename: meta.current.filename,\n        frameCount: meta.frameCount\n      });\n    }\n    return true;\n  }\n\n  render() {\n    const props = this.props;\n    const state = this.state;\n    return (\n      <div class=\"NotePreview\">\n        <div \n          class=\"NotePreview__thumb\"\n          style={{ backgroundImage: `url(${ state.gifUrl })` }}\n        />\n        <div class=\"NotePreview__details\">\n          <h3 class=\"NotePreview__title\">Flipnote by { state.author }</h3>\n          <div>{ state.filename }.kwz</div>\n          <div>{ state.frameCount} frames</div>\n        </div>\n      </div>\n    );\n  }\n}","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"WaveSurfer\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"WaveSurfer\"] = factory();\n\telse\n\t\troot[\"WaveSurfer\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/wavesurfer.js\");\n","/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\nfunction debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  };\n\n  var debounced = function(){\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n  \n  debounced.flush = function() {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n      \n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n};\n\n// Adds compatibility for ES modules\ndebounce.debounce = debounce;\n\nmodule.exports = debounce;\n","/**\n * @since 3.0.0\n */\n\nimport style from './util/style';\nimport getId from './util/get-id';\n\n/**\n * The `CanvasEntry` class represents an element consisting of a wave `canvas`\n * and an (optional) progress wave `canvas`.\n *\n * The `MultiCanvas` renderer uses one or more `CanvasEntry` instances to\n * render a waveform, depending on the zoom level.\n */\nexport default class CanvasEntry {\n    constructor() {\n        /**\n         * The wave node\n         *\n         * @type {HTMLCanvasElement}\n         */\n        this.wave = null;\n        /**\n         * The wave canvas rendering context\n         *\n         * @type {CanvasRenderingContext2D}\n         */\n        this.waveCtx = null;\n        /**\n         * The (optional) progress wave node\n         *\n         * @type {HTMLCanvasElement}\n         */\n        this.progress = null;\n        /**\n         * The (optional) progress wave canvas rendering context\n         *\n         * @type {CanvasRenderingContext2D}\n         */\n        this.progressCtx = null;\n        /**\n         * Start of the area the canvas should render, between 0 and 1\n         *\n         * @type {number}\n         */\n        this.start = 0;\n        /**\n         * End of the area the canvas should render, between 0 and 1\n         *\n         * @type {number}\n         */\n        this.end = 1;\n        /**\n         * Unique identifier for this entry\n         *\n         * @type {string}\n         */\n        this.id = getId(\n            typeof this.constructor.name !== 'undefined'\n                ? this.constructor.name.toLowerCase() + '_'\n                : 'canvasentry_'\n        );\n        /**\n         * Canvas 2d context attributes\n         *\n         * @type {object}\n         */\n        this.canvasContextAttributes = {};\n    }\n\n    /**\n     * Store the wave canvas element and create the 2D rendering context\n     *\n     * @param {HTMLCanvasElement} element The wave `canvas` element.\n     */\n    initWave(element) {\n        this.wave = element;\n        this.waveCtx = this.wave.getContext('2d', this.canvasContextAttributes);\n    }\n\n    /**\n     * Store the progress wave canvas element and create the 2D rendering\n     * context\n     *\n     * @param {HTMLCanvasElement} element The progress wave `canvas` element.\n     */\n    initProgress(element) {\n        this.progress = element;\n        this.progressCtx = this.progress.getContext(\n            '2d',\n            this.canvasContextAttributes\n        );\n    }\n\n    /**\n     * Update the dimensions\n     *\n     * @param {number} elementWidth Width of the entry\n     * @param {number} totalWidth Total width of the multi canvas renderer\n     * @param {number} width The new width of the element\n     * @param {number} height The new height of the element\n     */\n    updateDimensions(elementWidth, totalWidth, width, height) {\n        // where the canvas starts and ends in the waveform, represented as a\n        // decimal between 0 and 1\n        this.start = this.wave.offsetLeft / totalWidth || 0;\n        this.end = this.start + elementWidth / totalWidth;\n\n        // set wave canvas dimensions\n        this.wave.width = width;\n        this.wave.height = height;\n        let elementSize = { width: elementWidth + 'px' };\n        style(this.wave, elementSize);\n\n        if (this.hasProgressCanvas) {\n            // set progress canvas dimensions\n            this.progress.width = width;\n            this.progress.height = height;\n            style(this.progress, elementSize);\n        }\n    }\n\n    /**\n     * Clear the wave and progress rendering contexts\n     */\n    clearWave() {\n        // wave\n        this.waveCtx.clearRect(\n            0,\n            0,\n            this.waveCtx.canvas.width,\n            this.waveCtx.canvas.height\n        );\n\n        // progress\n        if (this.hasProgressCanvas) {\n            this.progressCtx.clearRect(\n                0,\n                0,\n                this.progressCtx.canvas.width,\n                this.progressCtx.canvas.height\n            );\n        }\n    }\n\n    /**\n     * Set the fill styles for wave and progress\n     *\n     * @param {string} waveColor Fill color for the wave canvas\n     * @param {?string} progressColor Fill color for the progress canvas\n     */\n    setFillStyles(waveColor, progressColor) {\n        this.waveCtx.fillStyle = waveColor;\n\n        if (this.hasProgressCanvas) {\n            this.progressCtx.fillStyle = progressColor;\n        }\n    }\n\n    /**\n     * Draw a rectangle for wave and progress\n     *\n     * @param {number} x X start position\n     * @param {number} y Y start position\n     * @param {number} width Width of the rectangle\n     * @param {number} height Height of the rectangle\n     * @param {number} radius Radius of the rectangle\n     */\n    fillRects(x, y, width, height, radius) {\n        this.fillRectToContext(this.waveCtx, x, y, width, height, radius);\n\n        if (this.hasProgressCanvas) {\n            this.fillRectToContext(\n                this.progressCtx,\n                x,\n                y,\n                width,\n                height,\n                radius\n            );\n        }\n    }\n\n    /**\n     * Draw the actual rectangle on a `canvas` element\n     *\n     * @param {CanvasRenderingContext2D} ctx Rendering context of target canvas\n     * @param {number} x X start position\n     * @param {number} y Y start position\n     * @param {number} width Width of the rectangle\n     * @param {number} height Height of the rectangle\n     * @param {number} radius Radius of the rectangle\n     */\n    fillRectToContext(ctx, x, y, width, height, radius) {\n        if (!ctx) {\n            return;\n        }\n\n        if (radius) {\n            this.drawRoundedRect(ctx, x, y, width, height, radius);\n        } else {\n            ctx.fillRect(x, y, width, height);\n        }\n    }\n\n    /**\n     * Draw a rounded rectangle on Canvas\n     *\n     * @param {CanvasRenderingContext2D} ctx Canvas context\n     * @param {number} x X-position of the rectangle\n     * @param {number} y Y-position of the rectangle\n     * @param {number} width Width of the rectangle\n     * @param {number} height Height of the rectangle\n     * @param {number} radius Radius of the rectangle\n     *\n     * @return {void}\n     * @example drawRoundedRect(ctx, 50, 50, 5, 10, 3)\n     */\n    drawRoundedRect(ctx, x, y, width, height, radius) {\n        if (height === 0) {\n            return;\n        }\n        // peaks are float values from -1 to 1. Use absolute height values in\n        // order to correctly calculate rounded rectangle coordinates\n        if (height < 0) {\n            height *= -1;\n            y -= height;\n        }\n        ctx.beginPath();\n        ctx.moveTo(x + radius, y);\n        ctx.lineTo(x + width - radius, y);\n        ctx.quadraticCurveTo(x + width, y, x + width, y + radius);\n        ctx.lineTo(x + width, y + height - radius);\n        ctx.quadraticCurveTo(\n            x + width,\n            y + height,\n            x + width - radius,\n            y + height\n        );\n        ctx.lineTo(x + radius, y + height);\n        ctx.quadraticCurveTo(x, y + height, x, y + height - radius);\n        ctx.lineTo(x, y + radius);\n        ctx.quadraticCurveTo(x, y, x + radius, y);\n        ctx.closePath();\n        ctx.fill();\n    }\n\n    /**\n     * Render the actual wave and progress lines\n     *\n     * @param {number[]} peaks Array with peaks data\n     * @param {number} absmax Maximum peak value (absolute)\n     * @param {number} halfH Half the height of the waveform\n     * @param {number} offsetY Offset to the top\n     * @param {number} start The x-offset of the beginning of the area that\n     * should be rendered\n     * @param {number} end The x-offset of the end of the area that\n     * should be rendered\n     */\n    drawLines(peaks, absmax, halfH, offsetY, start, end) {\n        this.drawLineToContext(\n            this.waveCtx,\n            peaks,\n            absmax,\n            halfH,\n            offsetY,\n            start,\n            end\n        );\n\n        if (this.hasProgressCanvas) {\n            this.drawLineToContext(\n                this.progressCtx,\n                peaks,\n                absmax,\n                halfH,\n                offsetY,\n                start,\n                end\n            );\n        }\n    }\n\n    /**\n     * Render the actual waveform line on a `canvas` element\n     *\n     * @param {CanvasRenderingContext2D} ctx Rendering context of target canvas\n     * @param {number[]} peaks Array with peaks data\n     * @param {number} absmax Maximum peak value (absolute)\n     * @param {number} halfH Half the height of the waveform\n     * @param {number} offsetY Offset to the top\n     * @param {number} start The x-offset of the beginning of the area that\n     * should be rendered\n     * @param {number} end The x-offset of the end of the area that\n     * should be rendered\n     */\n    drawLineToContext(ctx, peaks, absmax, halfH, offsetY, start, end) {\n        if (!ctx) {\n            return;\n        }\n\n        const length = peaks.length / 2;\n        const first = Math.round(length * this.start);\n\n        // use one more peak value to make sure we join peaks at ends -- unless,\n        // of course, this is the last canvas\n        const last = Math.round(length * this.end) + 1;\n\n        const canvasStart = first;\n        const canvasEnd = last;\n        const scale = this.wave.width / (canvasEnd - canvasStart - 1);\n\n        // optimization\n        const halfOffset = halfH + offsetY;\n        const absmaxHalf = absmax / halfH;\n\n        ctx.beginPath();\n        ctx.moveTo((canvasStart - first) * scale, halfOffset);\n\n        ctx.lineTo(\n            (canvasStart - first) * scale,\n            halfOffset - Math.round((peaks[2 * canvasStart] || 0) / absmaxHalf)\n        );\n\n        let i, peak, h;\n        for (i = canvasStart; i < canvasEnd; i++) {\n            peak = peaks[2 * i] || 0;\n            h = Math.round(peak / absmaxHalf);\n            ctx.lineTo((i - first) * scale + this.halfPixel, halfOffset - h);\n        }\n\n        // draw the bottom edge going backwards, to make a single\n        // closed hull to fill\n        let j = canvasEnd - 1;\n        for (j; j >= canvasStart; j--) {\n            peak = peaks[2 * j + 1] || 0;\n            h = Math.round(peak / absmaxHalf);\n            ctx.lineTo((j - first) * scale + this.halfPixel, halfOffset - h);\n        }\n\n        ctx.lineTo(\n            (canvasStart - first) * scale,\n            halfOffset -\n                Math.round((peaks[2 * canvasStart + 1] || 0) / absmaxHalf)\n        );\n\n        ctx.closePath();\n        ctx.fill();\n    }\n\n    /**\n     * Destroys this entry\n     */\n    destroy() {\n        this.waveCtx = null;\n        this.wave = null;\n\n        this.progressCtx = null;\n        this.progress = null;\n    }\n\n    /**\n     * Return image data of the wave `canvas` element\n     *\n     * When using a `type` of `'blob'`, this will return a `Promise` that\n     * resolves with a `Blob` instance.\n     *\n     * @param {string} format='image/png' An optional value of a format type.\n     * @param {number} quality=0.92 An optional value between 0 and 1.\n     * @param {string} type='dataURL' Either 'dataURL' or 'blob'.\n     * @return {string|Promise} When using the default `'dataURL'` `type` this\n     * returns a data URL. When using the `'blob'` `type` this returns a\n     * `Promise` that resolves with a `Blob` instance.\n     */\n    getImage(format, quality, type) {\n        if (type === 'blob') {\n            return new Promise(resolve => {\n                this.wave.toBlob(resolve, format, quality);\n            });\n        } else if (type === 'dataURL') {\n            return this.wave.toDataURL(format, quality);\n        }\n    }\n}\n","import * as util from './util';\n\n/**\n * Parent class for renderers\n *\n * @extends {Observer}\n */\nexport default class Drawer extends util.Observer {\n    /**\n     * @param {HTMLElement} container The container node of the wavesurfer instance\n     * @param {WavesurferParams} params The wavesurfer initialisation options\n     */\n    constructor(container, params) {\n        super();\n\n        this.container = container;\n        /**\n         * @type {WavesurferParams}\n         */\n        this.params = params;\n        /**\n         * The width of the renderer\n         * @type {number}\n         */\n        this.width = 0;\n        /**\n         * The height of the renderer\n         * @type {number}\n         */\n        this.height = params.height * this.params.pixelRatio;\n\n        this.lastPos = 0;\n        /**\n         * The `<wave>` element which is added to the container\n         * @type {HTMLElement}\n         */\n        this.wrapper = null;\n    }\n\n    /**\n     * Alias of `util.style`\n     *\n     * @param {HTMLElement} el The element that the styles will be applied to\n     * @param {Object} styles The map of propName: attribute, both are used as-is\n     * @return {HTMLElement} el\n     */\n    style(el, styles) {\n        return util.style(el, styles);\n    }\n\n    /**\n     * Create the wrapper `<wave>` element, style it and set up the events for\n     * interaction\n     */\n    createWrapper() {\n        this.wrapper = this.container.appendChild(\n            document.createElement('wave')\n        );\n\n        this.style(this.wrapper, {\n            display: 'block',\n            position: 'relative',\n            userSelect: 'none',\n            webkitUserSelect: 'none',\n            height: this.params.height + 'px'\n        });\n\n        if (this.params.fillParent || this.params.scrollParent) {\n            this.style(this.wrapper, {\n                width: '100%',\n                overflowX: this.params.hideScrollbar ? 'hidden' : 'auto',\n                overflowY: 'hidden'\n            });\n        }\n\n        this.setupWrapperEvents();\n    }\n\n    /**\n     * Handle click event\n     *\n     * @param {Event} e Click event\n     * @param {?boolean} noPrevent Set to true to not call `e.preventDefault()`\n     * @return {number} Playback position from 0 to 1\n     */\n    handleEvent(e, noPrevent) {\n        !noPrevent && e.preventDefault();\n\n        const clientX = e.targetTouches\n            ? e.targetTouches[0].clientX\n            : e.clientX;\n        const bbox = this.wrapper.getBoundingClientRect();\n\n        const nominalWidth = this.width;\n        const parentWidth = this.getWidth();\n\n        let progress;\n        if (!this.params.fillParent && nominalWidth < parentWidth) {\n            progress =\n                (this.params.rtl ? bbox.right - clientX : clientX - bbox.left) *\n                    (this.params.pixelRatio / nominalWidth) || 0;\n        } else {\n            progress =\n                ((this.params.rtl\n                    ? bbox.right - clientX\n                    : clientX - bbox.left) +\n                    this.wrapper.scrollLeft) /\n                    this.wrapper.scrollWidth || 0;\n        }\n\n        return util.clamp(progress, 0, 1);\n    }\n\n    setupWrapperEvents() {\n        this.wrapper.addEventListener('click', e => {\n            const scrollbarHeight =\n                this.wrapper.offsetHeight - this.wrapper.clientHeight;\n            if (scrollbarHeight !== 0) {\n                // scrollbar is visible.  Check if click was on it\n                const bbox = this.wrapper.getBoundingClientRect();\n                if (e.clientY >= bbox.bottom - scrollbarHeight) {\n                    // ignore mousedown as it was on the scrollbar\n                    return;\n                }\n            }\n\n            if (this.params.interact) {\n                this.fireEvent('click', e, this.handleEvent(e));\n            }\n        });\n\n        this.wrapper.addEventListener('dblclick', e => {\n            if (this.params.interact) {\n                this.fireEvent('dblclick', e, this.handleEvent(e));\n            }\n        });\n\n        this.wrapper.addEventListener('scroll', e =>\n            this.fireEvent('scroll', e)\n        );\n    }\n\n    /**\n     * Draw peaks on the canvas\n     *\n     * @param {number[]|Number.<Array[]>} peaks Can also be an array of arrays\n     * for split channel rendering\n     * @param {number} length The width of the area that should be drawn\n     * @param {number} start The x-offset of the beginning of the area that\n     * should be rendered\n     * @param {number} end The x-offset of the end of the area that should be\n     * rendered\n     */\n    drawPeaks(peaks, length, start, end) {\n        if (!this.setWidth(length)) {\n            this.clearWave();\n        }\n\n        this.params.barWidth\n            ? this.drawBars(peaks, 0, start, end)\n            : this.drawWave(peaks, 0, start, end);\n    }\n\n    /**\n     * Scroll to the beginning\n     */\n    resetScroll() {\n        if (this.wrapper !== null) {\n            this.wrapper.scrollLeft = 0;\n        }\n    }\n\n    /**\n     * Recenter the view-port at a certain percent of the waveform\n     *\n     * @param {number} percent Value from 0 to 1 on the waveform\n     */\n    recenter(percent) {\n        const position = this.wrapper.scrollWidth * percent;\n        this.recenterOnPosition(position, true);\n    }\n\n    /**\n     * Recenter the view-port on a position, either scroll there immediately or\n     * in steps of 5 pixels\n     *\n     * @param {number} position X-offset in pixels\n     * @param {boolean} immediate Set to true to immediately scroll somewhere\n     */\n    recenterOnPosition(position, immediate) {\n        const scrollLeft = this.wrapper.scrollLeft;\n        const half = ~~(this.wrapper.clientWidth / 2);\n        const maxScroll = this.wrapper.scrollWidth - this.wrapper.clientWidth;\n        let target = position - half;\n        let offset = target - scrollLeft;\n\n        if (maxScroll == 0) {\n            // no need to continue if scrollbar is not there\n            return;\n        }\n\n        // if the cursor is currently visible...\n        if (!immediate && -half <= offset && offset < half) {\n            // set rate at which waveform is centered\n            let rate = this.params.autoCenterRate;\n\n            // make rate depend on width of view and length of waveform\n            rate /= half;\n            rate *= maxScroll;\n\n            offset = Math.max(-rate, Math.min(rate, offset));\n            target = scrollLeft + offset;\n        }\n\n        // limit target to valid range (0 to maxScroll)\n        target = Math.max(0, Math.min(maxScroll, target));\n        // no use attempting to scroll if we're not moving\n        if (target != scrollLeft) {\n            this.wrapper.scrollLeft = target;\n        }\n    }\n\n    /**\n     * Get the current scroll position in pixels\n     *\n     * @return {number} Horizontal scroll position in pixels\n     */\n    getScrollX() {\n        let x = 0;\n        if (this.wrapper) {\n            const pixelRatio = this.params.pixelRatio;\n            x = Math.round(this.wrapper.scrollLeft * pixelRatio);\n\n            // In cases of elastic scroll (safari with mouse wheel) you can\n            // scroll beyond the limits of the container\n            // Calculate and floor the scrollable extent to make sure an out\n            // of bounds value is not returned\n            // Ticket #1312\n            if (this.params.scrollParent) {\n                const maxScroll = ~~(\n                    this.wrapper.scrollWidth * pixelRatio -\n                    this.getWidth()\n                );\n                x = Math.min(maxScroll, Math.max(0, x));\n            }\n        }\n        return x;\n    }\n\n    /**\n     * Get the width of the container\n     *\n     * @return {number} The width of the container\n     */\n    getWidth() {\n        return Math.round(this.container.clientWidth * this.params.pixelRatio);\n    }\n\n    /**\n     * Set the width of the container\n     *\n     * @param {number} width The new width of the container\n     * @return {boolean} Whether the width of the container was updated or not\n     */\n    setWidth(width) {\n        if (this.width == width) {\n            return false;\n        }\n\n        this.width = width;\n\n        if (this.params.fillParent || this.params.scrollParent) {\n            this.style(this.wrapper, {\n                width: ''\n            });\n        } else {\n            this.style(this.wrapper, {\n                width: ~~(this.width / this.params.pixelRatio) + 'px'\n            });\n        }\n\n        this.updateSize();\n        return true;\n    }\n\n    /**\n     * Set the height of the container\n     *\n     * @param {number} height The new height of the container.\n     * @return {boolean} Whether the height of the container was updated or not\n     */\n    setHeight(height) {\n        if (height == this.height) {\n            return false;\n        }\n        this.height = height;\n\n        this.style(this.wrapper, {\n            height: ~~(this.height / this.params.pixelRatio) + 'px'\n        });\n\n        this.updateSize();\n        return true;\n    }\n\n    /**\n     * Called by wavesurfer when progress should be rendered\n     *\n     * @param {number} progress From 0 to 1\n     */\n    progress(progress) {\n        const minPxDelta = 1 / this.params.pixelRatio;\n        const pos = Math.round(progress * this.width) * minPxDelta;\n\n        if (pos < this.lastPos || pos - this.lastPos >= minPxDelta) {\n            this.lastPos = pos;\n\n            if (this.params.scrollParent && this.params.autoCenter) {\n                const newPos = ~~(this.wrapper.scrollWidth * progress);\n                this.recenterOnPosition(\n                    newPos,\n                    this.params.autoCenterImmediately\n                );\n            }\n\n            this.updateProgress(pos);\n        }\n    }\n\n    /**\n     * This is called when wavesurfer is destroyed\n     */\n    destroy() {\n        this.unAll();\n        if (this.wrapper) {\n            if (this.wrapper.parentNode == this.container) {\n                this.container.removeChild(this.wrapper);\n            }\n            this.wrapper = null;\n        }\n    }\n\n    /* Renderer-specific methods */\n\n    /**\n     * Called after cursor related params have changed.\n     *\n     * @abstract\n     */\n    updateCursor() {}\n\n    /**\n     * Called when the size of the container changes so the renderer can adjust\n     *\n     * @abstract\n     */\n    updateSize() {}\n\n    /**\n     * Draw a waveform with bars\n     *\n     * @abstract\n     * @param {number[]|Number.<Array[]>} peaks Can also be an array of arrays for split channel\n     * rendering\n     * @param {number} channelIndex The index of the current channel. Normally\n     * should be 0\n     * @param {number} start The x-offset of the beginning of the area that\n     * should be rendered\n     * @param {number} end The x-offset of the end of the area that should be\n     * rendered\n     */\n    drawBars(peaks, channelIndex, start, end) {}\n\n    /**\n     * Draw a waveform\n     *\n     * @abstract\n     * @param {number[]|Number.<Array[]>} peaks Can also be an array of arrays for split channel\n     * rendering\n     * @param {number} channelIndex The index of the current channel. Normally\n     * should be 0\n     * @param {number} start The x-offset of the beginning of the area that\n     * should be rendered\n     * @param {number} end The x-offset of the end of the area that should be\n     * rendered\n     */\n    drawWave(peaks, channelIndex, start, end) {}\n\n    /**\n     * Clear the waveform\n     *\n     * @abstract\n     */\n    clearWave() {}\n\n    /**\n     * Render the new progress\n     *\n     * @abstract\n     * @param {number} position X-Offset of progress position in pixels\n     */\n    updateProgress(position) {}\n}\n","import Drawer from './drawer';\nimport * as util from './util';\nimport CanvasEntry from './drawer.canvasentry';\n\n/**\n * MultiCanvas renderer for wavesurfer. Is currently the default and sole\n * builtin renderer.\n *\n * A `MultiCanvas` consists of one or more `CanvasEntry` instances, depending\n * on the zoom level.\n */\nexport default class MultiCanvas extends Drawer {\n    /**\n     * @param {HTMLElement} container The container node of the wavesurfer instance\n     * @param {WavesurferParams} params The wavesurfer initialisation options\n     */\n    constructor(container, params) {\n        super(container, params);\n\n        /**\n         * @type {number}\n         */\n        this.maxCanvasWidth = params.maxCanvasWidth;\n\n        /**\n         * @type {number}\n         */\n        this.maxCanvasElementWidth = Math.round(\n            params.maxCanvasWidth / params.pixelRatio\n        );\n\n        /**\n         * Whether or not the progress wave is rendered. If the `waveColor`\n         * and `progressColor` are the same color it is not.\n         *\n         * @type {boolean}\n         */\n        this.hasProgressCanvas = params.waveColor != params.progressColor;\n\n        /**\n         * @type {number}\n         */\n        this.halfPixel = 0.5 / params.pixelRatio;\n\n        /**\n         * List of `CanvasEntry` instances.\n         *\n         * @type {Array}\n         */\n        this.canvases = [];\n\n        /**\n         * @type {HTMLElement}\n         */\n        this.progressWave = null;\n\n        /**\n         * Class used to generate entries.\n         *\n         * @type {function}\n         */\n        this.EntryClass = CanvasEntry;\n\n        /**\n         * Canvas 2d context attributes.\n         *\n         * @type {object}\n         */\n        this.canvasContextAttributes = params.drawingContextAttributes;\n\n        /**\n         * Overlap added between entries to prevent vertical white stripes\n         * between `canvas` elements.\n         *\n         * @type {number}\n         */\n        this.overlap = 2 * Math.ceil(params.pixelRatio / 2);\n\n        /**\n         * The radius of the wave bars. Makes bars rounded\n         *\n         * @type {number}\n         */\n        this.barRadius = params.barRadius || 0;\n    }\n\n    /**\n     * Initialize the drawer\n     */\n    init() {\n        this.createWrapper();\n        this.createElements();\n    }\n\n    /**\n     * Create the canvas elements and style them\n     *\n     */\n    createElements() {\n        this.progressWave = this.wrapper.appendChild(\n            this.style(document.createElement('wave'), {\n                position: 'absolute',\n                zIndex: 3,\n                left: 0,\n                top: 0,\n                bottom: 0,\n                overflow: 'hidden',\n                width: '0',\n                display: 'none',\n                boxSizing: 'border-box',\n                borderRightStyle: 'solid',\n                pointerEvents: 'none'\n            })\n        );\n\n        this.addCanvas();\n        this.updateCursor();\n    }\n\n    /**\n     * Update cursor style\n     */\n    updateCursor() {\n        this.style(this.progressWave, {\n            borderRightWidth: this.params.cursorWidth + 'px',\n            borderRightColor: this.params.cursorColor\n        });\n    }\n\n    /**\n     * Adjust to the updated size by adding or removing canvases\n     */\n    updateSize() {\n        const totalWidth = Math.round(this.width / this.params.pixelRatio);\n        const requiredCanvases = Math.ceil(\n            totalWidth / (this.maxCanvasElementWidth + this.overlap)\n        );\n\n        // add required canvases\n        while (this.canvases.length < requiredCanvases) {\n            this.addCanvas();\n        }\n\n        // remove older existing canvases, if any\n        while (this.canvases.length > requiredCanvases) {\n            this.removeCanvas();\n        }\n\n        let canvasWidth = this.maxCanvasWidth + this.overlap;\n        const lastCanvas = this.canvases.length - 1;\n        this.canvases.forEach((entry, i) => {\n            if (i == lastCanvas) {\n                canvasWidth = this.width - this.maxCanvasWidth * lastCanvas;\n            }\n            this.updateDimensions(entry, canvasWidth, this.height);\n\n            entry.clearWave();\n        });\n    }\n\n    /**\n     * Add a canvas to the canvas list\n     *\n     */\n    addCanvas() {\n        const entry = new this.EntryClass();\n        entry.canvasContextAttributes = this.canvasContextAttributes;\n        entry.hasProgressCanvas = this.hasProgressCanvas;\n        entry.halfPixel = this.halfPixel;\n        const leftOffset = this.maxCanvasElementWidth * this.canvases.length;\n\n        // wave\n        entry.initWave(\n            this.wrapper.appendChild(\n                this.style(document.createElement('canvas'), {\n                    position: 'absolute',\n                    zIndex: 2,\n                    left: leftOffset + 'px',\n                    top: 0,\n                    bottom: 0,\n                    height: '100%',\n                    pointerEvents: 'none'\n                })\n            )\n        );\n\n        // progress\n        if (this.hasProgressCanvas) {\n            entry.initProgress(\n                this.progressWave.appendChild(\n                    this.style(document.createElement('canvas'), {\n                        position: 'absolute',\n                        left: leftOffset + 'px',\n                        top: 0,\n                        bottom: 0,\n                        height: '100%'\n                    })\n                )\n            );\n        }\n\n        this.canvases.push(entry);\n    }\n\n    /**\n     * Pop single canvas from the list\n     *\n     */\n    removeCanvas() {\n        let lastEntry = this.canvases[this.canvases.length - 1];\n\n        // wave\n        lastEntry.wave.parentElement.removeChild(lastEntry.wave);\n\n        // progress\n        if (this.hasProgressCanvas) {\n            lastEntry.progress.parentElement.removeChild(lastEntry.progress);\n        }\n\n        // cleanup\n        if (lastEntry) {\n            lastEntry.destroy();\n            lastEntry = null;\n        }\n\n        this.canvases.pop();\n    }\n\n    /**\n     * Update the dimensions of a canvas element\n     *\n     * @param {CanvasEntry} entry Target entry\n     * @param {number} width The new width of the element\n     * @param {number} height The new height of the element\n     */\n    updateDimensions(entry, width, height) {\n        const elementWidth = Math.round(width / this.params.pixelRatio);\n        const totalWidth = Math.round(this.width / this.params.pixelRatio);\n\n        // update canvas dimensions\n        entry.updateDimensions(elementWidth, totalWidth, width, height);\n\n        // style element\n        this.style(this.progressWave, { display: 'block' });\n    }\n\n    /**\n     * Clear the whole multi-canvas\n     */\n    clearWave() {\n        util.frame(() => {\n            this.canvases.forEach(entry => entry.clearWave());\n        })();\n    }\n\n    /**\n     * Draw a waveform with bars\n     *\n     * @param {number[]|Number.<Array[]>} peaks Can also be an array of arrays\n     * for split channel rendering\n     * @param {number} channelIndex The index of the current channel. Normally\n     * should be 0. Must be an integer.\n     * @param {number} start The x-offset of the beginning of the area that\n     * should be rendered\n     * @param {number} end The x-offset of the end of the area that should be\n     * rendered\n     * @returns {void}\n     */\n    drawBars(peaks, channelIndex, start, end) {\n        return this.prepareDraw(\n            peaks,\n            channelIndex,\n            start,\n            end,\n            ({ absmax, hasMinVals, height, offsetY, halfH, peaks }) => {\n                // if drawBars was called within ws.empty we don't pass a start and\n                // don't want anything to happen\n                if (start === undefined) {\n                    return;\n                }\n                // Skip every other value if there are negatives.\n                const peakIndexScale = hasMinVals ? 2 : 1;\n                const length = peaks.length / peakIndexScale;\n                const bar = this.params.barWidth * this.params.pixelRatio;\n                const gap =\n                    this.params.barGap === null\n                        ? Math.max(this.params.pixelRatio, ~~(bar / 2))\n                        : Math.max(\n                            this.params.pixelRatio,\n                            this.params.barGap * this.params.pixelRatio\n                        );\n                const step = bar + gap;\n\n                const scale = length / this.width;\n                const first = start;\n                const last = end;\n                let i = first;\n\n                for (i; i < last; i += step) {\n                    const peak =\n                        peaks[Math.floor(i * scale * peakIndexScale)] || 0;\n                    let h = Math.round((peak / absmax) * halfH);\n\n                    /* in case of silences, allow the user to specify that we\n                     * always draw *something* (normally a 1px high bar) */\n                    if (h == 0 && this.params.barMinHeight)\n                        h = this.params.barMinHeight;\n\n                    this.fillRect(\n                        i + this.halfPixel,\n                        halfH - h + offsetY,\n                        bar + this.halfPixel,\n                        h * 2,\n                        this.barRadius\n                    );\n                }\n            }\n        );\n    }\n\n    /**\n     * Draw a waveform\n     *\n     * @param {number[]|Number.<Array[]>} peaks Can also be an array of arrays\n     * for split channel rendering\n     * @param {number} channelIndex The index of the current channel. Normally\n     * should be 0\n     * @param {number?} start The x-offset of the beginning of the area that\n     * should be rendered (If this isn't set only a flat line is rendered)\n     * @param {number?} end The x-offset of the end of the area that should be\n     * rendered\n     * @returns {void}\n     */\n    drawWave(peaks, channelIndex, start, end) {\n        return this.prepareDraw(\n            peaks,\n            channelIndex,\n            start,\n            end,\n            ({ absmax, hasMinVals, height, offsetY, halfH, peaks, channelIndex }) => {\n                if (!hasMinVals) {\n                    const reflectedPeaks = [];\n                    const len = peaks.length;\n                    let i = 0;\n                    for (i; i < len; i++) {\n                        reflectedPeaks[2 * i] = peaks[i];\n                        reflectedPeaks[2 * i + 1] = -peaks[i];\n                    }\n                    peaks = reflectedPeaks;\n                }\n\n                // if drawWave was called within ws.empty we don't pass a start and\n                // end and simply want a flat line\n                if (start !== undefined) {\n                    this.drawLine(peaks, absmax, halfH, offsetY, start, end, channelIndex);\n                }\n\n                // always draw a median line\n                this.fillRect(\n                    0,\n                    halfH + offsetY - this.halfPixel,\n                    this.width,\n                    this.halfPixel,\n                    this.barRadius\n                );\n            }\n        );\n    }\n\n    /**\n     * Tell the canvas entries to render their portion of the waveform\n     *\n     * @param {number[]} peaks Peaks data\n     * @param {number} absmax Maximum peak value (absolute)\n     * @param {number} halfH Half the height of the waveform\n     * @param {number} offsetY Offset to the top\n     * @param {number} start The x-offset of the beginning of the area that\n     * should be rendered\n     * @param {number} end The x-offset of the end of the area that\n     * should be rendered\n     * @param {channelIndex} channelIndex The channel index of the line drawn\n     */\n    drawLine(peaks, absmax, halfH, offsetY, start, end, channelIndex) {\n        const { waveColor, progressColor } = this.params.splitChannelsOptions.channelColors[channelIndex] || {};\n        this.canvases.forEach((entry, i) => {\n            this.setFillStyles(entry, waveColor, progressColor);\n            entry.drawLines(peaks, absmax, halfH, offsetY, start, end);\n        });\n    }\n\n    /**\n     * Draw a rectangle on the multi-canvas\n     *\n     * @param {number} x X-position of the rectangle\n     * @param {number} y Y-position of the rectangle\n     * @param {number} width Width of the rectangle\n     * @param {number} height Height of the rectangle\n     * @param {number} radius Radius of the rectangle\n     */\n    fillRect(x, y, width, height, radius) {\n        const startCanvas = Math.floor(x / this.maxCanvasWidth);\n        const endCanvas = Math.min(\n            Math.ceil((x + width) / this.maxCanvasWidth) + 1,\n            this.canvases.length\n        );\n        let i = startCanvas;\n        for (i; i < endCanvas; i++) {\n            const entry = this.canvases[i];\n            const leftOffset = i * this.maxCanvasWidth;\n\n            const intersection = {\n                x1: Math.max(x, i * this.maxCanvasWidth),\n                y1: y,\n                x2: Math.min(\n                    x + width,\n                    i * this.maxCanvasWidth + entry.wave.width\n                ),\n                y2: y + height\n            };\n\n            if (intersection.x1 < intersection.x2) {\n                this.setFillStyles(entry);\n\n                entry.fillRects(\n                    intersection.x1 - leftOffset,\n                    intersection.y1,\n                    intersection.x2 - intersection.x1,\n                    intersection.y2 - intersection.y1,\n                    radius\n                );\n            }\n        }\n    }\n\n    /**\n     * Returns whether to hide the channel from being drawn based on params.\n     *\n     * @param {number} channelIndex The index of the current channel.\n     * @returns {bool} True to hide the channel, false to draw.\n     */\n    hideChannel(channelIndex) {\n        return this.params.splitChannels && this.params.splitChannelsOptions.filterChannels.includes(channelIndex);\n    }\n\n    /**\n     * Performs preparation tasks and calculations which are shared by `drawBars`\n     * and `drawWave`\n     *\n     * @param {number[]|Number.<Array[]>} peaks Can also be an array of arrays for\n     * split channel rendering\n     * @param {number} channelIndex The index of the current channel. Normally\n     * should be 0\n     * @param {number?} start The x-offset of the beginning of the area that\n     * should be rendered. If this isn't set only a flat line is rendered\n     * @param {number?} end The x-offset of the end of the area that should be\n     * rendered\n     * @param {function} fn The render function to call, e.g. `drawWave`\n     * @param {number} drawIndex The index of the current channel after filtering.\n     * @param {number?} normalizedMax Maximum modulation value across channels for use with relativeNormalization. Ignored when undefined\n     * @returns {void}\n     */\n    prepareDraw(peaks, channelIndex, start, end, fn, drawIndex, normalizedMax) {\n        return util.frame(() => {\n            // Split channels and call this function with the channelIndex set\n            if (peaks[0] instanceof Array) {\n                const channels = peaks;\n\n                if (this.params.splitChannels) {\n                    const filteredChannels = channels.filter((c, i) => !this.hideChannel(i));\n                    if (!this.params.splitChannelsOptions.overlay) {\n                        this.setHeight(\n                            Math.max(filteredChannels.length, 1) *\n                                this.params.height *\n                                this.params.pixelRatio\n                        );\n                    }\n\n                    let overallAbsMax;\n                    if (this.params.splitChannelsOptions && this.params.splitChannelsOptions.relativeNormalization) {\n                        // calculate maximum peak across channels to use for normalization\n                        overallAbsMax = util.max(channels.map((channelPeaks => util.absMax(channelPeaks))));\n                    }\n\n\n                    return channels.forEach((channelPeaks, i) =>\n                        this.prepareDraw(channelPeaks, i, start, end, fn, filteredChannels.indexOf(channelPeaks), overallAbsMax)\n                    );\n                }\n                peaks = channels[0];\n            }\n\n            // Return and do not draw channel peaks if hidden.\n            if (this.hideChannel(channelIndex)) {\n                return;\n            }\n\n            // calculate maximum modulation value, either from the barHeight\n            // parameter or if normalize=true from the largest value in the peak\n            // set\n            let absmax = 1 / this.params.barHeight;\n            if (this.params.normalize) {\n                absmax = normalizedMax === undefined ? util.absMax(peaks) : normalizedMax;\n            }\n\n            // Bar wave draws the bottom only as a reflection of the top,\n            // so we don't need negative values\n            const hasMinVals = [].some.call(peaks, val => val < 0);\n            const height = this.params.height * this.params.pixelRatio;\n            const offsetY = height * drawIndex || 0;\n            const halfH = height / 2;\n\n            return fn({\n                absmax: absmax,\n                hasMinVals: hasMinVals,\n                height: height,\n                offsetY: offsetY,\n                halfH: halfH,\n                peaks: peaks,\n                channelIndex: channelIndex\n            });\n        })();\n    }\n\n    /**\n     * Set the fill styles for a certain entry (wave and progress)\n     *\n     * @param {CanvasEntry} entry Target entry\n     * @param {string} waveColor Wave color to draw this entry\n     * @param {string} progressColor Progress color to draw this entry\n     */\n    setFillStyles(entry, waveColor = this.params.waveColor, progressColor = this.params.progressColor) {\n        entry.setFillStyles(waveColor, progressColor);\n    }\n\n    /**\n     * Return image data of the multi-canvas\n     *\n     * When using a `type` of `'blob'`, this will return a `Promise`.\n     *\n     * @param {string} format='image/png' An optional value of a format type.\n     * @param {number} quality=0.92 An optional value between 0 and 1.\n     * @param {string} type='dataURL' Either 'dataURL' or 'blob'.\n     * @return {string|string[]|Promise} When using the default `'dataURL'`\n     * `type` this returns a single data URL or an array of data URLs,\n     * one for each canvas. When using the `'blob'` `type` this returns a\n     * `Promise` that resolves with an array of `Blob` instances, one for each\n     * canvas.\n     */\n    getImage(format, quality, type) {\n        if (type === 'blob') {\n            return Promise.all(\n                this.canvases.map(entry => {\n                    return entry.getImage(format, quality, type);\n                })\n            );\n        } else if (type === 'dataURL') {\n            let images = this.canvases.map(entry =>\n                entry.getImage(format, quality, type)\n            );\n            return images.length > 1 ? images : images[0];\n        }\n    }\n\n    /**\n     * Render the new progress\n     *\n     * @param {number} position X-offset of progress position in pixels\n     */\n    updateProgress(position) {\n        this.style(this.progressWave, { width: position + 'px' });\n    }\n}\n","import MediaElement from './mediaelement';\n\n/**\n * MediaElementWebAudio backend: load audio via an HTML5 audio tag, but playback with the WebAudio API.\n * The advantage here is that the html5 <audio> tag can perform range requests on the server and not\n * buffer the entire file in one request, and you still get the filtering and scripting functionality\n * of the webaudio API.\n * Note that in order to use range requests and prevent buffering, you must provide peak data.\n *\n * @since 3.2.0\n */\nexport default class MediaElementWebAudio extends MediaElement {\n    /**\n     * Construct the backend\n     *\n     * @param {WavesurferParams} params Wavesurfer parameters\n     */\n    constructor(params) {\n        super(params);\n        /** @private */\n        this.params = params;\n        /** @private */\n        this.sourceMediaElement = null;\n    }\n\n    /**\n     * Initialise the backend, called in `wavesurfer.createBackend()`\n     */\n    init() {\n        this.setPlaybackRate(this.params.audioRate);\n        this.createTimer();\n        this.createVolumeNode();\n        this.createScriptNode();\n        this.createAnalyserNode();\n    }\n    /**\n     * Private method called by both `load` (from url)\n     * and `loadElt` (existing media element) methods.\n     *\n     * @param {HTMLMediaElement} media HTML5 Audio or Video element\n     * @param {number[]|Number.<Array[]>} peaks Array of peak data\n     * @param {string} preload HTML 5 preload attribute value\n     * @private\n     */\n    _load(media, peaks, preload) {\n        super._load(media, peaks, preload);\n        this.createMediaElementSource(media);\n    }\n\n    /**\n     * Create MediaElementSource node\n     *\n     * @since 3.2.0\n     * @param {HTMLMediaElement} mediaElement HTML5 Audio to load\n     */\n    createMediaElementSource(mediaElement) {\n        this.sourceMediaElement = this.ac.createMediaElementSource(\n            mediaElement\n        );\n        this.sourceMediaElement.connect(this.analyser);\n    }\n\n    play(start, end) {\n        this.resumeAudioContext();\n        return super.play(start, end);\n    }\n\n    /**\n     * This is called when wavesurfer is destroyed\n     *\n     */\n    destroy() {\n        super.destroy();\n\n        this.destroyWebAudio();\n    }\n}\n","import WebAudio from './webaudio';\nimport * as util from './util';\n\n/**\n * MediaElement backend\n */\nexport default class MediaElement extends WebAudio {\n    /**\n     * Construct the backend\n     *\n     * @param {WavesurferParams} params Wavesurfer parameters\n     */\n    constructor(params) {\n        super(params);\n        /** @private */\n        this.params = params;\n\n        /**\n         * Initially a dummy media element to catch errors. Once `_load` is\n         * called, this will contain the actual `HTMLMediaElement`.\n         * @private\n         */\n        this.media = {\n            currentTime: 0,\n            duration: 0,\n            paused: true,\n            playbackRate: 1,\n            play() {},\n            pause() {},\n            volume: 0\n        };\n\n        /** @private */\n        this.mediaType = params.mediaType.toLowerCase();\n        /** @private */\n        this.elementPosition = params.elementPosition;\n        /** @private */\n        this.peaks = null;\n        /** @private */\n        this.playbackRate = 1;\n        /** @private */\n        this.volume = 1;\n        /** @private */\n        this.isMuted = false;\n        /** @private */\n        this.buffer = null;\n        /** @private */\n        this.onPlayEnd = null;\n        /** @private */\n        this.mediaListeners = {};\n    }\n\n    /**\n     * Initialise the backend, called in `wavesurfer.createBackend()`\n     */\n    init() {\n        this.setPlaybackRate(this.params.audioRate);\n        this.createTimer();\n    }\n\n    /**\n     * Attach event listeners to media element.\n     */\n    _setupMediaListeners() {\n        this.mediaListeners.error = () => {\n            this.fireEvent('error', 'Error loading media element');\n        };\n        this.mediaListeners.canplay = () => {\n            this.fireEvent('canplay');\n        };\n        this.mediaListeners.ended = () => {\n            this.fireEvent('finish');\n        };\n        // listen to and relay play, pause and seeked events to enable\n        // playback control from the external media element\n        this.mediaListeners.play = () => {\n            this.fireEvent('play');\n        };\n        this.mediaListeners.pause = () => {\n            this.fireEvent('pause');\n        };\n        this.mediaListeners.seeked = event => {\n            this.fireEvent('seek');\n        };\n        this.mediaListeners.volumechange = event => {\n            this.isMuted = this.media.muted;\n            if (this.isMuted) {\n                this.volume = 0;\n            } else {\n                this.volume = this.media.volume;\n            }\n            this.fireEvent('volume');\n        };\n\n        // reset event listeners\n        Object.keys(this.mediaListeners).forEach(id => {\n            this.media.removeEventListener(id, this.mediaListeners[id]);\n            this.media.addEventListener(id, this.mediaListeners[id]);\n        });\n    }\n\n    /**\n     * Create a timer to provide a more precise `audioprocess` event.\n     */\n    createTimer() {\n        const onAudioProcess = () => {\n            if (this.isPaused()) {\n                return;\n            }\n            this.fireEvent('audioprocess', this.getCurrentTime());\n\n            // Call again in the next frame\n            util.frame(onAudioProcess)();\n        };\n\n        this.on('play', onAudioProcess);\n\n        // Update the progress one more time to prevent it from being stuck in\n        // case of lower framerates\n        this.on('pause', () => {\n            this.fireEvent('audioprocess', this.getCurrentTime());\n        });\n    }\n\n    /**\n     * Create media element with url as its source,\n     * and append to container element.\n     *\n     * @param {string} url Path to media file\n     * @param {HTMLElement} container HTML element\n     * @param {number[]|Number.<Array[]>} peaks Array of peak data\n     * @param {string} preload HTML 5 preload attribute value\n     * @throws Will throw an error if the `url` argument is not a valid media\n     * element.\n     */\n    load(url, container, peaks, preload) {\n        const media = document.createElement(this.mediaType);\n        media.controls = this.params.mediaControls;\n        media.autoplay = this.params.autoplay || false;\n        media.preload = preload == null ? 'auto' : preload;\n        media.src = url;\n        media.style.width = '100%';\n\n        const prevMedia = container.querySelector(this.mediaType);\n        if (prevMedia) {\n            container.removeChild(prevMedia);\n        }\n        container.appendChild(media);\n\n        this._load(media, peaks, preload);\n    }\n\n    /**\n     * Load existing media element.\n     *\n     * @param {HTMLMediaElement} elt HTML5 Audio or Video element\n     * @param {number[]|Number.<Array[]>} peaks Array of peak data\n     */\n    loadElt(elt, peaks) {\n        elt.controls = this.params.mediaControls;\n        elt.autoplay = this.params.autoplay || false;\n\n        this._load(elt, peaks, elt.preload);\n    }\n\n    /**\n     * Method called by both `load` (from url)\n     * and `loadElt` (existing media element) methods.\n     *\n     * @param {HTMLMediaElement} media HTML5 Audio or Video element\n     * @param {number[]|Number.<Array[]>} peaks Array of peak data\n     * @param {string} preload HTML 5 preload attribute value\n     * @throws Will throw an error if the `media` argument is not a valid media\n     * element.\n     * @private\n     */\n    _load(media, peaks, preload) {\n        // verify media element is valid\n        if (\n            !(media instanceof HTMLMediaElement) ||\n            typeof media.addEventListener === 'undefined'\n        ) {\n            throw new Error('media parameter is not a valid media element');\n        }\n\n        // load must be called manually on iOS, otherwise peaks won't draw\n        // until a user interaction triggers load --> 'ready' event\n        //\n        // note that we avoid calling media.load here when given peaks and preload == 'none'\n        // as this almost always triggers some browser fetch of the media.\n        if (typeof media.load == 'function' && !(peaks && preload == 'none')) {\n            // Resets the media element and restarts the media resource. Any\n            // pending events are discarded. How much media data is fetched is\n            // still affected by the preload attribute.\n            media.load();\n        }\n\n        this.media = media;\n        this._setupMediaListeners();\n        this.peaks = peaks;\n        this.onPlayEnd = null;\n        this.buffer = null;\n        this.isMuted = media.muted;\n        this.setPlaybackRate(this.playbackRate);\n        this.setVolume(this.volume);\n    }\n\n    /**\n     * Used by `wavesurfer.isPlaying()` and `wavesurfer.playPause()`\n     *\n     * @return {boolean} Media paused or not\n     */\n    isPaused() {\n        return !this.media || this.media.paused;\n    }\n\n    /**\n     * Used by `wavesurfer.getDuration()`\n     *\n     * @return {number} Duration\n     */\n    getDuration() {\n        if (this.explicitDuration) {\n            return this.explicitDuration;\n        }\n        let duration = (this.buffer || this.media).duration;\n        if (duration >= Infinity) {\n            // streaming audio\n            duration = this.media.seekable.end(0);\n        }\n        return duration;\n    }\n\n    /**\n     * Returns the current time in seconds relative to the audio-clip's\n     * duration.\n     *\n     * @return {number} Current time\n     */\n    getCurrentTime() {\n        return this.media && this.media.currentTime;\n    }\n\n    /**\n     * Get the position from 0 to 1\n     *\n     * @return {number} Current position\n     */\n    getPlayedPercents() {\n        return this.getCurrentTime() / this.getDuration() || 0;\n    }\n\n    /**\n     * Get the audio source playback rate.\n     *\n     * @return {number} Playback rate\n     */\n    getPlaybackRate() {\n        return this.playbackRate || this.media.playbackRate;\n    }\n\n    /**\n     * Set the audio source playback rate.\n     *\n     * @param {number} value Playback rate\n     */\n    setPlaybackRate(value) {\n        this.playbackRate = value || 1;\n        this.media.playbackRate = this.playbackRate;\n    }\n\n    /**\n     * Used by `wavesurfer.seekTo()`\n     *\n     * @param {number} start Position to start at in seconds\n     */\n    seekTo(start) {\n        if (start != null) {\n            this.media.currentTime = start;\n        }\n        this.clearPlayEnd();\n    }\n\n    /**\n     * Plays the loaded audio region.\n     *\n     * @param {number} start Start offset in seconds, relative to the beginning\n     * of a clip.\n     * @param {number} end When to stop, relative to the beginning of a clip.\n     * @emits MediaElement#play\n     * @return {Promise} Result\n     */\n    play(start, end) {\n        this.seekTo(start);\n        const promise = this.media.play();\n        end && this.setPlayEnd(end);\n\n        return promise;\n    }\n\n    /**\n     * Pauses the loaded audio.\n     *\n     * @emits MediaElement#pause\n     * @return {Promise} Result\n     */\n    pause() {\n        let promise;\n\n        if (this.media) {\n            promise = this.media.pause();\n        }\n        this.clearPlayEnd();\n\n        return promise;\n    }\n\n    /**\n     * Set the play end\n     *\n     * @param {number} end Where to end\n     */\n    setPlayEnd(end) {\n        this.clearPlayEnd();\n\n        this._onPlayEnd = time => {\n            if (time >= end) {\n                this.pause();\n                this.seekTo(end);\n            }\n        };\n        this.on('audioprocess', this._onPlayEnd);\n    }\n\n    /** @private */\n    clearPlayEnd() {\n        if (this._onPlayEnd) {\n            this.un('audioprocess', this._onPlayEnd);\n            this._onPlayEnd = null;\n        }\n    }\n\n    /**\n     * Compute the max and min value of the waveform when broken into\n     * <length> subranges.\n     *\n     * @param {number} length How many subranges to break the waveform into.\n     * @param {number} first First sample in the required range.\n     * @param {number} last Last sample in the required range.\n     * @return {number[]|Number.<Array[]>} Array of 2*<length> peaks or array of\n     * arrays of peaks consisting of (max, min) values for each subrange.\n     */\n    getPeaks(length, first, last) {\n        if (this.buffer) {\n            return super.getPeaks(length, first, last);\n        }\n        return this.peaks || [];\n    }\n\n    /**\n     * Set the sink id for the media player\n     *\n     * @param {string} deviceId String value representing audio device id.\n     * @returns {Promise} A Promise that resolves to `undefined` when there\n     * are no errors.\n     */\n    setSinkId(deviceId) {\n        if (deviceId) {\n            if (!this.media.setSinkId) {\n                return Promise.reject(\n                    new Error('setSinkId is not supported in your browser')\n                );\n            }\n            return this.media.setSinkId(deviceId);\n        }\n\n        return Promise.reject(new Error('Invalid deviceId: ' + deviceId));\n    }\n\n    /**\n     * Get the current volume\n     *\n     * @return {number} value A floating point value between 0 and 1.\n     */\n    getVolume() {\n        return this.volume;\n    }\n\n    /**\n     * Set the audio volume\n     *\n     * @param {number} value A floating point value between 0 and 1.\n     */\n    setVolume(value) {\n        this.volume = value;\n        // no need to change when it's already at that volume\n        if (this.media.volume !== this.volume) {\n            this.media.volume = this.volume;\n        }\n    }\n\n    /**\n     * Enable or disable muted audio\n     *\n     * @since 4.0.0\n     * @param {boolean} muted Specify `true` to mute audio.\n     */\n    setMute(muted) {\n        // This causes a volume change to be emitted too through the\n        // volumechange event listener.\n        this.isMuted = this.media.muted = muted;\n    }\n\n    /**\n     * This is called when wavesurfer is destroyed\n     *\n     */\n    destroy() {\n        this.pause();\n        this.unAll();\n        this.destroyed = true;\n\n        // cleanup media event listeners\n        Object.keys(this.mediaListeners).forEach(id => {\n            if (this.media) {\n                this.media.removeEventListener(id, this.mediaListeners[id]);\n            }\n        });\n\n        if (\n            this.params.removeMediaElementOnDestroy &&\n            this.media &&\n            this.media.parentNode\n        ) {\n            this.media.parentNode.removeChild(this.media);\n        }\n\n        this.media = null;\n    }\n}\n","/**\n * Caches the decoded peaks data to improve rendering speed for large audio\n *\n * Is used if the option parameter `partialRender` is set to `true`\n */\nexport default class PeakCache {\n    /**\n     * Instantiate cache\n     */\n    constructor() {\n        this.clearPeakCache();\n    }\n\n    /**\n     * Empty the cache\n     */\n    clearPeakCache() {\n        /**\n         * Flat array with entries that are always in pairs to mark the\n         * beginning and end of each subrange.  This is a convenience so we can\n         * iterate over the pairs for easy set difference operations.\n         * @private\n         */\n        this.peakCacheRanges = [];\n        /**\n         * Length of the entire cachable region, used for resetting the cache\n         * when this changes (zoom events, for instance).\n         * @private\n         */\n        this.peakCacheLength = -1;\n    }\n\n    /**\n     * Add a range of peaks to the cache\n     *\n     * @param {number} length The length of the range\n     * @param {number} start The x offset of the start of the range\n     * @param {number} end The x offset of the end of the range\n     * @return {Number.<Array[]>} Array with arrays of numbers\n     */\n    addRangeToPeakCache(length, start, end) {\n        if (length != this.peakCacheLength) {\n            this.clearPeakCache();\n            this.peakCacheLength = length;\n        }\n\n        // Return ranges that weren't in the cache before the call.\n        let uncachedRanges = [];\n        let i = 0;\n        // Skip ranges before the current start.\n        while (\n            i < this.peakCacheRanges.length &&\n            this.peakCacheRanges[i] < start\n        ) {\n            i++;\n        }\n        // If |i| is even, |start| falls after an existing range.  Otherwise,\n        // |start| falls between an existing range, and the uncached region\n        // starts when we encounter the next node in |peakCacheRanges| or\n        // |end|, whichever comes first.\n        if (i % 2 == 0) {\n            uncachedRanges.push(start);\n        }\n        while (\n            i < this.peakCacheRanges.length &&\n            this.peakCacheRanges[i] <= end\n        ) {\n            uncachedRanges.push(this.peakCacheRanges[i]);\n            i++;\n        }\n        // If |i| is even, |end| is after all existing ranges.\n        if (i % 2 == 0) {\n            uncachedRanges.push(end);\n        }\n\n        // Filter out the 0-length ranges.\n        uncachedRanges = uncachedRanges.filter((item, pos, arr) => {\n            if (pos == 0) {\n                return item != arr[pos + 1];\n            } else if (pos == arr.length - 1) {\n                return item != arr[pos - 1];\n            }\n            return item != arr[pos - 1] && item != arr[pos + 1];\n        });\n\n        // Merge the two ranges together, uncachedRanges will either contain\n        // wholly new points, or duplicates of points in peakCacheRanges.  If\n        // duplicates are detected, remove both and extend the range.\n        this.peakCacheRanges = this.peakCacheRanges.concat(uncachedRanges);\n        this.peakCacheRanges = this.peakCacheRanges\n            .sort((a, b) => a - b)\n            .filter((item, pos, arr) => {\n                if (pos == 0) {\n                    return item != arr[pos + 1];\n                } else if (pos == arr.length - 1) {\n                    return item != arr[pos - 1];\n                }\n                return item != arr[pos - 1] && item != arr[pos + 1];\n            });\n\n        // Push the uncached ranges into an array of arrays for ease of\n        // iteration in the functions that call this.\n        const uncachedRangePairs = [];\n        for (i = 0; i < uncachedRanges.length; i += 2) {\n            uncachedRangePairs.push([uncachedRanges[i], uncachedRanges[i + 1]]);\n        }\n\n        return uncachedRangePairs;\n    }\n\n    /**\n     * For testing\n     *\n     * @return {Number.<Array[]>} Array with arrays of numbers\n     */\n    getCacheRanges() {\n        const peakCacheRangePairs = [];\n        let i;\n        for (i = 0; i < this.peakCacheRanges.length; i += 2) {\n            peakCacheRangePairs.push([\n                this.peakCacheRanges[i],\n                this.peakCacheRanges[i + 1]\n            ]);\n        }\n        return peakCacheRangePairs;\n    }\n}\n","import utilMax from './max';\r\nimport utilmin from './min';\r\n\r\n/**\r\n * Get the largest absolute value in an array\r\n *\r\n * @param   {Array} values Array of numbers\r\n * @returns {Number} Largest number found\r\n * @example console.log(max([-3, 2, 1]), max([-3, 2, 4])); // logs 3 4\r\n * @since 4.3.0\r\n */\r\nexport default function absMax(values) {\r\n    const max = utilMax(values);\r\n    const min = utilmin(values);\r\n    return -min > max ? -min : max;\r\n}\r\n","/**\n * Returns a number limited to the given range.\n *\n * @param {number} val The number to be limited to a range\n * @param {number} min The lower boundary of the limit range\n * @param {number} max The upper boundary of the limit range\n * @returns {number} A number in the range [min, max]\n */\nexport default function clamp(val, min, max) {\n    return Math.min(Math.max(min, val), max);\n}\n","/**\n * @since 3.0.0\n */\n\nimport Observer from './observer';\n\nclass ProgressHandler {\n    /**\n     * Instantiate ProgressHandler\n     *\n     * @param {Observer} instance The `fetchFile` observer instance.\n     * @param {Number} contentLength Content length.\n     * @param {Response} response Response object.\n     */\n    constructor(instance, contentLength, response) {\n        this.instance = instance;\n        this.instance._reader = response.body.getReader();\n\n        this.total = parseInt(contentLength, 10);\n        this.loaded = 0;\n    }\n\n    /**\n     * A method that is called once, immediately after the `ReadableStream``\n     * is constructed.\n     *\n     * @param {ReadableStreamDefaultController} controller Controller instance\n     *     used to control the stream.\n     */\n    start(controller) {\n        const read = () => {\n            // instance._reader.read() returns a promise that resolves\n            // when a value has been received\n            this.instance._reader\n                .read()\n                .then(({ done, value }) => {\n                    // result objects contain two properties:\n                    // done  - true if the stream has already given you all its data.\n                    // value - some data. Always undefined when done is true.\n                    if (done) {\n                        // ensure onProgress called when content-length=0\n                        if (this.total === 0) {\n                            this.instance.onProgress.call(this.instance, {\n                                loaded: this.loaded,\n                                total: this.total,\n                                lengthComputable: false\n                            });\n                        }\n                        // no more data needs to be consumed, close the stream\n                        controller.close();\n                        return;\n                    }\n\n                    this.loaded += value.byteLength;\n                    this.instance.onProgress.call(this.instance, {\n                        loaded: this.loaded,\n                        total: this.total,\n                        lengthComputable: !(this.total === 0)\n                    });\n                    // enqueue the next data chunk into our target stream\n                    controller.enqueue(value);\n                    read();\n                })\n                .catch(error => {\n                    controller.error(error);\n                });\n        };\n\n        read();\n    }\n}\n\n/**\n * Load a file using `fetch`.\n *\n * @param {object} options Request options to use. See example below.\n * @returns {Observer} Observer instance\n * @example\n * // default options\n * let options = {\n *     url: undefined,\n *     method: 'GET',\n *     mode: 'cors',\n *     credentials: 'same-origin',\n *     cache: 'default',\n *     responseType: 'json',\n *     requestHeaders: [],\n *     redirect: 'follow',\n *     referrer: 'client'\n * };\n *\n * // override some options\n * options.url = '../media/demo.wav';\n\n * // available types: 'arraybuffer', 'blob', 'json' or 'text'\n * options.responseType = 'arraybuffer';\n *\n * // make fetch call\n * let request = util.fetchFile(options);\n *\n * // listen for events\n * request.on('progress', e => {\n *     console.log('progress', e);\n * });\n *\n * request.on('success', data => {\n *     console.log('success!', data);\n * });\n *\n * request.on('error', e => {\n *     console.warn('fetchFile error: ', e);\n * });\n */\nexport default function fetchFile(options) {\n    if (!options) {\n        throw new Error('fetch options missing');\n    } else if (!options.url) {\n        throw new Error('fetch url missing');\n    }\n    const instance = new Observer();\n    const fetchHeaders = new Headers();\n    const fetchRequest = new Request(options.url);\n\n    // add ability to abort\n    instance.controller = new AbortController();\n\n    // check if headers have to be added\n    if (options && options.requestHeaders) {\n        // add custom request headers\n        options.requestHeaders.forEach(header => {\n            fetchHeaders.append(header.key, header.value);\n        });\n    }\n\n    // parse fetch options\n    const responseType = options.responseType || 'json';\n    const fetchOptions = {\n        method: options.method || 'GET',\n        headers: fetchHeaders,\n        mode: options.mode || 'cors',\n        credentials: options.credentials || 'same-origin',\n        cache: options.cache || 'default',\n        redirect: options.redirect || 'follow',\n        referrer: options.referrer || 'client',\n        signal: instance.controller.signal\n    };\n\n    fetch(fetchRequest, fetchOptions)\n        .then(response => {\n            // store response reference\n            instance.response = response;\n\n            let progressAvailable = true;\n            if (!response.body) {\n                // ReadableStream is not yet supported in this browser\n                // see https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream\n                progressAvailable = false;\n            }\n\n            // Server must send CORS header \"Access-Control-Expose-Headers: content-length\"\n            const contentLength = response.headers.get('content-length');\n            if (contentLength === null) {\n                // Content-Length server response header missing.\n                // Don't evaluate download progress if we can't compare against a total size\n                // see https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS#Access-Control-Expose-Headers\n                progressAvailable = false;\n            }\n\n            if (!progressAvailable) {\n                // not able to check download progress so skip it\n                return response;\n            }\n\n            // fire progress event when during load\n            instance.onProgress = e => {\n                instance.fireEvent('progress', e);\n            };\n\n            return new Response(\n                new ReadableStream(\n                    new ProgressHandler(instance, contentLength, response)\n                ),\n                fetchOptions\n            );\n        })\n        .then(response => {\n            let errMsg;\n            if (response.ok) {\n                switch (responseType) {\n                    case 'arraybuffer':\n                        return response.arrayBuffer();\n\n                    case 'json':\n                        return response.json();\n\n                    case 'blob':\n                        return response.blob();\n\n                    case 'text':\n                        return response.text();\n\n                    default:\n                        errMsg = 'Unknown responseType: ' + responseType;\n                        break;\n                }\n            }\n            if (!errMsg) {\n                errMsg = 'HTTP error status: ' + response.status;\n            }\n            throw new Error(errMsg);\n        })\n        .then(response => {\n            instance.fireEvent('success', response);\n        })\n        .catch(error => {\n            instance.fireEvent('error', error);\n        });\n\n    // return the fetch request\n    instance.fetchRequest = fetchRequest;\n    return instance;\n}\n","import reqAnimationFrame from './request-animation-frame';\n\n/**\n * Create a function which will be called at the next requestAnimationFrame\n * cycle\n *\n * @param {function} func The function to call\n *\n * @return {func} The function wrapped within a requestAnimationFrame\n */\nexport default function frame(func) {\n    return (...args) => reqAnimationFrame(() => func(...args));\n}\n","/**\n * Get a random prefixed ID\n *\n * @param {String} prefix Prefix to use. Default is `'wavesurfer_'`.\n * @returns {String} Random prefixed ID\n * @example\n * console.log(getId()); // logs 'wavesurfer_b5pors4ru6g'\n *\n * let prefix = 'foo-';\n * console.log(getId(prefix)); // logs 'foo-b5pors4ru6g'\n */\nexport default function getId(prefix) {\n    if (prefix === undefined) {\n        prefix = 'wavesurfer_';\n    }\n    return (\n        prefix +\n        Math.random()\n            .toString(32)\n            .substring(2)\n    );\n}\n","export { default as getId } from './get-id';\nexport { default as max } from './max';\nexport { default as min } from './min';\nexport { default as absMax } from './absMax';\nexport { default as Observer } from './observer';\nexport { default as style } from './style';\nexport { default as requestAnimationFrame } from './request-animation-frame';\nexport { default as frame } from './frame';\nexport { default as debounce } from 'debounce';\nexport { default as preventClick } from './prevent-click';\nexport { default as fetchFile } from './fetch';\nexport { default as clamp } from './clamp';\n","/**\n * Get the largest value\n *\n * @param   {Array} values Array of numbers\n * @returns {Number} Largest number found\n * @example console.log(max([1, 2, 3])); // logs 3\n */\nexport default function max(values) {\n    let largest = -Infinity;\n    Object.keys(values).forEach(i => {\n        if (values[i] > largest) {\n            largest = values[i];\n        }\n    });\n    return largest;\n}\n","/**\n * Get the smallest value\n *\n * @param   {Array} values Array of numbers\n * @returns {Number} Smallest number found\n * @example console.log(min([1, 2, 3])); // logs 1\n */\nexport default function min(values) {\n    let smallest = Number(Infinity);\n    Object.keys(values).forEach(i => {\n        if (values[i] < smallest) {\n            smallest = values[i];\n        }\n    });\n    return smallest;\n}\n","/**\n * @typedef {Object} ListenerDescriptor\n * @property {string} name The name of the event\n * @property {function} callback The callback\n * @property {function} un The function to call to remove the listener\n */\n\n/**\n * Observer class\n */\nexport default class Observer {\n    /**\n     * Instantiate Observer\n     */\n    constructor() {\n        /**\n         * @private\n         * @todo Initialise the handlers here already and remove the conditional\n         * assignment in `on()`\n         */\n        this._disabledEventEmissions = [];\n        this.handlers = null;\n    }\n    /**\n     * Attach a handler function for an event.\n     *\n     * @param {string} event Name of the event to listen to\n     * @param {function} fn The callback to trigger when the event is fired\n     * @return {ListenerDescriptor} The event descriptor\n     */\n    on(event, fn) {\n        if (!this.handlers) {\n            this.handlers = {};\n        }\n\n        let handlers = this.handlers[event];\n        if (!handlers) {\n            handlers = this.handlers[event] = [];\n        }\n        handlers.push(fn);\n\n        // Return an event descriptor\n        return {\n            name: event,\n            callback: fn,\n            un: (e, fn) => this.un(e, fn)\n        };\n    }\n\n    /**\n     * Remove an event handler.\n     *\n     * @param {string} event Name of the event the listener that should be\n     * removed listens to\n     * @param {function} fn The callback that should be removed\n     */\n    un(event, fn) {\n        if (!this.handlers) {\n            return;\n        }\n\n        const handlers = this.handlers[event];\n        let i;\n        if (handlers) {\n            if (fn) {\n                for (i = handlers.length - 1; i >= 0; i--) {\n                    if (handlers[i] == fn) {\n                        handlers.splice(i, 1);\n                    }\n                }\n            } else {\n                handlers.length = 0;\n            }\n        }\n    }\n\n    /**\n     * Remove all event handlers.\n     */\n    unAll() {\n        this.handlers = null;\n    }\n\n    /**\n     * Attach a handler to an event. The handler is executed at most once per\n     * event type.\n     *\n     * @param {string} event The event to listen to\n     * @param {function} handler The callback that is only to be called once\n     * @return {ListenerDescriptor} The event descriptor\n     */\n    once(event, handler) {\n        const fn = (...args) => {\n            /*  eslint-disable no-invalid-this */\n            handler.apply(this, args);\n            /*  eslint-enable no-invalid-this */\n            setTimeout(() => {\n                this.un(event, fn);\n            }, 0);\n        };\n        return this.on(event, fn);\n    }\n\n    /**\n     * Disable firing a list of events by name. When specified, event handlers for any event type\n     * passed in here will not be called.\n     *\n     * @since 4.0.0\n     * @param {string[]} eventNames an array of event names to disable emissions for\n     * @example\n     * // disable seek and interaction events\n     * wavesurfer.setDisabledEventEmissions(['seek', 'interaction']);\n     */\n    setDisabledEventEmissions(eventNames) {\n        this._disabledEventEmissions = eventNames;\n    }\n\n    /**\n     * plugins borrow part of this class without calling the constructor,\n     * so we have to be careful about _disabledEventEmissions\n     */\n\n    _isDisabledEventEmission(event) {\n        return this._disabledEventEmissions && this._disabledEventEmissions.includes(event);\n    }\n\n    /**\n     * Manually fire an event\n     *\n     * @param {string} event The event to fire manually\n     * @param {...any} args The arguments with which to call the listeners\n     */\n    fireEvent(event, ...args) {\n        if (!this.handlers || this._isDisabledEventEmission(event)) {\n            return;\n        }\n\n        const handlers = this.handlers[event];\n        handlers &&\n            handlers.forEach(fn => {\n                fn(...args);\n            });\n    }\n}\n","/**\n * Stops propagation of click event and removes event listener\n *\n * @private\n * @param {object} event The click event\n */\nfunction preventClickHandler(event) {\n    event.stopPropagation();\n    document.body.removeEventListener('click', preventClickHandler, true);\n}\n\n/**\n * Starts listening for click event and prevent propagation\n *\n * @param {object} values Values\n */\nexport default function preventClick(values) {\n    document.body.addEventListener('click', preventClickHandler, true);\n}\n","/* eslint-disable valid-jsdoc */\n/**\n * Returns the `requestAnimationFrame` function for the browser, or a shim with\n * `setTimeout` if the function is not found\n *\n * @return {function} Available `requestAnimationFrame` function for the browser\n */\nexport default (\n    window.requestAnimationFrame ||\n    window.webkitRequestAnimationFrame ||\n    window.mozRequestAnimationFrame ||\n    window.oRequestAnimationFrame ||\n    window.msRequestAnimationFrame ||\n    ((callback, element) => setTimeout(callback, 1000 / 60))\n).bind(window);\n","/**\n * Apply a map of styles to an element\n *\n * @param {HTMLElement} el The element that the styles will be applied to\n * @param {Object} styles The map of propName: attribute, both are used as-is\n *\n * @return {HTMLElement} el\n */\nexport default function style(el, styles) {\n    Object.keys(styles).forEach(prop => {\n        if (el.style[prop] !== styles[prop]) {\n            el.style[prop] = styles[prop];\n        }\n    });\n    return el;\n}\n","import * as util from './util';\nimport MultiCanvas from './drawer.multicanvas';\nimport WebAudio from './webaudio';\nimport MediaElement from './mediaelement';\nimport PeakCache from './peakcache';\nimport MediaElementWebAudio from './mediaelement-webaudio';\n\n/*\n * This work is licensed under a BSD-3-Clause License.\n */\n\n/** @external {HTMLElement} https://developer.mozilla.org/en/docs/Web/API/HTMLElement */\n/** @external {OfflineAudioContext} https://developer.mozilla.org/en-US/docs/Web/API/OfflineAudioContext */\n/** @external {File} https://developer.mozilla.org/en-US/docs/Web/API/File */\n/** @external {Blob} https://developer.mozilla.org/en-US/docs/Web/API/Blob */\n/** @external {CanvasRenderingContext2D} https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D */\n/** @external {MediaStreamConstraints} https://developer.mozilla.org/en-US/docs/Web/API/MediaStreamConstraints */\n/** @external {AudioNode} https://developer.mozilla.org/de/docs/Web/API/AudioNode */\n\n/**\n * @typedef {Object} WavesurferParams\n * @property {AudioContext} audioContext=null Use your own previously\n * initialized AudioContext or leave blank.\n * @property {number} audioRate=1 Speed at which to play audio. Lower number is\n * slower.\n * @property {ScriptProcessorNode} audioScriptProcessor=null Use your own previously\n * initialized ScriptProcessorNode or leave blank.\n * @property {boolean} autoCenter=true If a scrollbar is present, center the\n * waveform on current progress\n * @property {number} autoCenterRate=5 If autoCenter is active, rate at which the\n * waveform is centered\n * @property {boolean} autoCenterImmediately=false If autoCenter is active, immediately\n * center waveform on current progress\n * @property {string} backend='WebAudio' `'WebAudio'|'MediaElement'|'MediaElementWebAudio'` In most cases\n * you don't have to set this manually. MediaElement is a fallback for unsupported browsers.\n * MediaElementWebAudio allows to use WebAudio API also with big audio files, loading audio like with\n * MediaElement backend (HTML5 audio tag). You have to use the same methods of MediaElement backend for loading and\n * playback, giving also peaks, so the audio data are not decoded. In this way you can use WebAudio features, like filters,\n * also with audio with big duration. For example:\n * ` wavesurfer.load(url | HTMLMediaElement, peaks, preload, duration);\n *   wavesurfer.play();\n *   wavesurfer.setFilter(customFilter);\n * `\n * @property {string} backgroundColor=null Change background color of the\n * waveform container.\n * @property {number} barHeight=1 The height of the wave bars.\n * @property {number} barRadius=0 The radius of the wave bars. Makes bars rounded\n * @property {number} barGap=null The optional spacing between bars of the wave,\n * if not provided will be calculated in legacy format.\n * @property {number} barWidth=null Draw the waveform using bars.\n * @property {number} barMinHeight=null If specified, draw at least a bar of this height,\n * eliminating waveform gaps\n * @property {boolean} closeAudioContext=false Close and nullify all audio\n * contexts when the destroy method is called.\n * @property {!string|HTMLElement} container CSS selector or HTML element where\n * the waveform should be drawn. This is the only required parameter.\n * @property {string} cursorColor='#333' The fill color of the cursor indicating\n * the playhead position.\n * @property {number} cursorWidth=1 Measured in pixels.\n * @property {object} drawingContextAttributes={desynchronized: false} Drawing context\n * attributes.\n * @property {number} duration=null Optional audio length so pre-rendered peaks\n * can be display immediately for example.\n * @property {boolean} fillParent=true Whether to fill the entire container or\n * draw only according to `minPxPerSec`.\n * @property {boolean} forceDecode=false Force decoding of audio using web audio\n * when zooming to get a more detailed waveform.\n * @property {number} height=128 The height of the waveform. Measured in\n * pixels.\n * @property {boolean} hideScrollbar=false Whether to hide the horizontal\n * scrollbar when one would normally be shown.\n * @property {boolean} interact=true Whether the mouse interaction will be\n * enabled at initialization. You can switch this parameter at any time later\n * on.\n * @property {boolean} loopSelection=true (Use with regions plugin) Enable\n * looping of selected regions\n * @property {number} maxCanvasWidth=4000 Maximum width of a single canvas in\n * pixels, excluding a small overlap (2 * `pixelRatio`, rounded up to the next\n * even integer). If the waveform is longer than this value, additional canvases\n * will be used to render the waveform, which is useful for very large waveforms\n * that may be too wide for browsers to draw on a single canvas.\n * @property {boolean} mediaControls=false (Use with backend `MediaElement` or `MediaElementWebAudio`)\n * this enables the native controls for the media element\n * @property {string} mediaType='audio' (Use with backend `MediaElement` or `MediaElementWebAudio`)\n * `'audio'|'video'` ('video' only for `MediaElement`)\n * @property {number} minPxPerSec=20 Minimum number of pixels per second of\n * audio.\n * @property {boolean} normalize=false If true, normalize by the maximum peak\n * instead of 1.0.\n * @property {boolean} partialRender=false Use the PeakCache to improve\n * rendering speed of large waveforms\n * @property {number} pixelRatio=window.devicePixelRatio The pixel ratio used to\n * calculate display\n * @property {PluginDefinition[]} plugins=[] An array of plugin definitions to\n * register during instantiation, they will be directly initialised unless they\n * are added with the `deferInit` property set to true.\n * @property {string} progressColor='#555' The fill color of the part of the\n * waveform behind the cursor. When `progressColor` and `waveColor` are the same\n * the progress wave is not rendered at all.\n * @property {boolean} removeMediaElementOnDestroy=true Set to false to keep the\n * media element in the DOM when the player is destroyed. This is useful when\n * reusing an existing media element via the `loadMediaElement` method.\n * @property {Object} renderer=MultiCanvas Can be used to inject a custom\n * renderer.\n * @property {boolean|number} responsive=false If set to `true` resize the\n * waveform, when the window is resized. This is debounced with a `100ms`\n * timeout by default. If this parameter is a number it represents that timeout.\n * @property {boolean} rtl=false If set to `true`, renders waveform from\n * right-to-left.\n * @property {boolean} scrollParent=false Whether to scroll the container with a\n * lengthy waveform. Otherwise the waveform is shrunk to the container width\n * (see fillParent).\n * @property {number} skipLength=2 Number of seconds to skip with the\n * skipForward() and skipBackward() methods.\n * @property {boolean} splitChannels=false Render with separate waveforms for\n * the channels of the audio\n * @property {SplitChannelOptions} splitChannelsOptions={} Options for splitChannel rendering\n * @property {string} waveColor='#999' The fill color of the waveform after the\n * cursor.\n * @property {object} xhr={} XHR options. For example:\n * `let xhr = {\n *     cache: 'default',\n *     mode: 'cors',\n *     method: 'GET',\n *     credentials: 'same-origin',\n *     redirect: 'follow',\n *     referrer: 'client',\n *     requestHeaders: [\n *         {\n *             key: 'Authorization',\n *             value: 'my-token'\n *         }\n *     ]\n * };`\n */\n\n/**\n * @typedef {Object} PluginDefinition\n * @desc The Object used to describe a plugin\n * @example wavesurfer.addPlugin(pluginDefinition);\n * @property {string} name The name of the plugin, the plugin instance will be\n * added as a property to the wavesurfer instance under this name\n * @property {?Object} staticProps The properties that should be added to the\n * wavesurfer instance as static properties\n * @property {?boolean} deferInit Don't initialise plugin\n * automatically\n * @property {Object} params={} The plugin parameters, they are the first parameter\n * passed to the plugin class constructor function\n * @property {PluginClass} instance The plugin instance factory, is called with\n * the dependency specified in extends. Returns the plugin class.\n */\n\n/**\n * @typedef {Object} SplitChannelOptions\n * @desc parameters applied when splitChannels option is true\n * @property {boolean} overlay=false determines whether channels are rendered on top of each other or on separate tracks\n * @property {object} channelColors={} object describing color for each channel. Example:\n * {\n *     0: {\n *         progressColor: 'green',\n *         waveColor: 'pink'\n *     },\n *     1: {\n *         progressColor: 'orange',\n *         waveColor: 'purple'\n *     }\n * }\n * @property {number[]} filterChannels=[] indexes of channels to be hidden from rendering\n * @property {boolean} relativeNormalization=false determines whether\n * normalization is done per channel or maintains proportionality between\n * channels. Only applied when normalize and splitChannels are both true.\n * @since 4.3.0\n */\n\n/**\n * @interface PluginClass\n *\n * @desc This is the interface which is implemented by all plugin classes. Note\n * that this only turns into an observer after being passed through\n * `wavesurfer.addPlugin`.\n *\n * @extends {Observer}\n */\nclass PluginClass {\n    /**\n     * Plugin definition factory\n     *\n     * This function must be used to create a plugin definition which can be\n     * used by wavesurfer to correctly instantiate the plugin.\n     *\n     * It returns a `PluginDefinition` object representing the plugin.\n     *\n     * @param {Object} params={} The plugin params (specific to the plugin)\n     */\n    create(params) {}\n    /**\n     * Construct the plugin\n     *\n     * @param {Object} params={} The plugin params (specific to the plugin)\n     * @param {Object} ws The wavesurfer instance\n     */\n    constructor(params, ws) {}\n    /**\n     * Initialise the plugin\n     *\n     * Start doing something. This is called by\n     * `wavesurfer.initPlugin(pluginName)`\n     */\n    init() {}\n    /**\n     * Destroy the plugin instance\n     *\n     * Stop doing something. This is called by\n     * `wavesurfer.destroyPlugin(pluginName)`\n     */\n    destroy() {}\n}\n\n/**\n * WaveSurfer core library class\n *\n * @extends {Observer}\n * @example\n * const params = {\n *   container: '#waveform',\n *   waveColor: 'violet',\n *   progressColor: 'purple'\n * };\n *\n * // initialise like this\n * const wavesurfer = WaveSurfer.create(params);\n *\n * // or like this ...\n * const wavesurfer = new WaveSurfer(params);\n * wavesurfer.init();\n *\n * // load audio file\n * wavesurfer.load('example/media/demo.wav');\n */\nexport default class WaveSurfer extends util.Observer {\n    /** @private */\n    defaultParams = {\n        audioContext: null,\n        audioScriptProcessor: null,\n        audioRate: 1,\n        autoCenter: true,\n        autoCenterRate: 5,\n        autoCenterImmediately: false,\n        backend: 'WebAudio',\n        backgroundColor: null,\n        barHeight: 1,\n        barRadius: 0,\n        barGap: null,\n        barMinHeight: null,\n        container: null,\n        cursorColor: '#333',\n        cursorWidth: 1,\n        dragSelection: true,\n        drawingContextAttributes: {\n            // Boolean that hints the user agent to reduce the latency\n            // by desynchronizing the canvas paint cycle from the event\n            // loop\n            desynchronized: false\n        },\n        duration: null,\n        fillParent: true,\n        forceDecode: false,\n        height: 128,\n        hideScrollbar: false,\n        interact: true,\n        loopSelection: true,\n        maxCanvasWidth: 4000,\n        mediaContainer: null,\n        mediaControls: false,\n        mediaType: 'audio',\n        minPxPerSec: 20,\n        normalize: false,\n        partialRender: false,\n        pixelRatio:\n            window.devicePixelRatio || screen.deviceXDPI / screen.logicalXDPI,\n        plugins: [],\n        progressColor: '#555',\n        removeMediaElementOnDestroy: true,\n        renderer: MultiCanvas,\n        responsive: false,\n        rtl: false,\n        scrollParent: false,\n        skipLength: 2,\n        splitChannels: false,\n        splitChannelsOptions: {\n            overlay: false,\n            channelColors: {},\n            filterChannels: [],\n            relativeNormalization: false\n        },\n        waveColor: '#999',\n        xhr: {}\n    };\n\n    /** @private */\n    backends = {\n        MediaElement,\n        WebAudio,\n        MediaElementWebAudio\n    };\n\n    /**\n     * Instantiate this class, call its `init` function and returns it\n     *\n     * @param {WavesurferParams} params The wavesurfer parameters\n     * @return {Object} WaveSurfer instance\n     * @example const wavesurfer = WaveSurfer.create(params);\n     */\n    static create(params) {\n        const wavesurfer = new WaveSurfer(params);\n        return wavesurfer.init();\n    }\n\n    /**\n     * The library version number is available as a static property of the\n     * WaveSurfer class\n     *\n     * @type {String}\n     * @example\n     * console.log('Using wavesurfer.js ' + WaveSurfer.VERSION);\n     */\n    static VERSION = __VERSION__;\n\n    /**\n     * Functions in the `util` property are available as a prototype property to\n     * all instances\n     *\n     * @type {Object}\n     * @example\n     * const wavesurfer = WaveSurfer.create(params);\n     * wavesurfer.util.style(myElement, { background: 'blue' });\n     */\n    util = util;\n\n    /**\n     * Functions in the `util` property are available as a static property of the\n     * WaveSurfer class\n     *\n     * @type {Object}\n     * @example\n     * WaveSurfer.util.style(myElement, { background: 'blue' });\n     */\n    static util = util;\n\n    /**\n     * Initialise wavesurfer instance\n     *\n     * @param {WavesurferParams} params Instantiation options for wavesurfer\n     * @example\n     * const wavesurfer = new WaveSurfer(params);\n     * @returns {this} Wavesurfer instance\n     */\n    constructor(params) {\n        super();\n        /**\n         * Extract relevant parameters (or defaults)\n         * @private\n         */\n        this.params = Object.assign({}, this.defaultParams, params);\n        this.params.splitChannelsOptions = Object.assign(\n            {},\n            this.defaultParams.splitChannelsOptions,\n            params.splitChannelsOptions\n        );\n        /** @private */\n        this.container =\n            'string' == typeof params.container\n                ? document.querySelector(this.params.container)\n                : this.params.container;\n\n        if (!this.container) {\n            throw new Error('Container element not found');\n        }\n\n        if (this.params.mediaContainer == null) {\n            /** @private */\n            this.mediaContainer = this.container;\n        } else if (typeof this.params.mediaContainer == 'string') {\n            /** @private */\n            this.mediaContainer = document.querySelector(\n                this.params.mediaContainer\n            );\n        } else {\n            /** @private */\n            this.mediaContainer = this.params.mediaContainer;\n        }\n\n        if (!this.mediaContainer) {\n            throw new Error('Media Container element not found');\n        }\n\n        if (this.params.maxCanvasWidth <= 1) {\n            throw new Error('maxCanvasWidth must be greater than 1');\n        } else if (this.params.maxCanvasWidth % 2 == 1) {\n            throw new Error('maxCanvasWidth must be an even number');\n        }\n\n        if (this.params.rtl === true) {\n            util.style(this.container, { transform: 'rotateY(180deg)' });\n        }\n\n        if (this.params.backgroundColor) {\n            this.setBackgroundColor(this.params.backgroundColor);\n        }\n\n        /**\n         * @private Used to save the current volume when muting so we can\n         * restore once unmuted\n         * @type {number}\n         */\n        this.savedVolume = 0;\n\n        /**\n         * @private The current muted state\n         * @type {boolean}\n         */\n        this.isMuted = false;\n\n        /**\n         * @private Will hold a list of event descriptors that need to be\n         * canceled on subsequent loads of audio\n         * @type {Object[]}\n         */\n        this.tmpEvents = [];\n\n        /**\n         * @private Holds any running audio downloads\n         * @type {Observer}\n         */\n        this.currentRequest = null;\n        /** @private */\n        this.arraybuffer = null;\n        /** @private */\n        this.drawer = null;\n        /** @private */\n        this.backend = null;\n        /** @private */\n        this.peakCache = null;\n\n        // cache constructor objects\n        if (typeof this.params.renderer !== 'function') {\n            throw new Error('Renderer parameter is invalid');\n        }\n        /**\n         * @private The uninitialised Drawer class\n         */\n        this.Drawer = this.params.renderer;\n        /**\n         * @private The uninitialised Backend class\n         */\n        // Back compat\n        if (this.params.backend == 'AudioElement') {\n            this.params.backend = 'MediaElement';\n        }\n\n        if (\n            (this.params.backend == 'WebAudio' ||\n                this.params.backend === 'MediaElementWebAudio') &&\n            !WebAudio.prototype.supportsWebAudio.call(null)\n        ) {\n            this.params.backend = 'MediaElement';\n        }\n        this.Backend = this.backends[this.params.backend];\n\n        /**\n         * @private map of plugin names that are currently initialised\n         */\n        this.initialisedPluginList = {};\n        /** @private */\n        this.isDestroyed = false;\n\n        /**\n         * Get the current ready status.\n         *\n         * @example const isReady = wavesurfer.isReady;\n         * @return {boolean}\n         */\n        this.isReady = false;\n\n        // responsive debounced event listener. If this.params.responsive is not\n        // set, this is never called. Use 100ms or this.params.responsive as\n        // timeout for the debounce function.\n        let prevWidth = 0;\n        this._onResize = util.debounce(\n            () => {\n                if (\n                    prevWidth != this.drawer.wrapper.clientWidth &&\n                    !this.params.scrollParent\n                ) {\n                    prevWidth = this.drawer.wrapper.clientWidth;\n                    this.drawer.fireEvent('redraw');\n                }\n            },\n            typeof this.params.responsive === 'number'\n                ? this.params.responsive\n                : 100\n        );\n\n        return this;\n    }\n\n    /**\n     * Initialise the wave\n     *\n     * @example\n     * var wavesurfer = new WaveSurfer(params);\n     * wavesurfer.init();\n     * @return {this} The wavesurfer instance\n     */\n    init() {\n        this.registerPlugins(this.params.plugins);\n        this.createDrawer();\n        this.createBackend();\n        this.createPeakCache();\n        return this;\n    }\n\n    /**\n     * Add and initialise array of plugins (if `plugin.deferInit` is falsey),\n     * this function is called in the init function of wavesurfer\n     *\n     * @param {PluginDefinition[]} plugins An array of plugin definitions\n     * @emits {WaveSurfer#plugins-registered} Called with the array of plugin definitions\n     * @return {this} The wavesurfer instance\n     */\n    registerPlugins(plugins) {\n        // first instantiate all the plugins\n        plugins.forEach(plugin => this.addPlugin(plugin));\n\n        // now run the init functions\n        plugins.forEach(plugin => {\n            // call init function of the plugin if deferInit is falsey\n            // in that case you would manually use initPlugins()\n            if (!plugin.deferInit) {\n                this.initPlugin(plugin.name);\n            }\n        });\n        this.fireEvent('plugins-registered', plugins);\n        return this;\n    }\n\n    /**\n     * Get a map of plugin names that are currently initialised\n     *\n     * @example wavesurfer.getPlugins();\n     * @return {Object} Object with plugin names\n     */\n    getActivePlugins() {\n        return this.initialisedPluginList;\n    }\n\n    /**\n     * Add a plugin object to wavesurfer\n     *\n     * @param {PluginDefinition} plugin A plugin definition\n     * @emits {WaveSurfer#plugin-added} Called with the name of the plugin that was added\n     * @example wavesurfer.addPlugin(WaveSurfer.minimap());\n     * @return {this} The wavesurfer instance\n     */\n    addPlugin(plugin) {\n        if (!plugin.name) {\n            throw new Error('Plugin does not have a name!');\n        }\n        if (!plugin.instance) {\n            throw new Error(\n                `Plugin ${plugin.name} does not have an instance property!`\n            );\n        }\n\n        // staticProps properties are applied to wavesurfer instance\n        if (plugin.staticProps) {\n            Object.keys(plugin.staticProps).forEach(pluginStaticProp => {\n                /**\n                 * Properties defined in a plugin definition's `staticProps` property are added as\n                 * staticProps properties of the WaveSurfer instance\n                 */\n                this[pluginStaticProp] = plugin.staticProps[pluginStaticProp];\n            });\n        }\n\n        const Instance = plugin.instance;\n\n        // turn the plugin instance into an observer\n        const observerPrototypeKeys = Object.getOwnPropertyNames(\n            util.Observer.prototype\n        );\n        observerPrototypeKeys.forEach(key => {\n            Instance.prototype[key] = util.Observer.prototype[key];\n        });\n\n        /**\n         * Instantiated plugin classes are added as a property of the wavesurfer\n         * instance\n         * @type {Object}\n         */\n        this[plugin.name] = new Instance(plugin.params || {}, this);\n        this.fireEvent('plugin-added', plugin.name);\n        return this;\n    }\n\n    /**\n     * Initialise a plugin\n     *\n     * @param {string} name A plugin name\n     * @emits WaveSurfer#plugin-initialised\n     * @example wavesurfer.initPlugin('minimap');\n     * @return {this} The wavesurfer instance\n     */\n    initPlugin(name) {\n        if (!this[name]) {\n            throw new Error(`Plugin ${name} has not been added yet!`);\n        }\n        if (this.initialisedPluginList[name]) {\n            // destroy any already initialised plugins\n            this.destroyPlugin(name);\n        }\n        this[name].init();\n        this.initialisedPluginList[name] = true;\n        this.fireEvent('plugin-initialised', name);\n        return this;\n    }\n\n    /**\n     * Destroy a plugin\n     *\n     * @param {string} name A plugin name\n     * @emits WaveSurfer#plugin-destroyed\n     * @example wavesurfer.destroyPlugin('minimap');\n     * @returns {this} The wavesurfer instance\n     */\n    destroyPlugin(name) {\n        if (!this[name]) {\n            throw new Error(\n                `Plugin ${name} has not been added yet and cannot be destroyed!`\n            );\n        }\n        if (!this.initialisedPluginList[name]) {\n            throw new Error(\n                `Plugin ${name} is not active and cannot be destroyed!`\n            );\n        }\n        if (typeof this[name].destroy !== 'function') {\n            throw new Error(`Plugin ${name} does not have a destroy function!`);\n        }\n\n        this[name].destroy();\n        delete this.initialisedPluginList[name];\n        this.fireEvent('plugin-destroyed', name);\n        return this;\n    }\n\n    /**\n     * Destroy all initialised plugins. Convenience function to use when\n     * wavesurfer is removed\n     *\n     * @private\n     */\n    destroyAllPlugins() {\n        Object.keys(this.initialisedPluginList).forEach(name =>\n            this.destroyPlugin(name)\n        );\n    }\n\n    /**\n     * Create the drawer and draw the waveform\n     *\n     * @private\n     * @emits WaveSurfer#drawer-created\n     */\n    createDrawer() {\n        this.drawer = new this.Drawer(this.container, this.params);\n        this.drawer.init();\n        this.fireEvent('drawer-created', this.drawer);\n\n        if (this.params.responsive !== false) {\n            window.addEventListener('resize', this._onResize, true);\n            window.addEventListener('orientationchange', this._onResize, true);\n        }\n\n        this.drawer.on('redraw', () => {\n            this.drawBuffer();\n            this.drawer.progress(this.backend.getPlayedPercents());\n        });\n\n        // Click-to-seek\n        this.drawer.on('click', (e, progress) => {\n            setTimeout(() => this.seekTo(progress), 0);\n        });\n\n        // Relay the scroll event from the drawer\n        this.drawer.on('scroll', e => {\n            if (this.params.partialRender) {\n                this.drawBuffer();\n            }\n            this.fireEvent('scroll', e);\n        });\n    }\n\n    /**\n     * Create the backend\n     *\n     * @private\n     * @emits WaveSurfer#backend-created\n     */\n    createBackend() {\n        if (this.backend) {\n            this.backend.destroy();\n        }\n\n        this.backend = new this.Backend(this.params);\n        this.backend.init();\n        this.fireEvent('backend-created', this.backend);\n\n        this.backend.on('finish', () => {\n            this.drawer.progress(this.backend.getPlayedPercents());\n            this.fireEvent('finish');\n        });\n        this.backend.on('play', () => this.fireEvent('play'));\n        this.backend.on('pause', () => this.fireEvent('pause'));\n\n        this.backend.on('audioprocess', time => {\n            this.drawer.progress(this.backend.getPlayedPercents());\n            this.fireEvent('audioprocess', time);\n        });\n\n        // only needed for MediaElement and MediaElementWebAudio backend\n        if (\n            this.params.backend === 'MediaElement' ||\n            this.params.backend === 'MediaElementWebAudio'\n        ) {\n            this.backend.on('seek', () => {\n                this.drawer.progress(this.backend.getPlayedPercents());\n            });\n\n            this.backend.on('volume', () => {\n                let newVolume = this.getVolume();\n                this.fireEvent('volume', newVolume);\n\n                if (this.backend.isMuted !== this.isMuted) {\n                    this.isMuted = this.backend.isMuted;\n                    this.fireEvent('mute', this.isMuted);\n                }\n            });\n        }\n    }\n\n    /**\n     * Create the peak cache\n     *\n     * @private\n     */\n    createPeakCache() {\n        if (this.params.partialRender) {\n            this.peakCache = new PeakCache();\n        }\n    }\n\n    /**\n     * Get the duration of the audio clip\n     *\n     * @example const duration = wavesurfer.getDuration();\n     * @return {number} Duration in seconds\n     */\n    getDuration() {\n        return this.backend.getDuration();\n    }\n\n    /**\n     * Get the current playback position\n     *\n     * @example const currentTime = wavesurfer.getCurrentTime();\n     * @return {number} Playback position in seconds\n     */\n    getCurrentTime() {\n        return this.backend.getCurrentTime();\n    }\n\n    /**\n     * Set the current play time in seconds.\n     *\n     * @param {number} seconds A positive number in seconds. E.g. 10 means 10\n     * seconds, 60 means 1 minute\n     */\n    setCurrentTime(seconds) {\n        if (seconds >= this.getDuration()) {\n            this.seekTo(1);\n        } else {\n            this.seekTo(seconds / this.getDuration());\n        }\n    }\n\n    /**\n     * Starts playback from the current position. Optional start and end\n     * measured in seconds can be used to set the range of audio to play.\n     *\n     * @param {?number} start Position to start at\n     * @param {?number} end Position to end at\n     * @emits WaveSurfer#interaction\n     * @return {Promise} Result of the backend play method\n     * @example\n     * // play from second 1 to 5\n     * wavesurfer.play(1, 5);\n     */\n    play(start, end) {\n        this.fireEvent('interaction', () => this.play(start, end));\n        return this.backend.play(start, end);\n    }\n\n    /**\n     * Set a point in seconds for playback to stop at.\n     *\n     * @param {number} position Position (in seconds) to stop at\n     * @version 3.3.0\n     */\n    setPlayEnd(position) {\n        this.backend.setPlayEnd(position);\n    }\n\n    /**\n     * Stops and pauses playback\n     *\n     * @example wavesurfer.pause();\n     * @return {Promise} Result of the backend pause method\n     */\n    pause() {\n        if (!this.backend.isPaused()) {\n            return this.backend.pause();\n        }\n    }\n\n    /**\n     * Toggle playback\n     *\n     * @example wavesurfer.playPause();\n     * @return {Promise} Result of the backend play or pause method\n     */\n    playPause() {\n        return this.backend.isPaused() ? this.play() : this.pause();\n    }\n\n    /**\n     * Get the current playback state\n     *\n     * @example const isPlaying = wavesurfer.isPlaying();\n     * @return {boolean} False if paused, true if playing\n     */\n    isPlaying() {\n        return !this.backend.isPaused();\n    }\n\n    /**\n     * Skip backward\n     *\n     * @param {?number} seconds Amount to skip back, if not specified `skipLength`\n     * is used\n     * @example wavesurfer.skipBackward();\n     */\n    skipBackward(seconds) {\n        this.skip(-seconds || -this.params.skipLength);\n    }\n\n    /**\n     * Skip forward\n     *\n     * @param {?number} seconds Amount to skip back, if not specified `skipLength`\n     * is used\n     * @example wavesurfer.skipForward();\n     */\n    skipForward(seconds) {\n        this.skip(seconds || this.params.skipLength);\n    }\n\n    /**\n     * Skip a number of seconds from the current position (use a negative value\n     * to go backwards).\n     *\n     * @param {number} offset Amount to skip back or forwards\n     * @example\n     * // go back 2 seconds\n     * wavesurfer.skip(-2);\n     */\n    skip(offset) {\n        const duration = this.getDuration() || 1;\n        let position = this.getCurrentTime() || 0;\n        position = Math.max(0, Math.min(duration, position + (offset || 0)));\n        this.seekAndCenter(position / duration);\n    }\n\n    /**\n     * Seeks to a position and centers the view\n     *\n     * @param {number} progress Between 0 (=beginning) and 1 (=end)\n     * @example\n     * // seek and go to the middle of the audio\n     * wavesurfer.seekTo(0.5);\n     */\n    seekAndCenter(progress) {\n        this.seekTo(progress);\n        this.drawer.recenter(progress);\n    }\n\n    /**\n     * Seeks to a position\n     *\n     * @param {number} progress Between 0 (=beginning) and 1 (=end)\n     * @emits WaveSurfer#interaction\n     * @emits WaveSurfer#seek\n     * @example\n     * // seek to the middle of the audio\n     * wavesurfer.seekTo(0.5);\n     */\n    seekTo(progress) {\n        // return an error if progress is not a number between 0 and 1\n        if (\n            typeof progress !== 'number' ||\n            !isFinite(progress) ||\n            progress < 0 ||\n            progress > 1\n        ) {\n            throw new Error(\n                'Error calling wavesurfer.seekTo, parameter must be a number between 0 and 1!'\n            );\n        }\n        this.fireEvent('interaction', () => this.seekTo(progress));\n\n        // avoid small scrolls while paused seeking\n        const oldScrollParent = this.params.scrollParent;\n        this.params.scrollParent = false;\n        this.backend.seekTo(progress * this.getDuration());\n        this.drawer.progress(progress);\n\n        this.params.scrollParent = oldScrollParent;\n        this.fireEvent('seek', progress);\n    }\n\n    /**\n     * Stops and goes to the beginning.\n     *\n     * @example wavesurfer.stop();\n     */\n    stop() {\n        this.pause();\n        this.seekTo(0);\n        this.drawer.progress(0);\n    }\n\n    /**\n     * Sets the ID of the audio device to use for output and returns a Promise.\n     *\n     * @param {string} deviceId String value representing underlying output\n     * device\n     * @returns {Promise} `Promise` that resolves to `undefined` when there are\n     * no errors detected.\n     */\n    setSinkId(deviceId) {\n        return this.backend.setSinkId(deviceId);\n    }\n\n    /**\n     * Set the playback volume.\n     *\n     * @param {number} newVolume A value between 0 and 1, 0 being no\n     * volume and 1 being full volume.\n     * @emits WaveSurfer#volume\n     */\n    setVolume(newVolume) {\n        this.backend.setVolume(newVolume);\n        this.fireEvent('volume', newVolume);\n    }\n\n    /**\n     * Get the playback volume.\n     *\n     * @return {number} A value between 0 and 1, 0 being no\n     * volume and 1 being full volume.\n     */\n    getVolume() {\n        return this.backend.getVolume();\n    }\n\n    /**\n     * Set the playback rate.\n     *\n     * @param {number} rate A positive number. E.g. 0.5 means half the normal\n     * speed, 2 means double speed and so on.\n     * @example wavesurfer.setPlaybackRate(2);\n     */\n    setPlaybackRate(rate) {\n        this.backend.setPlaybackRate(rate);\n    }\n\n    /**\n     * Get the playback rate.\n     *\n     * @return {number} The current playback rate.\n     */\n    getPlaybackRate() {\n        return this.backend.getPlaybackRate();\n    }\n\n    /**\n     * Toggle the volume on and off. If not currently muted it will save the\n     * current volume value and turn the volume off. If currently muted then it\n     * will restore the volume to the saved value, and then rest the saved\n     * value.\n     *\n     * @example wavesurfer.toggleMute();\n     */\n    toggleMute() {\n        this.setMute(!this.isMuted);\n    }\n\n    /**\n     * Enable or disable muted audio\n     *\n     * @param {boolean} mute Specify `true` to mute audio.\n     * @emits WaveSurfer#volume\n     * @emits WaveSurfer#mute\n     * @example\n     * // unmute\n     * wavesurfer.setMute(false);\n     * console.log(wavesurfer.getMute()) // logs false\n     */\n    setMute(mute) {\n        // ignore all muting requests if the audio is already in that state\n        if (mute === this.isMuted) {\n            this.fireEvent('mute', this.isMuted);\n            return;\n        }\n\n        if (this.backend.setMute) {\n            // Backends such as the MediaElement backend have their own handling\n            // of mute, let them handle it.\n            this.backend.setMute(mute);\n            this.isMuted = mute;\n        } else {\n            if (mute) {\n                // If currently not muted then save current volume,\n                // turn off the volume and update the mute properties\n                this.savedVolume = this.backend.getVolume();\n                this.backend.setVolume(0);\n                this.isMuted = true;\n                this.fireEvent('volume', 0);\n            } else {\n                // If currently muted then restore to the saved volume\n                // and update the mute properties\n                this.backend.setVolume(this.savedVolume);\n                this.isMuted = false;\n                this.fireEvent('volume', this.savedVolume);\n            }\n        }\n        this.fireEvent('mute', this.isMuted);\n    }\n\n    /**\n     * Get the current mute status.\n     *\n     * @example const isMuted = wavesurfer.getMute();\n     * @return {boolean} Current mute status\n     */\n    getMute() {\n        return this.isMuted;\n    }\n\n    /**\n     * Get the list of current set filters as an array.\n     *\n     * Filters must be set with setFilters method first\n     *\n     * @return {array} List of enabled filters\n     */\n    getFilters() {\n        return this.backend.filters || [];\n    }\n\n    /**\n     * Toggles `scrollParent` and redraws\n     *\n     * @example wavesurfer.toggleScroll();\n     */\n    toggleScroll() {\n        this.params.scrollParent = !this.params.scrollParent;\n        this.drawBuffer();\n    }\n\n    /**\n     * Toggle mouse interaction\n     *\n     * @example wavesurfer.toggleInteraction();\n     */\n    toggleInteraction() {\n        this.params.interact = !this.params.interact;\n    }\n\n    /**\n     * Get the fill color of the waveform after the cursor.\n     *\n     * @return {string} A CSS color string.\n     */\n    getWaveColor() {\n        return this.params.waveColor;\n    }\n\n    /**\n     * Set the fill color of the waveform after the cursor.\n     *\n     * @param {string} color A CSS color string.\n     * @example wavesurfer.setWaveColor('#ddd');\n     */\n    setWaveColor(color) {\n        this.params.waveColor = color;\n        this.drawBuffer();\n    }\n\n    /**\n     * Get the fill color of the waveform behind the cursor.\n     *\n     * @return {string} A CSS color string.\n     */\n    getProgressColor() {\n        return this.params.progressColor;\n    }\n\n    /**\n     * Set the fill color of the waveform behind the cursor.\n     *\n     * @param {string} color A CSS color string.\n     * @example wavesurfer.setProgressColor('#400');\n     */\n    setProgressColor(color) {\n        this.params.progressColor = color;\n        this.drawBuffer();\n    }\n\n    /**\n     * Get the background color of the waveform container.\n     *\n     * @return {string} A CSS color string.\n     */\n    getBackgroundColor() {\n        return this.params.backgroundColor;\n    }\n\n    /**\n     * Set the background color of the waveform container.\n     *\n     * @param {string} color A CSS color string.\n     * @example wavesurfer.setBackgroundColor('#FF00FF');\n     */\n    setBackgroundColor(color) {\n        this.params.backgroundColor = color;\n        util.style(this.container, { background: this.params.backgroundColor });\n    }\n\n    /**\n     * Get the fill color of the cursor indicating the playhead\n     * position.\n     *\n     * @return {string} A CSS color string.\n     */\n    getCursorColor() {\n        return this.params.cursorColor;\n    }\n\n    /**\n     * Set the fill color of the cursor indicating the playhead\n     * position.\n     *\n     * @param {string} color A CSS color string.\n     * @example wavesurfer.setCursorColor('#222');\n     */\n    setCursorColor(color) {\n        this.params.cursorColor = color;\n        this.drawer.updateCursor();\n    }\n\n    /**\n     * Get the height of the waveform.\n     *\n     * @return {number} Height measured in pixels.\n     */\n    getHeight() {\n        return this.params.height;\n    }\n\n    /**\n     * Set the height of the waveform.\n     *\n     * @param {number} height Height measured in pixels.\n     * @example wavesurfer.setHeight(200);\n     */\n    setHeight(height) {\n        this.params.height = height;\n        this.drawer.setHeight(height * this.params.pixelRatio);\n        this.drawBuffer();\n    }\n\n    /**\n     * Hide channels from being drawn on the waveform if splitting channels.\n     *\n     * For example, if we want to draw only the peaks for the right stereo channel:\n     *\n     * const wavesurfer = new WaveSurfer.create({...splitChannels: true});\n     * wavesurfer.load('stereo_audio.mp3');\n     *\n     * wavesurfer.setFilteredChannel([0]); <-- hide left channel peaks.\n     *\n     * @param {array} channelIndices Channels to be filtered out from drawing.\n     * @version 4.0.0\n     */\n    setFilteredChannels(channelIndices) {\n        this.params.splitChannelsOptions.filterChannels = channelIndices;\n        this.drawBuffer();\n    }\n\n    /**\n     * Get the correct peaks for current wave view-port and render wave\n     *\n     * @private\n     * @emits WaveSurfer#redraw\n     */\n    drawBuffer() {\n        const nominalWidth = Math.round(\n            this.getDuration() *\n                this.params.minPxPerSec *\n                this.params.pixelRatio\n        );\n        const parentWidth = this.drawer.getWidth();\n        let width = nominalWidth;\n        // always start at 0 after zooming for scrolling : issue redraw left part\n        let start = 0;\n        let end = Math.max(start + parentWidth, width);\n        // Fill container\n        if (\n            this.params.fillParent &&\n            (!this.params.scrollParent || nominalWidth < parentWidth)\n        ) {\n            width = parentWidth;\n            start = 0;\n            end = width;\n        }\n\n        let peaks;\n        if (this.params.partialRender) {\n            const newRanges = this.peakCache.addRangeToPeakCache(\n                width,\n                start,\n                end\n            );\n            let i;\n            for (i = 0; i < newRanges.length; i++) {\n                peaks = this.backend.getPeaks(\n                    width,\n                    newRanges[i][0],\n                    newRanges[i][1]\n                );\n                this.drawer.drawPeaks(\n                    peaks,\n                    width,\n                    newRanges[i][0],\n                    newRanges[i][1]\n                );\n            }\n        } else {\n            peaks = this.backend.getPeaks(width, start, end);\n            this.drawer.drawPeaks(peaks, width, start, end);\n        }\n        this.fireEvent('redraw', peaks, width);\n    }\n\n    /**\n     * Horizontally zooms the waveform in and out. It also changes the parameter\n     * `minPxPerSec` and enables the `scrollParent` option. Calling the function\n     * with a falsey parameter will reset the zoom state.\n     *\n     * @param {?number} pxPerSec Number of horizontal pixels per second of\n     * audio, if none is set the waveform returns to unzoomed state\n     * @emits WaveSurfer#zoom\n     * @example wavesurfer.zoom(20);\n     */\n    zoom(pxPerSec) {\n        if (!pxPerSec) {\n            this.params.minPxPerSec = this.defaultParams.minPxPerSec;\n            this.params.scrollParent = false;\n        } else {\n            this.params.minPxPerSec = pxPerSec;\n            this.params.scrollParent = true;\n        }\n\n        this.drawBuffer();\n        this.drawer.progress(this.backend.getPlayedPercents());\n\n        this.drawer.recenter(this.getCurrentTime() / this.getDuration());\n        this.fireEvent('zoom', pxPerSec);\n    }\n\n    /**\n     * Decode buffer and load\n     *\n     * @private\n     * @param {ArrayBuffer} arraybuffer Buffer to process\n     */\n    loadArrayBuffer(arraybuffer) {\n        this.decodeArrayBuffer(arraybuffer, data => {\n            if (!this.isDestroyed) {\n                this.loadDecodedBuffer(data);\n            }\n        });\n    }\n\n    /**\n     * Directly load an externally decoded AudioBuffer\n     *\n     * @private\n     * @param {AudioBuffer} buffer Buffer to process\n     * @emits WaveSurfer#ready\n     */\n    loadDecodedBuffer(buffer) {\n        this.backend.load(buffer);\n        this.drawBuffer();\n        this.isReady = true;\n        this.fireEvent('ready');\n    }\n\n    /**\n     * Loads audio data from a Blob or File object\n     *\n     * @param {Blob|File} blob Audio data\n     * @example\n     */\n    loadBlob(blob) {\n        // Create file reader\n        const reader = new FileReader();\n        reader.addEventListener('progress', e => this.onProgress(e));\n        reader.addEventListener('load', e =>\n            this.loadArrayBuffer(e.target.result)\n        );\n        reader.addEventListener('error', () =>\n            this.fireEvent('error', 'Error reading file')\n        );\n        reader.readAsArrayBuffer(blob);\n        this.empty();\n    }\n\n    /**\n     * Loads audio and re-renders the waveform.\n     *\n     * @param {string|HTMLMediaElement} url The url of the audio file or the\n     * audio element with the audio\n     * @param {number[]|Number.<Array[]>} peaks Wavesurfer does not have to decode\n     * the audio to render the waveform if this is specified\n     * @param {?string} preload (Use with backend `MediaElement` and `MediaElementWebAudio`)\n     * `'none'|'metadata'|'auto'` Preload attribute for the media element\n     * @param {?number} duration The duration of the audio. This is used to\n     * render the peaks data in the correct size for the audio duration (as\n     * befits the current `minPxPerSec` and zoom value) without having to decode\n     * the audio.\n     * @returns {void}\n     * @throws Will throw an error if the `url` argument is empty.\n     * @example\n     * // uses fetch or media element to load file (depending on backend)\n     * wavesurfer.load('http://example.com/demo.wav');\n     *\n     * // setting preload attribute with media element backend and supplying\n     * // peaks\n     * wavesurfer.load(\n     *   'http://example.com/demo.wav',\n     *   [0.0218, 0.0183, 0.0165, 0.0198, 0.2137, 0.2888],\n     *   true\n     * );\n     */\n    load(url, peaks, preload, duration) {\n        if (!url) {\n            throw new Error('url parameter cannot be empty');\n        }\n        this.empty();\n        if (preload) {\n            // check whether the preload attribute will be usable and if not log\n            // a warning listing the reasons why not and nullify the variable\n            const preloadIgnoreReasons = {\n                \"Preload is not 'auto', 'none' or 'metadata'\":\n                    ['auto', 'metadata', 'none'].indexOf(preload) === -1,\n                'Peaks are not provided': !peaks,\n                \"Backend is not of type 'MediaElement' or 'MediaElementWebAudio'\":\n                    ['MediaElement', 'MediaElementWebAudio'].indexOf(\n                        this.params.backend\n                    ) === -1,\n                'Url is not of type string': typeof url !== 'string'\n            };\n            const activeReasons = Object.keys(preloadIgnoreReasons).filter(\n                reason => preloadIgnoreReasons[reason]\n            );\n            if (activeReasons.length) {\n                // eslint-disable-next-line no-console\n                console.warn(\n                    'Preload parameter of wavesurfer.load will be ignored because:\\n\\t- ' +\n                        activeReasons.join('\\n\\t- ')\n                );\n                // stop invalid values from being used\n                preload = null;\n            }\n        }\n\n        switch (this.params.backend) {\n            case 'WebAudio':\n                return this.loadBuffer(url, peaks, duration);\n            case 'MediaElement':\n            case 'MediaElementWebAudio':\n                return this.loadMediaElement(url, peaks, preload, duration);\n        }\n    }\n\n    /**\n     * Loads audio using Web Audio buffer backend.\n     *\n     * @private\n     * @emits WaveSurfer#waveform-ready\n     * @param {string} url URL of audio file\n     * @param {number[]|Number.<Array[]>} peaks Peaks data\n     * @param {?number} duration Optional duration of audio file\n     * @returns {void}\n     */\n    loadBuffer(url, peaks, duration) {\n        const load = action => {\n            if (action) {\n                this.tmpEvents.push(this.once('ready', action));\n            }\n            return this.getArrayBuffer(url, data => this.loadArrayBuffer(data));\n        };\n\n        if (peaks) {\n            this.backend.setPeaks(peaks, duration);\n            this.drawBuffer();\n            this.fireEvent('waveform-ready');\n            this.tmpEvents.push(this.once('interaction', load));\n        } else {\n            return load();\n        }\n    }\n\n    /**\n     * Either create a media element, or load an existing media element.\n     *\n     * @private\n     * @emits WaveSurfer#waveform-ready\n     * @param {string|HTMLMediaElement} urlOrElt Either a path to a media file, or an\n     * existing HTML5 Audio/Video Element\n     * @param {number[]|Number.<Array[]>} peaks Array of peaks. Required to bypass web audio\n     * dependency\n     * @param {?boolean} preload Set to true if the preload attribute of the\n     * audio element should be enabled\n     * @param {?number} duration Optional duration of audio file\n     */\n    loadMediaElement(urlOrElt, peaks, preload, duration) {\n        let url = urlOrElt;\n\n        if (typeof urlOrElt === 'string') {\n            this.backend.load(url, this.mediaContainer, peaks, preload);\n        } else {\n            const elt = urlOrElt;\n            this.backend.loadElt(elt, peaks);\n\n            // If peaks are not provided,\n            // url = element.src so we can get peaks with web audio\n            url = elt.src;\n        }\n\n        this.tmpEvents.push(\n            this.backend.once('canplay', () => {\n                // ignore when backend was already destroyed\n                if (!this.backend.destroyed) {\n                    this.drawBuffer();\n                    this.isReady = true;\n                    this.fireEvent('ready');\n                }\n            }),\n            this.backend.once('error', err => this.fireEvent('error', err))\n        );\n\n        // If peaks are provided, render them and fire the `waveform-ready` event.\n        if (peaks) {\n            this.backend.setPeaks(peaks, duration);\n            this.drawBuffer();\n            this.fireEvent('waveform-ready');\n        }\n\n        // If no pre-decoded peaks are provided, or are provided with\n        // forceDecode flag, attempt to download the audio file and decode it\n        // with Web Audio.\n        if (\n            (!peaks || this.params.forceDecode) &&\n            this.backend.supportsWebAudio()\n        ) {\n            this.getArrayBuffer(url, arraybuffer => {\n                this.decodeArrayBuffer(arraybuffer, buffer => {\n                    this.backend.buffer = buffer;\n                    this.backend.setPeaks(null);\n                    this.drawBuffer();\n                    this.fireEvent('waveform-ready');\n                });\n            });\n        }\n    }\n\n    /**\n     * Decode an array buffer and pass data to a callback\n     *\n     * @private\n     * @param {Object} arraybuffer The array buffer to decode\n     * @param {function} callback The function to call on complete\n     */\n    decodeArrayBuffer(arraybuffer, callback) {\n        this.arraybuffer = arraybuffer;\n        this.backend.decodeArrayBuffer(\n            arraybuffer,\n            data => {\n                // Only use the decoded data if we haven't been destroyed or\n                // another decode started in the meantime\n                if (!this.isDestroyed && this.arraybuffer == arraybuffer) {\n                    callback(data);\n                    this.arraybuffer = null;\n                }\n            },\n            () => this.fireEvent('error', 'Error decoding audiobuffer')\n        );\n    }\n\n    /**\n     * Load an array buffer using fetch and pass the result to a callback\n     *\n     * @param {string} url The URL of the file object\n     * @param {function} callback The function to call on complete\n     * @returns {util.fetchFile} fetch call\n     * @private\n     */\n    getArrayBuffer(url, callback) {\n        let options = Object.assign(\n            {\n                url: url,\n                responseType: 'arraybuffer'\n            },\n            this.params.xhr\n        );\n        const request = util.fetchFile(options);\n\n        this.currentRequest = request;\n\n        this.tmpEvents.push(\n            request.on('progress', e => {\n                this.onProgress(e);\n            }),\n            request.on('success', data => {\n                callback(data);\n                this.currentRequest = null;\n            }),\n            request.on('error', e => {\n                this.fireEvent('error', e);\n                this.currentRequest = null;\n            })\n        );\n\n        return request;\n    }\n\n    /**\n     * Called while the audio file is loading\n     *\n     * @private\n     * @param {Event} e Progress event\n     * @emits WaveSurfer#loading\n     */\n    onProgress(e) {\n        let percentComplete;\n        if (e.lengthComputable) {\n            percentComplete = e.loaded / e.total;\n        } else {\n            // Approximate progress with an asymptotic\n            // function, and assume downloads in the 1-3 MB range.\n            percentComplete = e.loaded / (e.loaded + 1000000);\n        }\n        this.fireEvent('loading', Math.round(percentComplete * 100), e.target);\n    }\n\n    /**\n     * Exports PCM data into a JSON array and opens in a new window.\n     *\n     * @param {number} length=1024 The scale in which to export the peaks\n     * @param {number} accuracy=10000\n     * @param {?boolean} noWindow Set to true to disable opening a new\n     * window with the JSON\n     * @param {number} start Start index\n     * @param {number} end End index\n     * @return {Promise} Promise that resolves with array of peaks\n     */\n    exportPCM(length, accuracy, noWindow, start, end) {\n        length = length || 1024;\n        start = start || 0;\n        accuracy = accuracy || 10000;\n        noWindow = noWindow || false;\n        const peaks = this.backend.getPeaks(length, start, end);\n        const arr = [].map.call(\n            peaks,\n            val => Math.round(val * accuracy) / accuracy\n        );\n        return new Promise((resolve, reject) => {\n            const json = JSON.stringify(arr);\n\n            if (!noWindow) {\n                window.open(\n                    'data:application/json;charset=utf-8,' +\n                        encodeURIComponent(json)\n                );\n            }\n            resolve(json);\n        });\n    }\n\n    /**\n     * Save waveform image as data URI.\n     *\n     * The default format is `'image/png'`. Other supported types are\n     * `'image/jpeg'` and `'image/webp'`.\n     *\n     * @param {string} format='image/png' A string indicating the image format.\n     * The default format type is `'image/png'`.\n     * @param {number} quality=1 A number between 0 and 1 indicating the image\n     * quality to use for image formats that use lossy compression such as\n     * `'image/jpeg'`` and `'image/webp'`.\n     * @param {string} type Image data type to return. Either 'dataURL' (default)\n     * or 'blob'.\n     * @return {string|string[]|Promise} When using `'dataURL'` type this returns\n     * a single data URL or an array of data URLs, one for each canvas. When using\n     * `'blob'` type this returns a `Promise` resolving with an array of `Blob`\n     * instances, one for each canvas.\n     */\n    exportImage(format, quality, type) {\n        if (!format) {\n            format = 'image/png';\n        }\n        if (!quality) {\n            quality = 1;\n        }\n        if (!type) {\n            type = 'dataURL';\n        }\n\n        return this.drawer.getImage(format, quality, type);\n    }\n\n    /**\n     * Cancel any fetch request currently in progress\n     */\n    cancelAjax() {\n        if (this.currentRequest && this.currentRequest.controller) {\n            // If the current request has a ProgressHandler, then its ReadableStream might need to be cancelled too\n            // See: Wavesurfer issue #2042\n            // See Firefox bug: https://bugzilla.mozilla.org/show_bug.cgi?id=1583815\n            if (this.currentRequest._reader) {\n                // Ignoring exceptions thrown by call to cancel()\n                this.currentRequest._reader.cancel().catch(err => {});\n            }\n\n            this.currentRequest.controller.abort();\n            this.currentRequest = null;\n        }\n    }\n\n    /**\n     * @private\n     */\n    clearTmpEvents() {\n        this.tmpEvents.forEach(e => e.un());\n    }\n\n    /**\n     * Display empty waveform.\n     */\n    empty() {\n        if (!this.backend.isPaused()) {\n            this.stop();\n            this.backend.disconnectSource();\n        }\n        this.isReady = false;\n        this.cancelAjax();\n        this.clearTmpEvents();\n\n        // empty drawer\n        this.drawer.progress(0);\n        this.drawer.setWidth(0);\n        this.drawer.drawPeaks({ length: this.drawer.getWidth() }, 0);\n    }\n\n    /**\n     * Remove events, elements and disconnect WebAudio nodes.\n     *\n     * @emits WaveSurfer#destroy\n     */\n    destroy() {\n        this.destroyAllPlugins();\n        this.fireEvent('destroy');\n        this.cancelAjax();\n        this.clearTmpEvents();\n        this.unAll();\n        if (this.params.responsive !== false) {\n            window.removeEventListener('resize', this._onResize, true);\n            window.removeEventListener(\n                'orientationchange',\n                this._onResize,\n                true\n            );\n        }\n        if (this.backend) {\n            this.backend.destroy();\n        }\n        if (this.drawer) {\n            this.drawer.destroy();\n        }\n        this.isDestroyed = true;\n        this.isReady = false;\n        this.arraybuffer = null;\n    }\n}\n","import * as util from './util';\n\n// using constants to prevent someone writing the string wrong\nconst PLAYING = 'playing';\nconst PAUSED = 'paused';\nconst FINISHED = 'finished';\n\n/**\n * WebAudio backend\n *\n * @extends {Observer}\n */\nexport default class WebAudio extends util.Observer {\n    /** scriptBufferSize: size of the processing buffer */\n    static scriptBufferSize = 256;\n    /** audioContext: allows to process audio with WebAudio API */\n    audioContext = null;\n    /** @private */\n    offlineAudioContext = null;\n    /** @private */\n    stateBehaviors = {\n        [PLAYING]: {\n            init() {\n                this.addOnAudioProcess();\n            },\n            getPlayedPercents() {\n                const duration = this.getDuration();\n                return this.getCurrentTime() / duration || 0;\n            },\n            getCurrentTime() {\n                return this.startPosition + this.getPlayedTime();\n            }\n        },\n        [PAUSED]: {\n            init() {\n                this.removeOnAudioProcess();\n            },\n            getPlayedPercents() {\n                const duration = this.getDuration();\n                return this.getCurrentTime() / duration || 0;\n            },\n            getCurrentTime() {\n                return this.startPosition;\n            }\n        },\n        [FINISHED]: {\n            init() {\n                this.removeOnAudioProcess();\n                this.fireEvent('finish');\n            },\n            getPlayedPercents() {\n                return 1;\n            },\n            getCurrentTime() {\n                return this.getDuration();\n            }\n        }\n    };\n\n    /**\n     * Does the browser support this backend\n     *\n     * @return {boolean} Whether or not this browser supports this backend\n     */\n    supportsWebAudio() {\n        return !!(window.AudioContext || window.webkitAudioContext);\n    }\n\n    /**\n     * Get the audio context used by this backend or create one\n     *\n     * @return {AudioContext} Existing audio context, or creates a new one\n     */\n    getAudioContext() {\n        if (!window.WaveSurferAudioContext) {\n            window.WaveSurferAudioContext = new (window.AudioContext ||\n                window.webkitAudioContext)();\n        }\n        return window.WaveSurferAudioContext;\n    }\n\n    /**\n     * Get the offline audio context used by this backend or create one\n     *\n     * @param {number} sampleRate The sample rate to use\n     * @return {OfflineAudioContext} Existing offline audio context, or creates\n     * a new one\n     */\n    getOfflineAudioContext(sampleRate) {\n        if (!window.WaveSurferOfflineAudioContext) {\n            window.WaveSurferOfflineAudioContext = new (window.OfflineAudioContext ||\n                window.webkitOfflineAudioContext)(1, 2, sampleRate);\n        }\n        return window.WaveSurferOfflineAudioContext;\n    }\n\n    /**\n     * Construct the backend\n     *\n     * @param {WavesurferParams} params Wavesurfer parameters\n     */\n    constructor(params) {\n        super();\n        /** @private */\n        this.params = params;\n        /** ac: Audio Context instance */\n        this.ac =\n            params.audioContext ||\n            (this.supportsWebAudio() ? this.getAudioContext() : {});\n        /**@private */\n        this.lastPlay = this.ac.currentTime;\n        /** @private */\n        this.startPosition = 0;\n        /** @private */\n        this.scheduledPause = null;\n        /** @private */\n        this.states = {\n            [PLAYING]: Object.create(this.stateBehaviors[PLAYING]),\n            [PAUSED]: Object.create(this.stateBehaviors[PAUSED]),\n            [FINISHED]: Object.create(this.stateBehaviors[FINISHED])\n        };\n        /** @private */\n        this.buffer = null;\n        /** @private */\n        this.filters = [];\n        /** gainNode: allows to control audio volume */\n        this.gainNode = null;\n        /** @private */\n        this.mergedPeaks = null;\n        /** @private */\n        this.offlineAc = null;\n        /** @private */\n        this.peaks = null;\n        /** @private */\n        this.playbackRate = 1;\n        /** analyser: provides audio analysis information */\n        this.analyser = null;\n        /** scriptNode: allows processing audio */\n        this.scriptNode = null;\n        /** @private */\n        this.source = null;\n        /** @private */\n        this.splitPeaks = [];\n        /** @private */\n        this.state = null;\n        /** @private */\n        this.explicitDuration = params.duration;\n        /**\n         * Boolean indicating if the backend was destroyed.\n         */\n        this.destroyed = false;\n    }\n\n    /**\n     * Initialise the backend, called in `wavesurfer.createBackend()`\n     */\n    init() {\n        this.createVolumeNode();\n        this.createScriptNode();\n        this.createAnalyserNode();\n\n        this.setState(PAUSED);\n        this.setPlaybackRate(this.params.audioRate);\n        this.setLength(0);\n    }\n\n    /** @private */\n    disconnectFilters() {\n        if (this.filters) {\n            this.filters.forEach(filter => {\n                filter && filter.disconnect();\n            });\n            this.filters = null;\n            // Reconnect direct path\n            this.analyser.connect(this.gainNode);\n        }\n    }\n\n    /**\n     * @private\n     *\n     * @param {string} state The new state\n     */\n    setState(state) {\n        if (this.state !== this.states[state]) {\n            this.state = this.states[state];\n            this.state.init.call(this);\n        }\n    }\n\n    /**\n     * Unpacked `setFilters()`\n     *\n     * @param {...AudioNode} filters One or more filters to set\n     */\n    setFilter(...filters) {\n        this.setFilters(filters);\n    }\n\n    /**\n     * Insert custom Web Audio nodes into the graph\n     *\n     * @param {AudioNode[]} filters Packed filters array\n     * @example\n     * const lowpass = wavesurfer.backend.ac.createBiquadFilter();\n     * wavesurfer.backend.setFilter(lowpass);\n     */\n    setFilters(filters) {\n        // Remove existing filters\n        this.disconnectFilters();\n\n        // Insert filters if filter array not empty\n        if (filters && filters.length) {\n            this.filters = filters;\n\n            // Disconnect direct path before inserting filters\n            this.analyser.disconnect();\n\n            // Connect each filter in turn\n            filters\n                .reduce((prev, curr) => {\n                    prev.connect(curr);\n                    return curr;\n                }, this.analyser)\n                .connect(this.gainNode);\n        }\n    }\n    /** Create ScriptProcessorNode to process audio */\n    createScriptNode() {\n        if (this.params.audioScriptProcessor) {\n            this.scriptNode = this.params.audioScriptProcessor;\n        } else {\n            if (this.ac.createScriptProcessor) {\n                this.scriptNode = this.ac.createScriptProcessor(\n                    WebAudio.scriptBufferSize\n                );\n            } else {\n                this.scriptNode = this.ac.createJavaScriptNode(\n                    WebAudio.scriptBufferSize\n                );\n            }\n        }\n        this.scriptNode.connect(this.ac.destination);\n    }\n\n    /** @private */\n    addOnAudioProcess() {\n        this.scriptNode.onaudioprocess = () => {\n            const time = this.getCurrentTime();\n\n            if (time >= this.getDuration()) {\n                this.setState(FINISHED);\n                this.fireEvent('pause');\n            } else if (time >= this.scheduledPause) {\n                this.pause();\n            } else if (this.state === this.states[PLAYING]) {\n                this.fireEvent('audioprocess', time);\n            }\n        };\n    }\n\n    /** @private */\n    removeOnAudioProcess() {\n        this.scriptNode.onaudioprocess = () => {};\n    }\n    /** Create analyser node to perform audio analysis */\n    createAnalyserNode() {\n        this.analyser = this.ac.createAnalyser();\n        this.analyser.connect(this.gainNode);\n    }\n\n    /**\n     * Create the gain node needed to control the playback volume.\n     *\n     */\n    createVolumeNode() {\n        // Create gain node using the AudioContext\n        if (this.ac.createGain) {\n            this.gainNode = this.ac.createGain();\n        } else {\n            this.gainNode = this.ac.createGainNode();\n        }\n        // Add the gain node to the graph\n        this.gainNode.connect(this.ac.destination);\n    }\n\n    /**\n     * Set the sink id for the media player\n     *\n     * @param {string} deviceId String value representing audio device id.\n     * @returns {Promise} A Promise that resolves to `undefined` when there\n     * are no errors.\n     */\n    setSinkId(deviceId) {\n        if (deviceId) {\n            /**\n             * The webaudio API doesn't currently support setting the device\n             * output. Here we create an HTMLAudioElement, connect the\n             * webaudio stream to that element and setSinkId there.\n             */\n            let audio = new window.Audio();\n            if (!audio.setSinkId) {\n                return Promise.reject(\n                    new Error('setSinkId is not supported in your browser')\n                );\n            }\n            audio.autoplay = true;\n            var dest = this.ac.createMediaStreamDestination();\n            this.gainNode.disconnect();\n            this.gainNode.connect(dest);\n            audio.srcObject = dest.stream;\n\n            return audio.setSinkId(deviceId);\n        } else {\n            return Promise.reject(new Error('Invalid deviceId: ' + deviceId));\n        }\n    }\n\n    /**\n     * Set the audio volume\n     *\n     * @param {number} value A floating point value between 0 and 1.\n     */\n    setVolume(value) {\n        this.gainNode.gain.setValueAtTime(value, this.ac.currentTime);\n    }\n\n    /**\n     * Get the current volume\n     *\n     * @return {number} value A floating point value between 0 and 1.\n     */\n    getVolume() {\n        return this.gainNode.gain.value;\n    }\n\n    /**\n     * Decode an array buffer and pass data to a callback\n     *\n     * @private\n     * @param {ArrayBuffer} arraybuffer The array buffer to decode\n     * @param {function} callback The function to call on complete.\n     * @param {function} errback The function to call on error.\n     */\n    decodeArrayBuffer(arraybuffer, callback, errback) {\n        if (!this.offlineAc) {\n            this.offlineAc = this.getOfflineAudioContext(\n                this.ac && this.ac.sampleRate ? this.ac.sampleRate : 44100\n            );\n        }\n        if ('AudioContext' in window) {\n            this.offlineAc.decodeAudioData(arraybuffer).then(\n                (data) => callback(data)\n            ).catch(\n                (err) => errback(err)\n            );\n        } else {\n            // Safari: no support for Promise-based decodeAudioData yet\n            this.offlineAc.decodeAudioData(\n                arraybuffer,\n                data => callback(data),\n                errback\n            );\n        }\n    }\n\n    /**\n     * Set pre-decoded peaks\n     *\n     * @param {number[]|Number.<Array[]>} peaks Peaks data\n     * @param {?number} duration Explicit duration\n     */\n    setPeaks(peaks, duration) {\n        if (duration != null) {\n            this.explicitDuration = duration;\n        }\n        this.peaks = peaks;\n    }\n\n    /**\n     * Set the rendered length (different from the length of the audio)\n     *\n     * @param {number} length The rendered length\n     */\n    setLength(length) {\n        // No resize, we can preserve the cached peaks.\n        if (this.mergedPeaks && length == 2 * this.mergedPeaks.length - 1 + 2) {\n            return;\n        }\n\n        this.splitPeaks = [];\n        this.mergedPeaks = [];\n        // Set the last element of the sparse array so the peak arrays are\n        // appropriately sized for other calculations.\n        const channels = this.buffer ? this.buffer.numberOfChannels : 1;\n        let c;\n        for (c = 0; c < channels; c++) {\n            this.splitPeaks[c] = [];\n            this.splitPeaks[c][2 * (length - 1)] = 0;\n            this.splitPeaks[c][2 * (length - 1) + 1] = 0;\n        }\n        this.mergedPeaks[2 * (length - 1)] = 0;\n        this.mergedPeaks[2 * (length - 1) + 1] = 0;\n    }\n\n    /**\n     * Compute the max and min value of the waveform when broken into <length> subranges.\n     *\n     * @param {number} length How many subranges to break the waveform into.\n     * @param {number} first First sample in the required range.\n     * @param {number} last Last sample in the required range.\n     * @return {number[]|Number.<Array[]>} Array of 2*<length> peaks or array of arrays of\n     * peaks consisting of (max, min) values for each subrange.\n     */\n    getPeaks(length, first, last) {\n        if (this.peaks) {\n            return this.peaks;\n        }\n        if (!this.buffer) {\n            return [];\n        }\n\n        first = first || 0;\n        last = last || length - 1;\n\n        this.setLength(length);\n\n        if (!this.buffer) {\n            return this.params.splitChannels\n                ? this.splitPeaks\n                : this.mergedPeaks;\n        }\n\n        /**\n         * The following snippet fixes a buffering data issue on the Safari\n         * browser which returned undefined It creates the missing buffer based\n         * on 1 channel, 4096 samples and the sampleRate from the current\n         * webaudio context 4096 samples seemed to be the best fit for rendering\n         * will review this code once a stable version of Safari TP is out\n         */\n        if (!this.buffer.length) {\n            const newBuffer = this.createBuffer(1, 4096, this.sampleRate);\n            this.buffer = newBuffer.buffer;\n        }\n\n        const sampleSize = this.buffer.length / length;\n        const sampleStep = ~~(sampleSize / 10) || 1;\n        const channels = this.buffer.numberOfChannels;\n        let c;\n\n        for (c = 0; c < channels; c++) {\n            const peaks = this.splitPeaks[c];\n            const chan = this.buffer.getChannelData(c);\n            let i;\n\n            for (i = first; i <= last; i++) {\n                const start = ~~(i * sampleSize);\n                const end = ~~(start + sampleSize);\n                /**\n                 * Initialize the max and min to the first sample of this\n                 * subrange, so that even if the samples are entirely\n                 * on one side of zero, we still return the true max and\n                 * min values in the subrange.\n                 */\n                let min = chan[start];\n                let max = min;\n                let j;\n\n                for (j = start; j < end; j += sampleStep) {\n                    const value = chan[j];\n\n                    if (value > max) {\n                        max = value;\n                    }\n\n                    if (value < min) {\n                        min = value;\n                    }\n                }\n\n                peaks[2 * i] = max;\n                peaks[2 * i + 1] = min;\n\n                if (c == 0 || max > this.mergedPeaks[2 * i]) {\n                    this.mergedPeaks[2 * i] = max;\n                }\n\n                if (c == 0 || min < this.mergedPeaks[2 * i + 1]) {\n                    this.mergedPeaks[2 * i + 1] = min;\n                }\n            }\n        }\n\n        return this.params.splitChannels ? this.splitPeaks : this.mergedPeaks;\n    }\n\n    /**\n     * Get the position from 0 to 1\n     *\n     * @return {number} Position\n     */\n    getPlayedPercents() {\n        return this.state.getPlayedPercents.call(this);\n    }\n\n    /** @private */\n    disconnectSource() {\n        if (this.source) {\n            this.source.disconnect();\n        }\n    }\n    /**\n     * Destroy all references with WebAudio, disconnecting audio nodes and closing Audio Context\n     */\n    destroyWebAudio() {\n        this.disconnectFilters();\n        this.disconnectSource();\n        this.gainNode.disconnect();\n        this.scriptNode.disconnect();\n        this.analyser.disconnect();\n\n        // close the audioContext if closeAudioContext option is set to true\n        if (this.params.closeAudioContext) {\n            // check if browser supports AudioContext.close()\n            if (\n                typeof this.ac.close === 'function' &&\n                this.ac.state != 'closed'\n            ) {\n                this.ac.close();\n            }\n            // clear the reference to the audiocontext\n            this.ac = null;\n            // clear the actual audiocontext, either passed as param or the\n            // global singleton\n            if (!this.params.audioContext) {\n                window.WaveSurferAudioContext = null;\n            } else {\n                this.params.audioContext = null;\n            }\n            // clear the offlineAudioContext\n            window.WaveSurferOfflineAudioContext = null;\n        }\n    }\n    /**\n     * This is called when wavesurfer is destroyed\n     */\n    destroy() {\n        if (!this.isPaused()) {\n            this.pause();\n        }\n        this.unAll();\n        this.buffer = null;\n        this.destroyed = true;\n\n        this.destroyWebAudio();\n    }\n\n    /**\n     * Loaded a decoded audio buffer\n     *\n     * @param {Object} buffer Decoded audio buffer to load\n     */\n    load(buffer) {\n        this.startPosition = 0;\n        this.lastPlay = this.ac.currentTime;\n        this.buffer = buffer;\n        this.createSource();\n    }\n\n    /** @private */\n    createSource() {\n        this.disconnectSource();\n        this.source = this.ac.createBufferSource();\n\n        // adjust for old browsers\n        this.source.start = this.source.start || this.source.noteGrainOn;\n        this.source.stop = this.source.stop || this.source.noteOff;\n\n        this.setPlaybackRate(this.playbackRate);\n        this.source.buffer = this.buffer;\n        this.source.connect(this.analyser);\n    }\n\n    /**\n     * @private\n     *\n     * some browsers require an explicit call to #resume before they will play back audio\n     */\n    resumeAudioContext() {\n        if (this.ac.state == 'suspended') {\n            this.ac.resume && this.ac.resume();\n        }\n    }\n\n    /**\n     * Used by `wavesurfer.isPlaying()` and `wavesurfer.playPause()`\n     *\n     * @return {boolean} Whether or not this backend is currently paused\n     */\n    isPaused() {\n        return this.state !== this.states[PLAYING];\n    }\n\n    /**\n     * Used by `wavesurfer.getDuration()`\n     *\n     * @return {number} Duration of loaded buffer\n     */\n    getDuration() {\n        if (this.explicitDuration) {\n            return this.explicitDuration;\n        }\n        if (!this.buffer) {\n            return 0;\n        }\n        return this.buffer.duration;\n    }\n\n    /**\n     * Used by `wavesurfer.seekTo()`\n     *\n     * @param {number} start Position to start at in seconds\n     * @param {number} end Position to end at in seconds\n     * @return {{start: number, end: number}} Object containing start and end\n     * positions\n     */\n    seekTo(start, end) {\n        if (!this.buffer) {\n            return;\n        }\n\n        this.scheduledPause = null;\n\n        if (start == null) {\n            start = this.getCurrentTime();\n            if (start >= this.getDuration()) {\n                start = 0;\n            }\n        }\n        if (end == null) {\n            end = this.getDuration();\n        }\n\n        this.startPosition = start;\n        this.lastPlay = this.ac.currentTime;\n\n        if (this.state === this.states[FINISHED]) {\n            this.setState(PAUSED);\n        }\n\n        return {\n            start: start,\n            end: end\n        };\n    }\n\n    /**\n     * Get the playback position in seconds\n     *\n     * @return {number} The playback position in seconds\n     */\n    getPlayedTime() {\n        return (this.ac.currentTime - this.lastPlay) * this.playbackRate;\n    }\n\n    /**\n     * Plays the loaded audio region.\n     *\n     * @param {number} start Start offset in seconds, relative to the beginning\n     * of a clip.\n     * @param {number} end When to stop relative to the beginning of a clip.\n     */\n    play(start, end) {\n        if (!this.buffer) {\n            return;\n        }\n\n        // need to re-create source on each playback\n        this.createSource();\n\n        const adjustedTime = this.seekTo(start, end);\n\n        start = adjustedTime.start;\n        end = adjustedTime.end;\n\n        this.scheduledPause = end;\n\n        this.source.start(0, start);\n\n        this.resumeAudioContext();\n\n        this.setState(PLAYING);\n\n        this.fireEvent('play');\n    }\n\n    /**\n     * Pauses the loaded audio.\n     */\n    pause() {\n        this.scheduledPause = null;\n\n        this.startPosition += this.getPlayedTime();\n        this.source && this.source.stop(0);\n\n        this.setState(PAUSED);\n\n        this.fireEvent('pause');\n    }\n\n    /**\n     * Returns the current time in seconds relative to the audio-clip's\n     * duration.\n     *\n     * @return {number} The current time in seconds\n     */\n    getCurrentTime() {\n        return this.state.getCurrentTime.call(this);\n    }\n\n    /**\n     * Returns the current playback rate. (0=no playback, 1=normal playback)\n     *\n     * @return {number} The current playback rate\n     */\n    getPlaybackRate() {\n        return this.playbackRate;\n    }\n\n    /**\n     * Set the audio source playback rate.\n     *\n     * @param {number} value The playback rate to use\n     */\n    setPlaybackRate(value) {\n        this.playbackRate = value || 1;\n        this.source && this.source.playbackRate.setValueAtTime(\n            this.playbackRate,\n            this.ac.currentTime\n        );\n    }\n\n    /**\n     * Set a point in seconds for playback to stop at.\n     *\n     * @param {number} end Position to end at\n     * @version 3.3.0\n     */\n    setPlayEnd(end) {\n        this.scheduledPause = end;\n    }\n}\n","/* eslint-enable complexity, no-redeclare, no-var, one-var */\n\nimport FFT from './fft';\n\n/**\n * @typedef {Object} SpectrogramPluginParams\n * @property {string|HTMLElement} container Selector of element or element in\n * which to render\n * @property {number} fftSamples=512 Number of samples to fetch to FFT. Must be\n * a power of 2.\n * @property {boolean} labels Set to true to display frequency labels.\n * @property {number} noverlap Size of the overlapping window. Must be <\n * fftSamples. Auto deduced from canvas size by default.\n * @property {string} windowFunc='hann' The window function to be used. One of\n * these: `'bartlett'`, `'bartlettHann'`, `'blackman'`, `'cosine'`, `'gauss'`,\n * `'hamming'`, `'hann'`, `'lanczoz'`, `'rectangular'`, `'triangular'`\n * @property {?number} alpha Some window functions have this extra value.\n * (Between 0 and 1)\n * @property {number} pixelRatio=wavesurfer.params.pixelRatio to control the\n * size of the spectrogram in relation with its canvas. 1 = Draw on the whole\n * canvas. 2 = Draw on a quarter (1/2 the length and 1/2 the width)\n * @property {?boolean} deferInit Set to true to manually call\n * `initPlugin('spectrogram')`\n * @property {?number[][]} colorMap A 256 long array of 4-element arrays.\n * Each entry should contain a float between 0 and 1 and specify\n * r, g, b, and alpha.\n */\n\n/**\n * Render a spectrogram visualisation of the audio.\n *\n * @implements {PluginClass}\n * @extends {Observer}\n * @example\n * // es6\n * import SpectrogramPlugin from 'wavesurfer.spectrogram.js';\n *\n * // commonjs\n * var SpectrogramPlugin = require('wavesurfer.spectrogram.js');\n *\n * // if you are using <script> tags\n * var SpectrogramPlugin = window.WaveSurfer.spectrogram;\n *\n * // ... initialising wavesurfer with the plugin\n * var wavesurfer = WaveSurfer.create({\n *   // wavesurfer options ...\n *   plugins: [\n *     SpectrogramPlugin.create({\n *       // plugin options ...\n *     })\n *   ]\n * });\n */\nexport default class SpectrogramPlugin {\n    /**\n     * Spectrogram plugin definition factory\n     *\n     * This function must be used to create a plugin definition which can be\n     * used by wavesurfer to correctly instantiate the plugin.\n     *\n     * @param  {SpectrogramPluginParams} params Parameters used to initialise the plugin\n     * @return {PluginDefinition} An object representing the plugin.\n     */\n    static create(params) {\n        return {\n            name: 'spectrogram',\n            deferInit: params && params.deferInit ? params.deferInit : false,\n            params: params,\n            staticProps: {\n                FFT: FFT\n            },\n            instance: SpectrogramPlugin\n        };\n    }\n\n    constructor(params, ws) {\n        this.params = params;\n        this.wavesurfer = ws;\n        this.util = ws.util;\n\n        this.frequenciesDataUrl = params.frequenciesDataUrl;\n        this._onScroll = e => {\n            this.updateScroll(e);\n        };\n        this._onRender = () => {\n            this.render();\n        };\n        this._onWrapperClick = e => {\n            this._wrapperClickHandler(e);\n        };\n        this._onReady = () => {\n            const drawer = (this.drawer = ws.drawer);\n\n            this.container =\n                'string' == typeof params.container\n                    ? document.querySelector(params.container)\n                    : params.container;\n\n            if (!this.container) {\n                throw Error('No container for WaveSurfer spectrogram');\n            }\n            if (params.colorMap) {\n                if (params.colorMap.length < 256) {\n                    throw new Error('Colormap must contain 256 elements');\n                }\n                for (let i = 0; i < params.colorMap.length; i++) {\n                    const cmEntry = params.colorMap[i];\n                    if (cmEntry.length !== 4) {\n                        throw new Error(\n                            'ColorMap entries must contain 4 values'\n                        );\n                    }\n                }\n                this.colorMap = params.colorMap;\n            } else {\n                this.colorMap = [];\n                for (let i = 0; i < 256; i++) {\n                    const val = (255 - i) / 256;\n                    this.colorMap.push([val, val, val, 1]);\n                }\n            }\n            this.width = drawer.width;\n            this.pixelRatio = this.params.pixelRatio || ws.params.pixelRatio;\n            this.fftSamples =\n                this.params.fftSamples || ws.params.fftSamples || 512;\n            this.height = this.fftSamples / 2;\n            this.noverlap = params.noverlap;\n            this.windowFunc = params.windowFunc;\n            this.alpha = params.alpha;\n\n            this.createWrapper();\n            this.createCanvas();\n            this.render();\n\n            drawer.wrapper.addEventListener('scroll', this._onScroll);\n            ws.on('redraw', this._onRender);\n        };\n    }\n\n    init() {\n        // Check if wavesurfer is ready\n        if (this.wavesurfer.isReady) {\n            this._onReady();\n        } else {\n            this.wavesurfer.once('ready', this._onReady);\n        }\n    }\n\n    destroy() {\n        this.unAll();\n        this.wavesurfer.un('ready', this._onReady);\n        this.wavesurfer.un('redraw', this._onRender);\n        this.drawer && this.drawer.wrapper.removeEventListener('scroll', this._onScroll);\n        this.wavesurfer = null;\n        this.util = null;\n        this.params = null;\n        if (this.wrapper) {\n            this.wrapper.removeEventListener('click', this._onWrapperClick);\n            this.wrapper.parentNode.removeChild(this.wrapper);\n            this.wrapper = null;\n        }\n    }\n\n    createWrapper() {\n        const prevSpectrogram = this.container.querySelector('spectrogram');\n        if (prevSpectrogram) {\n            this.container.removeChild(prevSpectrogram);\n        }\n        const wsParams = this.wavesurfer.params;\n        this.wrapper = document.createElement('spectrogram');\n        // if labels are active\n        if (this.params.labels) {\n            const labelsEl = (this.labelsEl = document.createElement('canvas'));\n            labelsEl.classList.add('spec-labels');\n            this.drawer.style(labelsEl, {\n                left: 0,\n                position: 'absolute',\n                zIndex: 9,\n                height: `${this.height / this.pixelRatio}px`,\n                width: `${55 / this.pixelRatio}px`\n            });\n            this.wrapper.appendChild(labelsEl);\n            this.loadLabels(\n                'rgba(68,68,68,0.5)',\n                '12px',\n                '10px',\n                '',\n                '#fff',\n                '#f7f7f7',\n                'center',\n                '#specLabels'\n            );\n        }\n\n        this.drawer.style(this.wrapper, {\n            display: 'block',\n            position: 'relative',\n            userSelect: 'none',\n            webkitUserSelect: 'none',\n            height: `${this.height / this.pixelRatio}px`\n        });\n\n        if (wsParams.fillParent || wsParams.scrollParent) {\n            this.drawer.style(this.wrapper, {\n                width: '100%',\n                overflowX: 'hidden',\n                overflowY: 'hidden'\n            });\n        }\n        this.container.appendChild(this.wrapper);\n\n        this.wrapper.addEventListener('click', this._onWrapperClick);\n    }\n\n    _wrapperClickHandler(event) {\n        event.preventDefault();\n        const relX = 'offsetX' in event ? event.offsetX : event.layerX;\n        this.fireEvent('click', relX / this.width || 0);\n    }\n\n    createCanvas() {\n        const canvas = (this.canvas = this.wrapper.appendChild(\n            document.createElement('canvas')\n        ));\n\n        this.spectrCc = canvas.getContext('2d');\n\n        this.util.style(canvas, {\n            position: 'absolute',\n            zIndex: 4\n        });\n    }\n\n    render() {\n        this.updateCanvasStyle();\n\n        if (this.frequenciesDataUrl) {\n            this.loadFrequenciesData(this.frequenciesDataUrl);\n        } else {\n            this.getFrequencies(this.drawSpectrogram);\n        }\n    }\n\n    updateCanvasStyle() {\n        const width = Math.round(this.width / this.pixelRatio) + 'px';\n        this.canvas.width = this.width;\n        this.canvas.height = this.height;\n        this.canvas.style.width = width;\n    }\n\n    drawSpectrogram(frequenciesData, my) {\n        const spectrCc = my.spectrCc;\n        const height = my.height;\n        const width = my.width;\n        const pixels = my.resample(frequenciesData);\n        const heightFactor = my.buffer ? 2 / my.buffer.numberOfChannels : 1;\n        const imageData = spectrCc.createImageData(width, height);\n        let i;\n        let j;\n        let k;\n\n        for (i = 0; i < pixels.length; i++) {\n            for (j = 0; j < pixels[i].length; j++) {\n                const colorMap = my.colorMap[pixels[i][j]];\n                /* eslint-disable max-depth */\n                for (k = 0; k < heightFactor; k++) {\n                    let y = height - j * heightFactor;\n                    if (heightFactor === 2 && k === 1) {\n                        y--;\n                    }\n                    const redIndex = y * (width * 4) + i * 4;\n                    imageData.data[redIndex] = colorMap[0] * 255;\n                    imageData.data[redIndex + 1] = colorMap[1] * 255;\n                    imageData.data[redIndex + 2] = colorMap[2] * 255;\n                    imageData.data[redIndex + 3] = colorMap[3] * 255;\n                }\n                /* eslint-enable max-depth */\n            }\n        }\n        spectrCc.putImageData(imageData, 0, 0);\n    }\n\n    getFrequencies(callback) {\n        const fftSamples = this.fftSamples;\n        const buffer = (this.buffer = this.wavesurfer.backend.buffer);\n        const channelOne = buffer.getChannelData(0);\n        const bufferLength = buffer.length;\n        const sampleRate = buffer.sampleRate;\n        const frequencies = [];\n\n        if (!buffer) {\n            this.fireEvent('error', 'Web Audio buffer is not available');\n            return;\n        }\n\n        let noverlap = this.noverlap;\n        if (!noverlap) {\n            const uniqueSamplesPerPx = buffer.length / this.canvas.width;\n            noverlap = Math.max(0, Math.round(fftSamples - uniqueSamplesPerPx));\n        }\n\n        const fft = new FFT(\n            fftSamples,\n            sampleRate,\n            this.windowFunc,\n            this.alpha\n        );\n        const maxSlicesCount = Math.floor(\n            bufferLength / (fftSamples - noverlap)\n        );\n        let currentOffset = 0;\n\n        while (currentOffset + fftSamples < channelOne.length) {\n            const segment = channelOne.slice(\n                currentOffset,\n                currentOffset + fftSamples\n            );\n            const spectrum = fft.calculateSpectrum(segment);\n            const array = new Uint8Array(fftSamples / 2);\n            let j;\n            for (j = 0; j < fftSamples / 2; j++) {\n                array[j] = Math.max(-255, Math.log10(spectrum[j]) * 45);\n            }\n            frequencies.push(array);\n            currentOffset += fftSamples - noverlap;\n        }\n        callback(frequencies, this);\n    }\n\n    loadFrequenciesData(url) {\n        const request = this.util.fetchFile({ url: url });\n\n        request.on('success', data =>\n            this.drawSpectrogram(JSON.parse(data), this)\n        );\n        request.on('error', e => this.fireEvent('error', e));\n\n        return request;\n    }\n\n    freqType(freq) {\n        return freq >= 1000 ? (freq / 1000).toFixed(1) : Math.round(freq);\n    }\n\n    unitType(freq) {\n        return freq >= 1000 ? 'KHz' : 'Hz';\n    }\n\n    loadLabels(\n        bgFill,\n        fontSizeFreq,\n        fontSizeUnit,\n        fontType,\n        textColorFreq,\n        textColorUnit,\n        textAlign,\n        container\n    ) {\n        const frequenciesHeight = this.height;\n        bgFill = bgFill || 'rgba(68,68,68,0)';\n        fontSizeFreq = fontSizeFreq || '12px';\n        fontSizeUnit = fontSizeUnit || '10px';\n        fontType = fontType || 'Helvetica';\n        textColorFreq = textColorFreq || '#fff';\n        textColorUnit = textColorUnit || '#fff';\n        textAlign = textAlign || 'center';\n        container = container || '#specLabels';\n        const bgWidth = 55;\n        const getMaxY = frequenciesHeight || 512;\n        const labelIndex = 5 * (getMaxY / 256);\n        const freqStart = 0;\n        const step =\n            (this.wavesurfer.backend.ac.sampleRate / 2 - freqStart) /\n            labelIndex;\n\n        // prepare canvas element for labels\n        const ctx = this.labelsEl.getContext('2d');\n        this.labelsEl.height = this.height;\n        this.labelsEl.width = bgWidth;\n\n        // fill background\n        ctx.fillStyle = bgFill;\n        ctx.fillRect(0, 0, bgWidth, getMaxY);\n        ctx.fill();\n        let i;\n\n        // render labels\n        for (i = 0; i <= labelIndex; i++) {\n            ctx.textAlign = textAlign;\n            ctx.textBaseline = 'middle';\n\n            const freq = freqStart + step * i;\n            const index = Math.round(\n                (freq / (this.sampleRate / 2)) * this.fftSamples\n            );\n            const label = this.freqType(freq);\n            const units = this.unitType(freq);\n            const yLabelOffset = 2;\n            const x = 16;\n            let y;\n\n            if (i == 0) {\n                y = getMaxY + i - 10;\n                // unit label\n                ctx.fillStyle = textColorUnit;\n                ctx.font = fontSizeUnit + ' ' + fontType;\n                ctx.fillText(units, x + 24, y);\n                // freq label\n                ctx.fillStyle = textColorFreq;\n                ctx.font = fontSizeFreq + ' ' + fontType;\n                ctx.fillText(label, x, y);\n            } else {\n                y = getMaxY - i * 50 + yLabelOffset;\n                // unit label\n                ctx.fillStyle = textColorUnit;\n                ctx.font = fontSizeUnit + ' ' + fontType;\n                ctx.fillText(units, x + 24, y);\n                // freq label\n                ctx.fillStyle = textColorFreq;\n                ctx.font = fontSizeFreq + ' ' + fontType;\n                ctx.fillText(label, x, y);\n            }\n        }\n    }\n\n    updateScroll(e) {\n        if (this.wrapper) {\n            this.wrapper.scrollLeft = e.target.scrollLeft;\n        }\n    }\n\n    resample(oldMatrix) {\n        const columnsNumber = this.width;\n        const newMatrix = [];\n\n        const oldPiece = 1 / oldMatrix.length;\n        const newPiece = 1 / columnsNumber;\n        let i;\n\n        for (i = 0; i < columnsNumber; i++) {\n            const column = new Array(oldMatrix[0].length);\n            let j;\n\n            for (j = 0; j < oldMatrix.length; j++) {\n                const oldStart = j * oldPiece;\n                const oldEnd = oldStart + oldPiece;\n                const newStart = i * newPiece;\n                const newEnd = newStart + newPiece;\n\n                const overlap =\n                    oldEnd <= newStart || newEnd <= oldStart\n                        ? 0\n                        : Math.min(\n                            Math.max(oldEnd, newStart),\n                            Math.max(newEnd, oldStart)\n                        ) -\n                        Math.max(\n                            Math.min(oldEnd, newStart),\n                            Math.min(newEnd, oldStart)\n                        );\n                let k;\n                /* eslint-disable max-depth */\n                if (overlap > 0) {\n                    for (k = 0; k < oldMatrix[0].length; k++) {\n                        if (column[k] == null) {\n                            column[k] = 0;\n                        }\n                        column[k] += (overlap / newPiece) * oldMatrix[j][k];\n                    }\n                }\n                /* eslint-enable max-depth */\n            }\n\n            const intColumn = new Uint8Array(oldMatrix[0].length);\n            let m;\n\n            for (m = 0; m < oldMatrix[0].length; m++) {\n                intColumn[m] = column[m];\n            }\n\n            newMatrix.push(intColumn);\n        }\n\n        return newMatrix;\n    }\n}\n","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"spectrogram\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"spectrogram\"] = factory();\n\telse\n\t\troot[\"WaveSurfer\"] = root[\"WaveSurfer\"] || {}, root[\"WaveSurfer\"][\"spectrogram\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"localhost:8080/dist/plugin/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/plugin/spectrogram/index.js\");\n","/* eslint-disable complexity, no-redeclare, no-var, one-var */\n\n/**\n * Calculate FFT - Based on https://github.com/corbanbrook/dsp.js\n *\n * @param {Number} bufferSize Buffer size\n * @param {Number} sampleRate Sample rate\n * @param {Function} windowFunc Window function\n * @param {Number} alpha Alpha channel\n */\nexport default function FFT(bufferSize, sampleRate, windowFunc, alpha) {\n    this.bufferSize = bufferSize;\n    this.sampleRate = sampleRate;\n    this.bandwidth = (2 / bufferSize) * (sampleRate / 2);\n\n    this.sinTable = new Float32Array(bufferSize);\n    this.cosTable = new Float32Array(bufferSize);\n    this.windowValues = new Float32Array(bufferSize);\n    this.reverseTable = new Uint32Array(bufferSize);\n\n    this.peakBand = 0;\n    this.peak = 0;\n\n    var i;\n    switch (windowFunc) {\n        case 'bartlett':\n            for (i = 0; i < bufferSize; i++) {\n                this.windowValues[i] =\n                    (2 / (bufferSize - 1)) *\n                    ((bufferSize - 1) / 2 - Math.abs(i - (bufferSize - 1) / 2));\n            }\n            break;\n        case 'bartlettHann':\n            for (i = 0; i < bufferSize; i++) {\n                this.windowValues[i] =\n                    0.62 -\n                    0.48 * Math.abs(i / (bufferSize - 1) - 0.5) -\n                    0.38 * Math.cos((Math.PI * 2 * i) / (bufferSize - 1));\n            }\n            break;\n        case 'blackman':\n            alpha = alpha || 0.16;\n            for (i = 0; i < bufferSize; i++) {\n                this.windowValues[i] =\n                    (1 - alpha) / 2 -\n                    0.5 * Math.cos((Math.PI * 2 * i) / (bufferSize - 1)) +\n                    (alpha / 2) *\n                        Math.cos((4 * Math.PI * i) / (bufferSize - 1));\n            }\n            break;\n        case 'cosine':\n            for (i = 0; i < bufferSize; i++) {\n                this.windowValues[i] = Math.cos(\n                    (Math.PI * i) / (bufferSize - 1) - Math.PI / 2\n                );\n            }\n            break;\n        case 'gauss':\n            alpha = alpha || 0.25;\n            for (i = 0; i < bufferSize; i++) {\n                this.windowValues[i] = Math.pow(\n                    Math.E,\n                    -0.5 *\n                        Math.pow(\n                            (i - (bufferSize - 1) / 2) /\n                                ((alpha * (bufferSize - 1)) / 2),\n                            2\n                        )\n                );\n            }\n            break;\n        case 'hamming':\n            for (i = 0; i < bufferSize; i++) {\n                this.windowValues[i] =\n                    0.54 -\n                    0.46 * Math.cos((Math.PI * 2 * i) / (bufferSize - 1));\n            }\n            break;\n        case 'hann':\n        case undefined:\n            for (i = 0; i < bufferSize; i++) {\n                this.windowValues[i] =\n                    0.5 * (1 - Math.cos((Math.PI * 2 * i) / (bufferSize - 1)));\n            }\n            break;\n        case 'lanczoz':\n            for (i = 0; i < bufferSize; i++) {\n                this.windowValues[i] =\n                    Math.sin(Math.PI * ((2 * i) / (bufferSize - 1) - 1)) /\n                    (Math.PI * ((2 * i) / (bufferSize - 1) - 1));\n            }\n            break;\n        case 'rectangular':\n            for (i = 0; i < bufferSize; i++) {\n                this.windowValues[i] = 1;\n            }\n            break;\n        case 'triangular':\n            for (i = 0; i < bufferSize; i++) {\n                this.windowValues[i] =\n                    (2 / bufferSize) *\n                    (bufferSize / 2 - Math.abs(i - (bufferSize - 1) / 2));\n            }\n            break;\n        default:\n            throw Error(\"No such window function '\" + windowFunc + \"'\");\n    }\n\n    var limit = 1;\n    var bit = bufferSize >> 1;\n    var i;\n\n    while (limit < bufferSize) {\n        for (i = 0; i < limit; i++) {\n            this.reverseTable[i + limit] = this.reverseTable[i] + bit;\n        }\n\n        limit = limit << 1;\n        bit = bit >> 1;\n    }\n\n    for (i = 0; i < bufferSize; i++) {\n        this.sinTable[i] = Math.sin(-Math.PI / i);\n        this.cosTable[i] = Math.cos(-Math.PI / i);\n    }\n\n    this.calculateSpectrum = function(buffer) {\n        // Locally scope variables for speed up\n        var bufferSize = this.bufferSize,\n            cosTable = this.cosTable,\n            sinTable = this.sinTable,\n            reverseTable = this.reverseTable,\n            real = new Float32Array(bufferSize),\n            imag = new Float32Array(bufferSize),\n            bSi = 2 / this.bufferSize,\n            sqrt = Math.sqrt,\n            rval,\n            ival,\n            mag,\n            spectrum = new Float32Array(bufferSize / 2);\n\n        var k = Math.floor(Math.log(bufferSize) / Math.LN2);\n\n        if (Math.pow(2, k) !== bufferSize) {\n            throw 'Invalid buffer size, must be a power of 2.';\n        }\n        if (bufferSize !== buffer.length) {\n            throw 'Supplied buffer is not the same size as defined FFT. FFT Size: ' +\n                bufferSize +\n                ' Buffer Size: ' +\n                buffer.length;\n        }\n\n        var halfSize = 1,\n            phaseShiftStepReal,\n            phaseShiftStepImag,\n            currentPhaseShiftReal,\n            currentPhaseShiftImag,\n            off,\n            tr,\n            ti,\n            tmpReal;\n\n        for (var i = 0; i < bufferSize; i++) {\n            real[i] =\n                buffer[reverseTable[i]] * this.windowValues[reverseTable[i]];\n            imag[i] = 0;\n        }\n\n        while (halfSize < bufferSize) {\n            phaseShiftStepReal = cosTable[halfSize];\n            phaseShiftStepImag = sinTable[halfSize];\n\n            currentPhaseShiftReal = 1;\n            currentPhaseShiftImag = 0;\n\n            for (var fftStep = 0; fftStep < halfSize; fftStep++) {\n                var i = fftStep;\n\n                while (i < bufferSize) {\n                    off = i + halfSize;\n                    tr =\n                        currentPhaseShiftReal * real[off] -\n                        currentPhaseShiftImag * imag[off];\n                    ti =\n                        currentPhaseShiftReal * imag[off] +\n                        currentPhaseShiftImag * real[off];\n\n                    real[off] = real[i] - tr;\n                    imag[off] = imag[i] - ti;\n                    real[i] += tr;\n                    imag[i] += ti;\n\n                    i += halfSize << 1;\n                }\n\n                tmpReal = currentPhaseShiftReal;\n                currentPhaseShiftReal =\n                    tmpReal * phaseShiftStepReal -\n                    currentPhaseShiftImag * phaseShiftStepImag;\n                currentPhaseShiftImag =\n                    tmpReal * phaseShiftStepImag +\n                    currentPhaseShiftImag * phaseShiftStepReal;\n            }\n\n            halfSize = halfSize << 1;\n        }\n\n        for (var i = 0, N = bufferSize / 2; i < N; i++) {\n            rval = real[i];\n            ival = imag[i];\n            mag = bSi * sqrt(rval * rval + ival * ival);\n\n            if (mag > this.peak) {\n                this.peakBand = i;\n                this.peak = mag;\n            }\n            spectrum[i] = mag;\n        }\n        return spectrum;\n    };\n}\n","import { h, Component } from 'preact';\nimport { WavAudio } from 'flipnote.js';\nimport WaveSurfer from 'wavesurfer.js';\nimport SpectrogramPlugin from 'wavesurfer.js/dist/plugin/wavesurfer.spectrogram';\n\nconst saveBlob = (function () {\n  const a = document.createElement('a');\n  document.body.appendChild(a);\n  a.style.display = 'none';\n  return function (blob: Blob, fileName: string) {\n    const url = window.URL.createObjectURL(blob);\n    a.href = url;\n    a.download = fileName;\n    a.click();\n    window.URL.revokeObjectURL(url);\n  };\n}());\n\ninterface Props {\n  buffer: Int16Array\n};\n\ninterface State {\n  isPlaying: boolean;\n  volume: number;\n  clipRatio: number;\n  average: number;\n};\n\nexport class WaveViewer extends Component<Props,  State> {\n\n  state: State = {\n    isPlaying: false,\n    volume: 1,\n    clipRatio: 0,\n    average: 0,\n  };\n\n  sourceBuffer: AudioBuffer;\n  wavesurfer: WaveSurfer;\n  waveEl: HTMLElement = null;\n  spectroEl: HTMLElement = null;\n  setWaveEl = (dom: HTMLElement) => this.waveEl = dom;\n  setSpectroEl = (dom: HTMLElement) => this.spectroEl = dom;\n\n  componentDidMount() {\n    const wavesurfer = WaveSurfer.create({\n      container: this.waveEl,\n      scrollParent: true,\n      waveColor: '#ff751e',\n      progressColor: '#ff751e',\n      cursorColor: 'black',\n      minPxPerSec: 100,\n      pixelRatio: 1,\n      fillParent: false,\n      height: 200,\n      plugins: [\n        SpectrogramPlugin.create({\n          container: this.spectroEl,\n          labels: true,\n          fftSamples: 512\n        })\n      ]\n    });\n    wavesurfer.on('play', () => {\n      this.setState({ isPlaying: true });\n    });\n    wavesurfer.on('pause', () => {\n      this.setState({ isPlaying: false });\n    });\n    this.wavesurfer = wavesurfer;\n  }\n\n  shouldComponentUpdate(nextProps: Props, nextState: State) {\n    // if the source buffer has changed\n    if (nextProps.buffer instanceof Int16Array && this.props.buffer !== nextProps.buffer) {\n      const pcm16 = nextProps.buffer;\n      const numSamples = pcm16.length;\n      const audioBuffer = new AudioBuffer({length: numSamples, sampleRate: 16364});\n      const pcmF32 = new Float32Array(numSamples);\n\n      let numClippedSamples = 0;\n      let sum = 0;\n      pcm16.forEach((sample, i) => {\n        // count number of samples that hit the clipping boundary\n        if (sample <= -32768 || sample >= 32767)\n          numClippedSamples += 1;\n        // convert sample to float 0..1 range\n        const floatSample = sample / 32767;\n        // sum samples for calculating an average\n        sum += floatSample;\n        pcmF32[i] = floatSample;\n      });\n      audioBuffer.copyToChannel(pcmF32, 0, 0);\n      this.setState({\n        clipRatio: numClippedSamples / numSamples,\n        average: sum / numSamples,\n      });\n      delete this.sourceBuffer;\n      this.sourceBuffer = audioBuffer;\n      this.wavesurfer.empty();\n      this.wavesurfer.loadDecodedBuffer(audioBuffer);\n    }\n    return true;\n  }\n\n  componentWillUnmount() {\n    this.wavesurfer.destroy();\n  }\n\n  render() {\n    const props = this.props;\n    const state = this.state;\n    return (\n      <div class=\"WaveViewer\">\n        <div class=\"WaveViewer__wave\" ref={ this.setWaveEl }></div>\n        <div class=\"WaveViewer__spectro\" ref={ this.setSpectroEl }></div>\n        <div class=\"WaveViewer__controls\">\n          <div class=\"ButtonGroup WaveViewer__controlGroup--left\">\n            <div class=\"Button\" style={{ width: '70px' }} onClick={ this.togglePlay }>{ state.isPlaying ? 'Pause' : 'Play' }</div>\n            <div class=\"Button\" onClick={ this.saveWav }>Download .WAV</div>\n            <span class=\"WaveViewer__stat\">\n              <input\n                type=\"range\"\n                name=\"\"\n                id=\"\"\n                min=\"0\"\n                max=\"1\"\n                step=\".01\"\n                onInput={ this.updateVolume }\n              />\n            </span>\n          </div>\n          <div class=\"WaveViewer__controlGroup--right\">\n            <span class=\"WaveViewer__stat\">Clipping ratio: { (state.clipRatio * 100).toPrecision(2) }%</span>\n            <span class=\"WaveViewer__stat\">Average: { (state.average).toPrecision(3) }%</span>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  updateVolume = (e: Event) => {\n    const target = e.target as HTMLInputElement;\n    const value = parseFloat(target.value);\n    console.log(value)\n    this.wavesurfer.setVolume(value);\n    this.setState({ volume: value });\n  }\n\n  togglePlay = () => {\n    if (this.wavesurfer.isPlaying())\n      this.wavesurfer.pause();\n    else\n      this.wavesurfer.play();\n  }\n\n  saveWav = () => {\n    const pcm16 = this.props.buffer;\n    const wav = new WavAudio(16364, 1, 16);\n    wav.writeFrames(pcm16);\n    const blob = wav.getBlob();\n    saveBlob(blob, 'out.wav');\n  }\n\n}","import { h, FunctionComponent } from 'preact';\n\ninterface Props {\n  title: string;\n};\n\nexport const InputGroup: FunctionComponent<Props> = ({ title, children }) => (\n  <div class=\"InputGroup\">\n    <div class=\"InputGroup__head\">\n      <h3 class=\"InputGroup__title\">{ title }</h3>\n    </div>\n    <div class=\"InputGroup__body\">{ children }</div>\n  </div>\n);","import { h, FunctionComponent } from 'preact';\n\ninterface Props {\n  title: string;\n  id: string;\n  value: any;\n  type: 'int' | 'float' | 'array';\n  onInput: (value: any) => void;\n  textarea?: boolean;\n  disabled?: boolean;\n};\n\n// https://stackoverflow.com/questions/26156292/trim-specific-character-from-a-string\nfunction trim (s: string, c: string) {\n  if (c === \"]\")\n    c = \"\\\\]\";\n  if (c === \"\\\\\")\n    c = \"\\\\\\\\\";\n  return s.replace(new RegExp(\n    \"^[\" + c + \"]+|[\" + c + \"]+$\", \"g\"\n  ), \"\");\n}\n\nexport const Input: FunctionComponent<Props> = ({\n  type,\n  title,\n  id, \n  value,\n  onInput,\n  textarea,\n  disabled\n}) => {\n  const handleInput = function(e: Event) {\n    const target = e.target as HTMLInputElement;\n    let value;\n    switch (type) {\n      case 'int':\n        value = parseInt(target.value);\n        break;\n      case 'float':\n        value = parseFloat(target.value);\n        break;\n      case 'array':\n        value = JSON.parse(`[ ${ trim(target.value.trim(), ',') } ]`);\n        break;\n    }\n    onInput(value);\n  }\n\n  return (\n    <div class=\"Input\">\n      <label \n        class=\"Input__label\"\n        htmlFor={ id }\n      >\n        { title }\n      </label>\n      {textarea && (\n        <textarea\n          class=\"Input__entry Input__entry--textarea\"\n          id={ id }\n          type={ type === 'array' ? 'string' : 'number' }\n          disabled={ disabled }\n          value={ value }\n          onChange={ handleInput }\n        />\n      )}\n      {!textarea && (\n        <input\n          class=\"Input__entry\"\n          id={ id }\n          type={ type === 'array' ? 'string' : 'number' }\n          disabled={ disabled }\n          value={ value }\n          onChange={ handleInput }\n        />\n      )}\n    </div>\n  );\n};\n\nInput.defaultProps = {\n  title: '',\n  id: '',\n  value: 0,\n  type: 'int',\n  onInput: (value: any) => {},\n  textarea: false,\n  disabled: false\n};","import { h, FunctionComponent } from 'preact';\n\ninterface Props {\n  title: string;\n  id: string;\n  options: any;\n  value: any;\n  disabled?: boolean;\n  onInput: (value: any) => void;\n};\n\ninterface Option {\n  key: string;\n  value: number;\n};\n\nexport const EnumInput: FunctionComponent<Props> = ({\n  title,\n  id, \n  value,\n  options,\n  disabled,\n  onInput,\n}) => {\n  const handleInput = function(e: Event) {\n    const target = e.target as HTMLInputElement;\n    const value = parseInt(target.value);\n    onInput(value);\n  }\n\n  const optionList: Option[] = [];\n  for (let key in options) {\n    if (isNaN(Number(key))) {\n      const value = options[key];\n      optionList.push({ key, value });\n    }\n  }\n\n  return (\n    <div class=\"Input\">\n      <label \n        class=\"Input__label\"\n        htmlFor={ id }\n      >\n        { title }\n      </label>\n      <select\n        class=\"Input__entry\"\n        id={ id }\n        type=\"number\"\n        disabled={ disabled }\n        value={ value }\n        onChange={ handleInput }\n      >\n        {\n          optionList.map(({ key, value }) => (\n            <option value={ value }>{ key }</option>\n          ))\n        }\n      </select>\n    </div>\n  );\n};\n\nEnumInput.defaultProps = {\n  title: '',\n  id: '',\n  value: 0,\n  options: {},\n  onInput: (value: any) => {},\n  disabled: false\n};","import { h, Component } from 'preact';\nimport { Flipnote, parseSource } from 'flipnote.js';\nimport { AudioRenderer, SampleSize } from './AudioRenderer';\nimport { Header } from './components/Header';\nimport { Footer } from './components/Footer';\nimport { NotePreview } from './components/NotePreview';\nimport { WaveViewer } from './components/WaveViewer';\nimport { InputGroup } from './components/InputGroup';\nimport { Input } from './components/Input';\nimport { EnumInput } from './components/EnumInput';\n\nimport sampleUrl from '../samples/ppm-convert-1.kwz';\n\ninterface Props {};\n\ninterface State {\n  note: Flipnote;\n  pcmBuffer?: Int16Array;\n  // initial adpcm state\n  initialPredictor: number;\n  initialStepIndex: number;\n  initialSample: number;\n  initialStep: number;\n  initialDiff: number;\n  // adpcm clamp + scale\n  stepIndexClampMin: number;\n  stepIndexClampMax: number;\n  predictorClampMin: number;\n  predictorClampMax: number;\n  predictorScale: number;\n  // sampling\n  sampleSize: SampleSize;\n  variableSwitchThreshold: number;\n  indexTable2Bit: number[];\n  indexTable4Bit: number[];\n  stepTable: number[];\n};\n\nexport class App extends Component<Props, State> {\n  audioRenderer = new AudioRenderer();\n  state: State = {\n    note: null,\n    pcmBuffer: null,\n    initialPredictor: this.audioRenderer.initialPredictor,\n    initialStepIndex: this.audioRenderer.initialStepIndex,\n    initialSample: this.audioRenderer.initialSample,\n    initialStep: this.audioRenderer.initialStep,\n    initialDiff: this.audioRenderer.initialDiff,\n    stepIndexClampMin: this.audioRenderer.stepIndexClampMin,\n    stepIndexClampMax: this.audioRenderer.stepIndexClampMax,\n    predictorClampMin: this.audioRenderer.predictorClampMin,\n    predictorClampMax: this.audioRenderer.predictorClampMax,\n    predictorScale: this.audioRenderer.predictorScale,\n    sampleSize: this.audioRenderer.sampleSize,\n    variableSwitchThreshold: this.audioRenderer.variableSwitchThreshold,\n    indexTable2Bit: this.audioRenderer.indexTable2Bit,\n    indexTable4Bit: this.audioRenderer.indexTable4Bit,\n    stepTable: this.audioRenderer.stepTable\n  };\n\n  async loadFlipnote(source: any) {\n    const note = await parseSource(source);\n    this.audioRenderer.loadFlipnote(note);\n    await this.setState({ note });\n    this.updateAudio();\n  }\n\n  // call this whenever an audioRenderer setting has been updated\n  async updateAudio() {\n    const pcmBuffer = this.audioRenderer.renderPcm();\n    console.log('new bgm pcm buffer:', pcmBuffer);\n    this.setState({ pcmBuffer });\n  }\n\n\n  componentDidMount() {\n    this.loadFlipnote(sampleUrl);\n  }\n\n  handleFileUpload = (e: Event) => {\n    const target = e.target as HTMLInputElement;\n    if (target.files.length) {\n      const file = target.files[0];\n      this.loadFlipnote(file);\n    }\n  }\n\n  updateInitialPredictor = (value: number) => {\n    this.setState({ initialPredictor: value });\n    if (!isNaN(value)) {\n      this.audioRenderer.initialPredictor = value;\n      this.updateAudio();\n    }\n  }\n\n  updateInitialStepIndex = (value: number) => {\n    this.setState({ initialStepIndex: value });\n    if (!isNaN(value)) {\n      this.audioRenderer.initialStepIndex = value;\n      this.updateAudio();\n    }\n  }\n\n  updateInitialSample = (value: number) => {\n    this.setState({ initialSample: value });\n    if (!isNaN(value)) {\n      this.audioRenderer.initialSample = value;\n      this.updateAudio();\n    }\n  }\n\n  updateInitialStep = (value: number) => {\n    this.setState({ initialStep: value });\n    if (!isNaN(value)) {\n      this.audioRenderer.initialStep = value;\n      this.updateAudio();\n    }\n  }\n\n  updateInitialDiff = (value: number) => {\n    this.setState({ initialDiff: value });\n    if (!isNaN(value)) {\n      this.audioRenderer.initialDiff = value;\n      this.updateAudio();\n    }\n  }\n\n  updateStepIndexClampMin = (value: number) => {\n    this.setState({ stepIndexClampMin: value });\n    if (!isNaN(value)) {\n      this.audioRenderer.stepIndexClampMin = value;\n      this.updateAudio();\n    }\n  }\n\n  updateStepIndexClampMax = (value: number) => {\n    this.setState({ stepIndexClampMax: value });\n    if (!isNaN(value)) {\n      this.audioRenderer.stepIndexClampMax = value;\n      this.updateAudio();\n    }\n  }\n\n  updatePredictorClampMin = (value: number) => {\n    this.setState({predictorClampMin: value });\n    if (!isNaN(value)) {\n      this.audioRenderer.predictorClampMin = value;\n      this.updateAudio();\n    }\n  }\n\n  updatePredictorClampMax = (value: number) => {\n    this.setState({predictorClampMax: value });\n    if (!isNaN(value)) {\n      this.audioRenderer.predictorClampMax = value;\n      this.updateAudio();\n    }\n  }\n\n  updatePredictorScale = (value: number) => {\n    this.setState({predictorScale: value });\n    if (!isNaN(value)) {\n      this.audioRenderer.predictorScale = value;\n      this.updateAudio();\n    }\n  }\n\n  updateSampleSize = (value: number) => {\n    this.setState({sampleSize: value });\n    if (!isNaN(value)) {\n      this.audioRenderer.sampleSize = value;\n      this.updateAudio();\n    }\n  }\n\n  updateVariableSwitchThreshold = (value: number) => {\n    this.setState({variableSwitchThreshold: value });\n    if (!isNaN(value)) {\n      this.audioRenderer.variableSwitchThreshold = value;\n      this.updateAudio();\n    }\n  }\n\n  updateIndexTable2Bit = (value: number[]) => {\n    if (Array.isArray(value)) {\n      this.setState({indexTable2Bit: value });\n      this.audioRenderer.indexTable2Bit = value;\n      this.updateAudio();\n    }\n  }\n\n  updateIndexTable4Bit = (value: number[]) => {\n    if (Array.isArray(value)) {\n      this.setState({indexTable4Bit: value });\n      this.audioRenderer.indexTable4Bit = value;\n      this.updateAudio();\n    }\n  }\n\n  updateStepTable = (value: number[]) => {\n    if (Array.isArray(value)) {\n      this.setState({stepTable: value });\n      this.audioRenderer.stepTable = value;\n      this.updateAudio();\n    }\n  }\n\n  render() {\n    const props = this.props;\n    const state = this.state;\n    return (\n      <div class=\"App\">\n        <Header/>\n        <div class=\"Row\">\n          <div class=\"Column\">\n            <div class=\"UploadPanel\">\n              <input type=\"file\" accept=\".kwz\" onChange={ this.handleFileUpload }/>\n            </div>\n          </div>\n          <div class=\"Column\">\n            <NotePreview note={ state.note }/>\n          </div>\n        </div>\n        <WaveViewer buffer={ state.pcmBuffer }></WaveViewer>\n        <InputGroup title=\"Initial ADPCM State\">\n          <Input\n            title=\"Step Index\"\n            id=\"initialStepIndex\"\n            type=\"int\"\n            value={ state.initialStepIndex }\n            onInput={ this.updateInitialStepIndex }\n          />\n          <Input\n            title=\"Predictor\"\n            id=\"initialPredictor\"\n            type=\"int\"\n            value={ state.initialPredictor }\n            onInput={ this.updateInitialPredictor }\n          />\n          <Input\n            title=\"Sample\"\n            id=\"initialSample\"\n            type=\"int\"\n            value={ state.initialSample }\n            onInput={ this.updateInitialSample }\n          />\n          <Input\n            title=\"Step\"\n            id=\"initialStep\"\n            type=\"int\"\n            value={ state.initialStep }\n            onInput={ this.updateInitialStep }\n          />\n          <Input\n            title=\"Diff\"\n            id=\"initialDiff\"\n            type=\"int\"\n            value={ state.initialDiff }\n            onInput={ this.updateInitialDiff }\n          />\n        </InputGroup>\n        <InputGroup title=\"ADPCM Clamping &amp; Scale\">\n          <Input\n            title=\"Step Index Clamp Min.\"\n            id=\"stepIndexClampMin\"\n            type=\"int\"\n            value={ state.stepIndexClampMin }\n            onInput={ this.updateStepIndexClampMin }\n          />\n          <Input\n            title=\"Step Index Clamp Max.\"\n            id=\"stepIndexClampMax\"\n            type=\"int\"\n            value={ state.stepIndexClampMax }\n            onInput={ this.updateStepIndexClampMax }\n          />\n          <Input\n            title=\"Predictor Clamp Min.\"\n            id=\"predictorClampMin\"\n            type=\"int\"\n            value={ state.predictorClampMin }\n            onInput={ this.updatePredictorClampMin }\n          />\n          <Input\n            title=\"Predictor Clamp Max.\"\n            id=\"predictorClampMax\"\n            type=\"int\"\n            value={ state.predictorClampMax }\n            onInput={ this.updatePredictorClampMax }\n          />\n          <Input\n            title=\"Predictor Scale\"\n            id=\"predictorScale\"\n            type=\"int\"\n            value={ state.predictorScale }\n            onInput={ this.updatePredictorScale }\n          />\n        </InputGroup>\n        <InputGroup title=\"ADPCM Sampling\">\n          <EnumInput\n            title=\"Sample Size\"\n            id=\"sampleSize\"\n            options={ SampleSize }\n            value={ state.sampleSize }\n            onInput={ this.updateSampleSize }\n          />\n          <Input\n            title=\"Variable Threshold\"\n            id=\"switchThreshold\"\n            type=\"int\"\n            disabled={ state.sampleSize !== SampleSize.Variable }\n            value={ state.variableSwitchThreshold }\n            onInput={ this.updateVariableSwitchThreshold }\n          />\n          <div class=\"BigInputGroup\">\n            <Input\n              title=\"2 Bit Index Table\"\n              id=\"2BitIndexTable\"\n              type=\"array\"\n              value={ state.indexTable2Bit }\n              onInput={ this.updateIndexTable2Bit }\n            />\n            <Input\n              title=\"4 Bit Index Table\"\n              id=\"4BitIndexTable\"\n              type=\"array\"\n              value={ state.indexTable4Bit }\n              onInput={ this.updateIndexTable4Bit }\n            />\n            <Input\n              title=\"Step Table\"\n              id=\"stepTable\"\n              type=\"array\"\n              textarea={ true }\n              value={ state.stepTable }\n              onInput={ this.updateStepTable }\n            />\n          </div>\n        </InputGroup>\n        <Footer/>\n      </div>\n    );\n  }\n}","import { h, render } from 'preact';\nimport { App } from './App';\n\nconst root = document.getElementById('root');\n\nrender(<App />, root!);"]}